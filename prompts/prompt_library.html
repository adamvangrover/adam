<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive AI Prompt Library</title>
    <style>
        :root {
            --bg-color: #f8f9fa;
            --font-color: #212529;
            --primary-color: #007bff;
            --secondary-color: #6c757d;
            --card-bg: #ffffff;
            --card-border: #dee2e6;
            --shadow: 0 4px 8px rgba(0,0,0,0.1);
            --font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        }
        body {
            font-family: var(--font-family);
            background-color: var(--bg-color);
            color: var(--font-color);
            margin: 0;
            display: flex;
            line-height: 1.6;
        }
        #sidebar {
            width: 300px;
            background-color: var(--card-bg);
            border-right: 1px solid var(--card-border);
            padding: 20px;
            height: 100vh;
            position: fixed;
            overflow-y: auto;
        }
        #sidebar h2 {
            margin-top: 0;
            color: var(--primary-color);
            font-size: 1.5em;
        }
        #sidebar ul {
            list-style: none;
            padding: 0;
        }
        #sidebar li a {
            display: block;
            padding: 8px 12px;
            color: var(--secondary-color);
            text-decoration: none;
            border-radius: 5px;
            transition: background-color 0.2s, color 0.2s;
            font-weight: 500;
        }
        #sidebar li a:hover, #sidebar li a.active {
            background-color: #e9ecef;
            color: var(--primary-color);
        }
        #main-content {
            margin-left: 340px;
            padding: 20px 40px;
            width: calc(100% - 380px);
        }
        #search-bar {
            width: 100%;
            padding: 12px;
            font-size: 1em;
            margin-bottom: 20px;
            border: 1px solid var(--card-border);
            border-radius: 5px;
        }
        .stage {
            margin-bottom: 40px;
        }
        .stage-title {
            font-size: 2.5em;
            color: var(--primary-color);
            border-bottom: 2px solid var(--primary-color);
            padding-bottom: 10px;
            margin-bottom: 30px;
        }
        .section-title {
            font-size: 1.8em;
            color: #343a40;
            cursor: pointer;
            margin-top: 20px;
            position: relative;
        }
        .section-title::before {
            content: 'â–¶';
            margin-right: 10px;
            font-size: 0.8em;
            transition: transform 0.2s;
        }
        .section-title.open::before {
            transform: rotate(90deg);
        }
        .section-description {
            font-style: italic;
            color: var(--secondary-color);
            margin-bottom: 20px;
            border-left: 3px solid var(--card-border);
            padding-left: 15px;
        }
        .section-content {
            display: none;
            padding-left: 20px;
        }
        .section-content.open {
            display: block;
        }
        .prompt-card {
            background-color: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
            transition: box-shadow 0.2s;
        }
        .prompt-card:hover {
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
        }
        .prompt-card h4 {
            margin-top: 0;
            background-color: #e9ecef;
            padding: 5px 10px;
            border-radius: 5px;
            font-family: "SF Mono", "Fira Code", "Fira Mono", "Roboto Mono", monospace;
            display: inline-block;
            color: #c82333;
        }
        .prompt-text {
            background-color: #e9f7ff;
            border-left: 4px solid var(--primary-color);
            padding: 15px;
            margin: 15px 0;
            position: relative;
        }
        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
            opacity: 0.8;
            transition: opacity 0.2s;
        }
        .copy-btn:hover {
            opacity: 1;
        }
        .response-format {
            font-family: "SF Mono", "Fira Code", "Fira Mono", "Roboto Mono", monospace;
            background-color: #f8f9fa;
            padding: 10px;
            border-radius: 5px;
        }
    </style>
</head>
<body>

<div id="sidebar">
    <h2>ðŸ¤– Prompt Library</h2>
    <input type="text" id="search-bar" placeholder="Search prompts...">
    <ul id="nav-links"></ul>
</div>

<div id="main-content">
    <div id="library-container"></div>
</div>

<script>
    // Embedded JSONL data
    const jsonlData = `
{"task_id":"EP01","stage_id":"foundational_scoping","stage_name":"I. Foundational & Scoping Prompts","section_id":"entity_profile","section_name":"Entity Profile","section_description":"This object gathers fundamental identification and contextual data. The purpose of the analysis is paramount, as it dictates the focus and depth required. An analysis for a new bond issuance will concentrate on the company's forward-looking capacity to service the proposed debt, whereas an annual surveillance review will focus on performance relative to previous expectations and covenants.","prompt_text":"Provide the full legal name of the entity being analyzed, its primary ticker symbol (if public), headquarters location, and the ultimate parent entity.","expected_response_format":"JSON object with keys: 'legal_name', 'ticker', 'hq_location', 'ultimate_parent'."}
{"task_id":"EP02","stage_id":"foundational_scoping","stage_name":"I. Foundational & Scoping Prompts","section_id":"entity_profile","section_name":"Entity Profile","section_description":"This object gathers fundamental identification and contextual data. The purpose of the analysis is paramount, as it dictates the focus and depth required. An analysis for a new bond issuance will concentrate on the company's forward-looking capacity to service the proposed debt, whereas an annual surveillance review will focus on performance relative to previous expectations and covenants.","prompt_text":"Clearly state the purpose and scope of this credit analysis. Is it for a new debt issuance, an annual surveillance, a management assessment, or another purpose?","expected_response_format":"Narrative statement defining the specific goal and boundaries of the analysis."}
{"task_id":"AF01","stage_id":"foundational_scoping","stage_name":"I. Foundational & Scoping Prompts","section_id":"analytical_framework_setup","section_name":"Analytical Framework Setup","section_description":"This object establishes the methodological 'rules of engagement.' Credit analysis adheres to structured frameworks published by rating agencies like S&P, Moody's, and Fitch. This selection governs the entire analytical process, from financial adjustments to risk factor weighting.","prompt_text":"Select the primary credit rating agency methodology to be used for this analysis (e.g., S&P Global Ratings, Moody's, Fitch Ratings). Justify the selection.","expected_response_format":"String value (e.g., 'S&P Global Ratings') with a brief narrative justification."}
{"task_id":"AF02","stage_id":"foundational_scoping","stage_name":"I. Foundational & Scoping Prompts","section_id":"analytical_framework_setup","section_name":"Analytical Framework Setup","section_description":"This object establishes the methodological 'rules of engagement.' Credit analysis adheres to structured frameworks published by rating agencies like S&P, Moody's, and Fitch. This selection governs the entire analytical process, from financial adjustments to risk factor weighting.","prompt_text":"Define the time horizon for the analysis, specifying the historical period (e.g., 2022-2024) and the forecast period (e.g., 2025-2027).","expected_response_format":"JSON object with keys: 'historical_period_start', 'historical_period_end', 'forecast_period_start', 'forecast_period_end'."}
{"task_id":"IG01","stage_id":"foundational_scoping","stage_name":"I. Foundational & Scoping Prompts","section_id":"information_gathering","section_name":"Information Gathering","section_description":"This object serves as a structured checklist to ensure all necessary documentation is available before substantive analysis begins. The process mirrors the initial steps taken by rating agencies, who require issuers to provide a comprehensive information package. An analysis conducted with incomplete data, such as missing debt indentures, cannot properly assess structural risks and is inherently flawed.","prompt_text":"Confirm receipt and list the annual and interim financial statements (10-K, 10-Q, or equivalents) for the defined historical period.","expected_response_format":"Boolean confirmation with a list of documents received."}
{"task_id":"IG02","stage_id":"foundational_scoping","stage_name":"I. Foundational & Scoping Prompts","section_id":"information_gathering","section_name":"Information Gathering","section_description":"This object serves as a structured checklist to ensure all necessary documentation is available before substantive analysis begins. The process mirrors the initial steps taken by rating agencies, who require issuers to provide a comprehensive information package. An analysis conducted with incomplete data, such as missing debt indentures, cannot properly assess structural risks and is inherently flawed.","prompt_text":"Confirm receipt and list key legal and financing documents, including credit agreements, bond indentures, and major lease agreements.","expected_response_format":"Boolean confirmation with a list of documents received."}
{"task_id":"IG03","stage_id":"foundational_scoping","stage_name":"I. Foundational & Scoping Prompts","section_id":"information_gathering","section_name":"Information Gathering","section_description":"This object serves as a structured checklist to ensure all necessary documentation is available before substantive analysis begins. The process mirrors the initial steps taken by rating agencies, who require issuers to provide a comprehensive information package. An analysis conducted with incomplete data, such as missing debt indentures, cannot properly assess structural risks and is inherently flawed.","prompt_text":"Confirm receipt and list qualitative documents, such as investor presentations, management discussion and analysis (MD&A), and equity research reports.","expected_response_format":"Boolean confirmation with a list of documents received."}
{"task_id":"SCR01","stage_id":"macro_environment_risk","stage_name":"II. Macro-Environment Risk Assessment","section_id":"sovereign_and_country_risk","section_name":"Sovereign and Country Risk","section_description":"This analysis evaluates the risks stemming from the primary countries where the company operates, generates revenue, and holds assets. For companies with significant foreign currency debt, the sovereign's own foreign currency rating can act as a 'sovereign ceiling,' effectively capping the corporate's rating due to transfer and convertibility risks.","prompt_text":"List the company's key countries of operation, ranked by percentage of revenue, assets, or EBITDA.","expected_response_format":"A list of countries with corresponding percentages for revenue, assets, or EBITDA."}
{"task_id":"SCR02","stage_id":"macro_environment_risk","stage_name":"II. Macro-Environment Risk Assessment","section_id":"sovereign_and_country_risk","section_name":"Sovereign and Country Risk","section_description":"This analysis evaluates the risks stemming from the primary countries where the company operates, generates revenue, and holds assets. For companies with significant foreign currency debt, the sovereign's own foreign currency rating can act as a 'sovereign ceiling,' effectively capping the corporate's rating due to transfer and convertibility risks.","prompt_text":"For the top 3 key countries, assess the economic risk, including real GDP growth trends, inflation, and currency volatility. Provide the sovereign credit rating for each.","expected_response_format":"Narrative analysis supported by macroeconomic data and sovereign ratings."}
{"task_id":"SCR03","stage_id":"macro_environment_risk","stage_name":"II. Macro-Environment Risk Assessment","section_id":"sovereign_and_country_risk","section_name":"Sovereign and Country Risk","section_description":"This analysis evaluates the risks stemming from the primary countries where the company operates, generates revenue, and holds assets. For companies with significant foreign currency debt, the sovereign's own foreign currency rating can act as a 'sovereign ceiling,' effectively capping the corporate's rating due to transfer and convertibility risks.","prompt_text":"For the top 3 key countries, assess the political and institutional risk, including political stability, rule of law, and institutional effectiveness.","expected_response_format":"Qualitative narrative assessment."}
{"task_id":"SCR04","stage_id":"macro_environment_risk","stage_name":"II. Macro-Environment Risk Assessment","section_id":"sovereign_and_country_risk","section_name":"Sovereign and Country Risk","section_description":"This analysis evaluates the risks stemming from the primary countries where the company operates, generates revenue, and holds assets. For companies with significant foreign currency debt, the sovereign's own foreign currency rating can act as a 'sovereign ceiling,' effectively capping the corporate's rating due to transfer and convertibility risks.","prompt_text":"Assess the risk of a 'sovereign ceiling' impacting the company's rating due to transfer and convertibility (T&C) risk. Does the company have significant foreign currency debt issued from a country with a low sovereign rating?","expected_response_format":"Narrative assessment concluding with a statement on the level of sovereign ceiling risk (e.g., Low, Moderate, High)."}
{"task_id":"IR01","stage_id":"macro_environment_risk","stage_name":"II. Macro-Environment Risk Assessment","section_id":"industry_risk_analysis","section_name":"Industry Risk Analysis","section_description":"This section evaluates the dynamics of the industry in which the company competes. The analysis must identify systemic risks and opportunities that affect all participants, such as cyclicality, competitive intensity, and long-term growth prospects. A critical modern component is the assessment of industry-wide Environmental, Social, and Governance (ESG) risks.","prompt_text":"Define the company's primary industry and any significant sub-industries.","expected_response_format":"String identifying the primary industry (e.g., 'Global Automotive Manufacturing')."}
{"task_id":"IR02","stage_id":"macro_environment_risk","stage_name":"II. Macro-Environment Risk Assessment","section_id":"industry_risk_analysis","section_name":"Industry Risk Analysis","section_description":"This section evaluates the dynamics of the industry in which the company competes. The analysis must identify systemic risks and opportunities that affect all participants, such as cyclicality, competitive intensity, and long-term growth prospects. A critical modern component is the assessment of industry-wide Environmental, Social, and Governance (ESG) risks.","prompt_text":"Analyze the industry's cyclicality, competitive intensity, and barriers to entry. How do these factors influence profitability and risk for participants?","expected_response_format":"Narrative analysis covering cyclicality, competition, and barriers to entry."}
{"task_id":"IR03","stage_id":"macro_environment_risk","stage_name":"II. Macro-Environment Risk Assessment","section_id":"industry_risk_analysis","section_name":"Industry Risk Analysis","section_description":"This section evaluates the dynamics of the industry in which the company competes. The analysis must identify systemic risks and opportunities that affect all participants, such as cyclicality, competitive intensity, and long-term growth prospects. A critical modern component is the assessment of industry-wide Environmental, Social, and Governance (ESG) risks.","prompt_text":"Assess the industry's long-term growth prospects and key drivers. Is the industry mature, in decline, or experiencing high growth? What are the primary demand drivers?","expected_response_format":"Narrative analysis supported by industry growth data."}
{"task_id":"IR04","stage_id":"macro_environment_risk","stage_name":"II. Macro-Environment Risk Assessment","section_id":"industry_risk_analysis","section_name":"Industry Risk Analysis","section_description":"This section evaluates the dynamics of the industry in which the company competes. The analysis must identify systemic risks and opportunities that affect all participants, such as cyclicality, competitive intensity, and long-term growth prospects. A critical modern component is the assessment of industry-wide Environmental, Social, and Governance (ESG) risks.","prompt_text":"Identify the top 3 systemic ESG-related risks and opportunities for this industry (e.g., carbon transition, water scarcity, data privacy, supply chain labor standards). Explain how these factors could impact the industry's long-term risk profile and profitability.","expected_response_format":"Narrative identifying and explaining the impact of key industry-level ESG factors."}
{"task_id":"IR05","stage_id":"macro_environment_risk","stage_name":"II. Macro-Environment Risk Assessment","section_id":"industry_risk_analysis","section_name":"Industry Risk Analysis","section_description":"This section evaluates the dynamics of the industry in which the company competes. The analysis must identify systemic risks and opportunities that affect all participants, such as cyclicality, competitive intensity, and long-term growth prospects. A critical modern component is the assessment of industry-wide Environmental, Social, and Governance (ESG) risks.","prompt_text":"Synthesize the country and industry risk assessments to determine a combined Corporate Industry and Country Risk Assessment (CICRA) score, following the selected rating agency's methodology. Justify how the interaction between country and industry factors exacerbates or mitigates overall risk.","expected_response_format":"A single risk score (e.g., 1-Very Low Risk to 6-Very High Risk) with a detailed justification narrative.[11]"}
{"task_id":"CP01","stage_id":"business_risk_profile","stage_name":"III. Business Risk Profile Assessment","section_id":"competitive_position","section_name":"Competitive Position","section_description":"This evaluates the company's market standing and the sustainability of its competitive advantages. A dominant market share, protected by high barriers to entry, is a significant credit strength. Conversely, high customer or geographic concentration is a key vulnerability.","prompt_text":"Assess the company's market share and competitive rank in its primary product lines and geographic markets. Is its position strengthening, stable, or eroding over time? Provide supporting data.","expected_response_format":"Narrative analysis with market share data and trends."}
{"task_id":"CP02","stage_id":"business_risk_profile","stage_name":"III. Business Risk Profile Assessment","section_id":"competitive_position","section_name":"Competitive Position","section_description":"This evaluates the company's market standing and the sustainability of its competitive advantages. A dominant market share, protected by high barriers to entry, is a significant credit strength. Conversely, high customer or geographic concentration is a key vulnerability.","prompt_text":"Analyze the company's diversification across products/services, geographies, and customers. Is there significant concentration risk in any of these areas? Quantify where possible (e.g., '% of revenue from top customer').","expected_response_format":"Narrative analysis with supporting diversification metrics."}
{"task_id":"CP03","stage_id":"business_risk_profile","stage_name":"III. Business Risk Profile Assessment","section_id":"competitive_position","section_name":"Competitive Position","section_description":"This evaluates the company's market standing and the sustainability of its competitive advantages. A dominant market share, protected by high barriers to entry, is a significant credit strength. Conversely, high customer or geographic concentration is a key vulnerability.","prompt_text":"Identify and evaluate the company's key competitive advantages (e.g., brand strength, proprietary technology, cost leadership, network effects, barriers to entry). How durable are these advantages?","expected_response_format":"Qualitative assessment of competitive advantages with justification."}
{"task_id":"OEP01","stage_id":"business_risk_profile","stage_name":"III. Business Risk Profile Assessment","section_id":"operational_efficiency_and_profitability","section_name":"Operational Efficiency and Profitability","section_description":"This examines the company's ability to generate profits and cash flow. A crucial distinction is made between the absolute level of profitability and its volatility. Two companies may have the same average EBITDA margin over a five-year period, but the one with lower margin volatility is considered a better credit risk because its cash flows are more predictable and reliable for servicing debt through an economic cycle.","prompt_text":"Analyze the historical trend and level of the company's key profitability metrics (e.g., EBITDA margin, EBIT margin) over the defined historical period.","expected_response_format":"Narrative analysis supported by a table of historical profitability ratios."}
{"task_id":"OEP02","stage_id":"business_risk_profile","stage_name":"III. Business Risk Profile Assessment","section_id":"operational_efficiency_and_profitability","section_name":"Operational Efficiency and Profitability","section_description":"This examines the company's ability to generate profits and cash flow. A crucial distinction is made between the absolute level of profitability and its volatility. Two companies may have the same average EBITDA margin over a five-year period, but the one with lower margin volatility is considered a better credit risk because its cash flows are more predictable and reliable for servicing debt through an economic cycle.","prompt_text":"Assess the volatility of the company's profitability. Calculate the standard deviation or coefficient of variation of the EBITDA margin over the historical period and compare it to peers.","expected_response_format":"A quantitative measure of volatility with a narrative explaining its credit implications."}
{"task_id":"OEP03","stage_id":"business_risk_profile","stage_name":"III. Business Risk Profile Assessment","section_id":"operational_efficiency_and_profitability","section_name":"Operational Efficiency and Profitability","section_description":"This examines the company's ability to generate profits and cash flow. A crucial distinction is made between the absolute level of profitability and its volatility. Two companies may have the same average EBITDA margin over a five-year period, but the one with lower margin volatility is considered a better credit risk because its cash flows are more predictable and reliable for servicing debt through an economic cycle.","prompt_text":"Evaluate the company's cost structure and operating efficiency. Is there evidence of a durable cost advantage? How does its efficiency compare to peers?","expected_response_format":"Qualitative assessment of the cost structure with supporting evidence."}
{"task_id":"MG01","stage_id":"business_risk_profile","stage_name":"III. Business Risk Profile Assessment","section_id":"management_and_governance","section_name":"Management and Governance","section_description":"This qualitative assessment evaluates the competence, strategy, and risk appetite of the management team, as well as the robustness of corporate governance structures. Management's financial policy is a critical indicator of future financial risk and demonstrates the link between business strategy and balance sheet management. Weak governance or a history of poor strategic execution are significant credit concerns.","prompt_text":"Evaluate management's strategic competence and operational track record. Has management successfully executed on past strategic initiatives?","expected_response_format":"Narrative assessment of management's strategy and historical performance."}
{"task_id":"MG02","stage_id":"business_risk_profile","stage_name":"III. Business Risk Profile Assessment","section_id":"management_and_governance","section_name":"Management and Governance","section_description":"This qualitative assessment evaluates the competence, strategy, and risk appetite of the management team, as well as the robustness of corporate governance structures. Management's financial policy is a critical indicator of future financial risk and demonstrates the link between business strategy and balance sheet management. Weak governance or a history of poor strategic execution are significant credit concerns.","prompt_text":"Assess management's risk appetite and financial policy. Is the financial policy viewed as conservative, moderate, or aggressive? Are shareholder returns consistently prioritized over creditor interests?","expected_response_format":"Narrative assessment of financial policy, concluding with a characterization (e.g., 'Aggressive')."}
{"task_id":"MG03","stage_id":"business_risk_profile","stage_name":"III. Business Risk Profile Assessment","section_id":"management_and_governance","section_name":"Management and Governance","section_description":"This qualitative assessment evaluates the competence, strategy, and risk appetite of the management team, as well as the robustness of corporate governance structures. Management's financial policy is a critical indicator of future financial risk and demonstrates the link between business strategy and balance sheet management. Weak governance or a history of poor strategic execution are significant credit concerns.","prompt_text":"Evaluate the quality and robustness of corporate governance. Consider board independence, transparency of financial reporting, and any history of related-party transactions or regulatory issues.","expected_response_format":"Qualitative assessment of governance structures and practices."}
{"task_id":"GOS01","stage_id":"business_risk_profile","stage_name":"III. Business Risk Profile Assessment","section_id":"group_and_ownership_structure","section_name":"Group and Ownership Structure","section_description":"This analysis considers the influence of the company's parent or controlling shareholders. A subsidiary's rating can be positively influenced by a strong parent or negatively impacted by a weak parent that may extract resources. The analysis must consider specific methodologies for group structures and government-related entities (GREs).","prompt_text":"Identify the company's parent entity or key controlling shareholders. Describe the ownership structure.","expected_response_format":"Narrative description of the ownership structure."}
{"task_id":"GOS02","stage_id":"business_risk_profile","stage_name":"III. Business Risk Profile Assessment","section_id":"group_and_ownership_structure","section_name":"Group and Ownership Structure","section_description":"This analysis considers the influence of the company's parent or controlling shareholders. A subsidiary's rating can be positively influenced by a strong parent or negatively impacted by a weak parent that may extract resources. The analysis must consider specific methodologies for group structures and government-related entities (GREs).","prompt_text":"Assess the potential for positive or negative intervention from the parent/controlling shareholder. Consider the parent's credit quality, strategic importance of the subsidiary, and any history of support or resource extraction.","expected_response_format":"Narrative assessment concluding on the likely direction and strength of group influence."}
{"task_id":"GOS03","stage_id":"business_risk_profile","stage_name":"III. Business Risk Profile Assessment","section_id":"group_and_ownership_structure","section_name":"Group and Ownership Structure","section_description":"This analysis considers the influence of the company's parent or controlling shareholders. A subsidiary's rating can be positively influenced by a strong parent or negatively impacted by a weak parent that may extract resources. The analysis must consider specific methodologies for group structures and government-related entities (GREs).","prompt_text":"If the company is a Government-Related Entity (GRE), assess the likelihood of extraordinary government support based on the relevant rating agency methodology.","expected_response_format":"Narrative analysis applying the GRE framework, concluding on the likelihood of support."}
{"task_id":"FSA01","stage_id":"financial_risk_profile","stage_name":"IV. Financial Risk Profile Assessment","section_id":"financial_statement_adjustments","section_name":"Financial Statement Adjustments","section_description":"This is the most critical step in quantitative analysis. Standard adjustments for items like operating leases and pension deficits create an analytically 'clean' set of financials that provide a more accurate picture of a company's leverage and obligations.","prompt_text":"Calculate the present value of operating lease commitments and add the result to reported debt to arrive at lease-adjusted debt. Add lease-related interest back to reported EBITDA.","expected_response_format":"Table showing reported debt, lease adjustment, and lease-adjusted debt. Separate calculation for adjusted EBITDA."}
{"task_id":"FSA02","stage_id":"financial_risk_profile","stage_name":"IV. Financial Risk Profile Assessment","section_id":"financial_statement_adjustments","section_name":"Financial Statement Adjustments","section_description":"This is the most critical step in quantitative analysis. Standard adjustments for items like operating leases and pension deficits create an analytically 'clean' set of financials that provide a more accurate picture of a company's leverage and obligations.","prompt_text":"Calculate the after-tax pension and Other Post-Employment Benefit (OPEB) deficits and add them to reported debt.","expected_response_format":"Table showing reported debt, pension/OPEB adjustment, and resulting adjusted debt."}
{"task_id":"FSA03","stage_id":"financial_risk_profile","stage_name":"IV. Financial Risk Profile Assessment","section_id":"financial_statement_adjustments","section_name":"Financial Statement Adjustments","section_description":"This is the most critical step in quantitative analysis. Standard adjustments for items like operating leases and pension deficits create an analytically 'clean' set of financials that provide a more accurate picture of a company's leverage and obligations.","prompt_text":"Identify and quantify any material non-recurring items (e.g., restructuring costs, asset sale gains) from the historical period. Adjust reported EBITDA to reflect a normalized, ongoing earnings capacity.","expected_response_format":"Table listing non-recurring items and their impact on reported EBITDA to arrive at adjusted EBITDA."}
{"task_id":"HFA01","stage_id":"financial_risk_profile","stage_name":"IV. Financial Risk Profile Assessment","section_id":"historical_financial_analysis","section_name":"Historical Financial Analysis","section_description":"This involves calculating and interpreting key credit ratios over the historical period using the adjusted financial figures. The focus is on leverage, coverage, and cash flow metrics, which are central to assessing debt repayment capacity.","prompt_text":"Using the fully adjusted financials, calculate key leverage ratios (e.g., Adjusted Debt / Adjusted EBITDA, Adjusted FFO / Adjusted Debt) for the defined historical period.","expected_response_format":"Table of historical leverage ratios."}
{"task_id":"HFA02","stage_id":"financial_risk_profile","stage_name":"IV. Financial Risk Profile Assessment","section_id":"historical_financial_analysis","section_name":"Historical Financial Analysis","section_description":"This involves calculating and interpreting key credit ratios over the historical period using the adjusted financial figures. The focus is on leverage, coverage, and cash flow metrics, which are central to assessing debt repayment capacity.","prompt_text":"Using the fully adjusted financials, calculate key coverage ratios (e.g., Adjusted EBITDA / Adjusted Interest Expense) for the defined historical period.","expected_response_format":"Table of historical coverage ratios."}
{"task_id":"HFA03","stage_id":"financial_risk_profile","stage_name":"IV. Financial Risk Profile Assessment","section_id":"historical_financial_analysis","section_name":"Historical Financial Analysis","section_description":"This involves calculating and interpreting key credit ratios over the historical period using the adjusted financial figures. The focus is on leverage, coverage, and cash flow metrics, which are central to assessing debt repayment capacity.","prompt_text":"Analyze the historical trends in the calculated credit ratios. Explain the key drivers of any significant improvement or deterioration.","expected_response_format":"Narrative analysis explaining the trends observed in the historical credit metrics."}
{"task_id":"CFA01","stage_id":"financial_risk_profile","stage_name":"IV. Financial Risk Profile Assessment","section_id":"cash_flow_analysis","section_name":"Cash Flow Analysis","section_description":"A deeper dive into the composition, quality, and sustainability of a company's cash flow, which is often considered the single most important consideration in credit analysis. This includes analyzing working capital trends and the cash conversion cycle.","prompt_text":"Analyze the quality and composition of Cash Flow from Operations (CFO). How much is driven by non-cash charges versus core earnings? Is it volatile?","expected_response_format":"Narrative analysis of CFO quality and stability."}
{"task_id":"CFA02","stage_id":"financial_risk_profile","stage_name":"IV. Financial Risk Profile Assessment","section_id":"cash_flow_analysis","section_name":"Cash Flow Analysis","section_description":"A deeper dive into the composition, quality, and sustainability of a company's cash flow, which is often considered the single most important consideration in credit analysis. This includes analyzing working capital trends and the cash conversion cycle.","prompt_text":"Analyze historical working capital trends. Is the company experiencing a consistent cash drain or benefit from working capital changes? What does this imply about operational management?","expected_response_format":"Narrative analysis supported by a table of historical working capital movements."}
{"task_id":"CFA03","stage_id":"financial_risk_profile","stage_name":"IV. Financial Risk Profile Assessment","section_id":"cash_flow_analysis","section_name":"Cash Flow Analysis","section_description":"A deeper dive into the composition, quality, and sustainability of a company's cash flow, which is often considered the single most important consideration in credit analysis. This includes analyzing working capital trends and the cash conversion cycle.","prompt_text":"Calculate historical Free Operating Cash Flow (FOCF) and Discretionary Cash Flow (DCF). Assess the company's ability to generate cash after capital expenditures and dividends.","expected_response_format":"Table showing historical calculation of FOCF and DCF with a narrative assessment."}
{"task_id":"FFS01","stage_id":"financial_risk_profile","stage_name":"IV. Financial Risk Profile Assessment","section_id":"financial_forecasting_and_stress_testing","section_name":"Financial Forecasting and Stress Testing","section_description":"Credit ratings are inherently forward-looking opinions. This section moves from historical analysis to projecting future performance. A critical concept here is the development of a 'rating case' forecast. This is distinct from a company's often-optimistic 'management case.' The rating case incorporates more conservative assumptions about growth and profitability to assess debt service capacity 'through the cycle'.","prompt_text":"Develop a 'rating case' financial forecast for the defined forecast period. Clearly state the key assumptions for revenue growth, profitability margins, and capital expenditures. These assumptions should be more conservative than management's public guidance.","expected_response_format":"A full projected financial statement model (IS, BS, CF) with a separate table listing and justifying key assumptions."}
{"task_id":"FFS02","stage_id":"financial_risk_profile","stage_name":"IV. Financial Risk Profile Assessment","section_id":"financial_forecasting_and_stress_testing","section_name":"Financial Forecasting and Stress Testing","section_description":"Credit ratings are inherently forward-looking opinions. This section moves from historical analysis to projecting future performance. A critical concept here is the development of a 'rating case' forecast. This is distinct from a company's often-optimistic 'management case.' The rating case incorporates more conservative assumptions about growth and profitability to assess debt service capacity 'through the cycle'.","prompt_text":"Define and apply a 'downside stress test' scenario to the rating case forecast. This should model a plausible negative event (e.g., recession, sharp input cost increase). State the stress assumptions clearly.","expected_response_format":"A second set of projected financial statements under the stress scenario, with assumptions clearly defined."}
{"task_id":"FFS03","stage_id":"financial_risk_profile","stage_name":"IV. Financial Risk Profile Assessment","section_id":"financial_forecasting_and_stress_testing","section_name":"Financial Forecasting and Stress Testing","section_description":"Credit ratings are inherently forward-looking opinions. This section moves from historical analysis to projecting future performance. A critical concept here is the development of a 'rating case' forecast. This is distinct from a company's often-optimistic 'management case.' The rating case incorporates more conservative assumptions about growth and profitability to assess debt service capacity 'through the cycle'.","prompt_text":"Analyze the trajectory of key credit metrics (leverage, coverage) under both the rating case and the downside stress test. How resilient is the company's financial profile?","expected_response_format":"Table comparing projected credit metrics under both scenarios, with a narrative discussing financial resilience."}
{"task_id":"FFL01","stage_id":"financial_risk_profile","stage_name":"IV. Financial Risk Profile Assessment","section_id":"financial_flexibility_and_liquidity","section_name":"Financial Flexibility and Liquidity","section_description":"This assesses the company's ability to meet near-term obligations and manage unexpected cash shortfalls. It involves analyzing the debt maturity profile, available liquidity sources, and covenant headroom under credit facilities. A potential covenant breach is a significant credit event that can trigger defaults.","prompt_text":"Analyze the company's near-term liquidity position. Calculate sources (cash, FFO, available credit lines) versus uses (short-term debt, working capital needs, capex, dividends) over the next 12-24 months.","expected_response_format":"A sources and uses of liquidity table with a concluding statement on the adequacy of the liquidity position (e.g., Strong, Adequate, Weak)."}
{"task_id":"FFL02","stage_id":"financial_risk_profile","stage_name":"IV. Financial Risk Profile Assessment","section_id":"financial_flexibility_and_liquidity","section_name":"Financial Flexibility and Liquidity","section_description":"This assesses the company's ability to meet near-term obligations and manage unexpected cash shortfalls. It involves analyzing the debt maturity profile, available liquidity sources, and covenant headroom under credit facilities. A potential covenant breach is a significant credit event that can trigger defaults.","prompt_text":"Provide a schedule of the company's debt maturities for the next 5 years and beyond. Are there any large, upcoming maturity towers that pose a refinancing risk?","expected_response_format":"A table of debt maturities by year, with a narrative assessment of refinancing risk."}
{"task_id":"FFL03","stage_id":"financial_risk_profile","stage_name":"IV. Financial Risk Profile Assessment","section_id":"financial_flexibility_and_liquidity","section_name":"Financial Flexibility and Liquidity","description":"This assesses the company's ability to meet near-term obligations and manage unexpected cash shortfalls. It involves analyzing the debt maturity profile, available liquidity sources, and covenant headroom under credit facilities. A potential covenant breach is a significant credit event that can trigger defaults.","prompt_text":"Identify the key financial covenants in the company's main credit facilities. Calculate the current and projected covenant headroom under the rating case and stress case forecasts.","expected_response_format":"Table listing key covenants, their required levels, and the calculated headroom (in %) under both forecast scenarios."}
{"task_id":"PA01","stage_id":"synthesis_rating_reporting","stage_name":"V. Synthesis, Rating, and Reporting","section_id":"peer_analysis","section_name":"Peer Analysis","section_description":"A company's credit metrics are only meaningful when placed in the context of its peers. This systematic comparison helps to normalize for industry-specific characteristics and highlights areas of relative strength or weakness.","prompt_text":"Identify a group of 3-5 publicly rated peer companies. Justify their selection based on business mix, scale, and geography.","expected_response_format":"List of peer companies with their credit ratings and a brief justification for their inclusion."}
{"task_id":"PA02","stage_id":"synthesis_rating_reporting","stage_name":"V. Synthesis, Rating, and Reporting","section_id":"peer_analysis","section_name":"Peer Analysis","section_description":"A company's credit metrics are only meaningful when placed in the context of its peers. This systematic comparison helps to normalize for industry-specific characteristics and highlights areas of relative strength or weakness.","prompt_text":"Create a table comparing the subject company's business risk profile (market position, diversification, profitability) against the selected peers.","expected_response_format":"Table with qualitative comparisons (e.g., 'Stronger', 'In-line', 'Weaker') for key business risk factors across the peer group."}
{"task_id":"PA03","stage_id":"synthesis_rating_reporting","stage_name":"V. Synthesis, Rating, and Reporting","section_id":"peer_analysis","section_name":"Peer Analysis","section_description":"A company's credit metrics are only meaningful when placed in the context of its peers. This systematic comparison helps to normalize for industry-specific characteristics and highlights areas of relative strength or weakness.","prompt_text":"Create a table comparing the subject company's key historical and projected financial metrics (leverage, coverage) against the selected peers.","expected_response_format":"Table with quantitative credit metrics for the subject company and its peers."}
{"task_id":"RPS01","stage_id":"synthesis_rating_reporting","stage_name":"V. Synthesis, Rating, and Reporting","section_id":"risk_profile_synthesis","section_name":"Risk Profile Synthesis","section_description":"This is where the two main pillars of the analysisâ€”Business Risk and Financial Riskâ€”are formally combined to derive an initial, or 'anchor,' credit assessment.","prompt_text":"Based on the preceding analysis (competitive position, diversification, profitability), synthesize and assign a single Business Risk Profile assessment (e.g., Excellent, Strong, Satisfactory, Fair, Weak, Vulnerable). Justify the assessment.","expected_response_format":"A single adjectival score with a detailed justification narrative."}
{"task_id":"RPS02","stage_id":"synthesis_rating_reporting","stage_name":"V. Synthesis, Rating, and Reporting","section_id":"risk_profile_synthesis","section_name":"Risk Profile Synthesis","section_description":"This is where the two main pillars of the analysisâ€”Business Risk and Financial Riskâ€”are formally combined to derive an initial, or 'anchor,' credit assessment.","prompt_text":"Based on the preceding analysis (historical and projected financial metrics), synthesize and assign a single Financial Risk Profile assessment (e.g., Minimal, Modest, Intermediate, Significant, Aggressive, Highly Leveraged). Justify the assessment.","expected_response_format":"A single adjectival score with a detailed justification narrative."}
{"task_id":"RPS03","stage_id":"synthesis_rating_reporting","stage_name":"V. Synthesis, Rating, and Reporting","section_id":"risk_profile_synthesis","section_name":"Risk Profile Synthesis","section_description":"This is where the two main pillars of the analysisâ€”Business Risk and Financial Riskâ€”are formally combined to derive an initial, or 'anchor,' credit assessment.","prompt_text":"Using the selected rating agency's Business Risk / Financial Risk matrix, combine the two profile assessments to determine the 'anchor' credit rating.","expected_response_format":"A single rating category (e.g., 'bbb', 'bb+') derived from the matrix."}
{"task_id":"MFN01","stage_id":"synthesis_rating_reporting","stage_name":"V. Synthesis, Rating, and Reporting","section_id":"modifying_factors_and_notching","section_name":"Modifying Factors and Notching","section_description":"The anchor rating is adjusted for other material factors. A particularly strong or weak liquidity profile can warrant an adjustment. For specific debt instruments, recovery analysis determines whether the instrument rating should be at, above, or below the issuer's overall credit rating based on its security and seniority in the capital structure.","prompt_text":"Assess the company's liquidity profile as a potential modifying factor. Does the liquidity position (Strong, Adequate, Weak) warrant a notch up or down from the anchor rating?","expected_response_format":"Narrative assessment concluding with a notching decision (e.g., '+1 notch', 'no adjustment', '-1 notch')."}
{"task_id":"MFN02","stage_id":"synthesis_rating_reporting","stage_name":"V. Synthesis, Rating, and Reporting","section_id":"modifying_factors_and_notching","section_name":"Modifying Factors and Notching","section_description":"The anchor rating is adjusted for other material factors. A particularly strong or weak liquidity profile can warrant an adjustment. For specific debt instruments, recovery analysis determines whether the instrument rating should be at, above, or below the issuer's overall credit rating based on its security and seniority in the capital structure.","prompt_text":"Assess other potential modifiers, such as financial policy, governance, or group support. Justify any further notching adjustments to the anchor rating.","expected_response_format":"Narrative assessment of any other modifiers and their impact on the rating."}
{"task_id":"MFN03","stage_id":"synthesis_rating_reporting","stage_name":"V. Synthesis, Rating, and Reporting","section_id":"modifying_factors_and_notching","section_name":"Modifying Factors and Notching","section_description":"The anchor rating is adjusted for other material factors. A particularly strong or weak liquidity profile can warrant an adjustment. For specific debt instruments, recovery analysis determines whether the instrument rating should be at, above, or below the issuer's overall credit rating based on its security and seniority in the capital structure.","prompt_text":"For a specific debt instrument, conduct a recovery analysis to determine if its rating should be notched up or down from the final Issuer Credit Rating based on its collateral and seniority.","expected_response_format":"A recovery rating (e.g., '1+', '3', '5') and a corresponding instrument rating."}
{"task_id":"RR01","stage_id":"synthesis_rating_reporting","stage_name":"V. Synthesis, Rating, and Reporting","section_id":"rating_recommendation","section_name":"Rating Recommendation","section_description":"This is the final, actionable output. It includes the recommended rating, a forward-looking outlook, and a concise rationale. The outlook (Stable, Positive, Negative) is a critical component, communicating the likely direction of the rating over the next 12-24 months and is based on the potential for identified risks or opportunities to materialize.","prompt_text":"State the final recommended Issuer Credit Rating (ICR) after all adjustments.","expected_response_format":"A final credit rating (e.g., 'BBB-')."}
{"task_id":"RR02","stage_id":"synthesis_rating_reporting","stage_name":"V. Synthesis, Rating, and Reporting","section_id":"rating_recommendation","section_name":"Rating Recommendation","section_description":"This is the final, actionable output. It includes the recommended rating, a forward-looking outlook, and a concise rationale. The outlook (Stable, Positive, Negative) is a critical component, communicating the likely direction of the rating over the next 12-24 months and is based on the potential for identified risks or opportunities to materialize.","prompt_text":"Assign a rating outlook (e.g., Stable, Positive, Negative, Developing). Justify the outlook based on the potential for specific risks or opportunities to materialize over the next 12-24 months.","expected_response_format":"A rating outlook with a brief justification."}
{"task_id":"RR03","stage_id":"synthesis_rating_reporting","stage_name":"V. Synthesis, Rating, and Reporting","section_id":"rating_recommendation","section_name":"Rating Recommendation","section_description":"This is the final, actionable output. It includes the recommended rating, a forward-looking outlook, and a concise rationale. The outlook (Stable, Positive, Negative) is a critical component, communicating the likely direction of the rating over the next 12-24 months and is based on the potential for identified risks or opportunities to materialize.","prompt_text":"Write a concise rating rationale (2-3 paragraphs) summarizing the key credit strengths and weaknesses that support the final rating and outlook.","expected_response_format":"A well-structured narrative summarizing the core credit story."}
{"task_id":"CRG01","stage_id":"synthesis_rating_reporting","stage_name":"V. Synthesis, Rating, and Reporting","section_id":"credit_report_generation","section_name":"Credit Report Generation","section_description":"This final object provides prompts to assemble the full narrative report from the preceding analytical components, ensuring a professional and comprehensive final deliverable consistent with industry standards.","prompt_text":"Assemble an executive summary that includes the final rating recommendation, outlook, and a high-level overview of the business and financial risk profiles and key credit considerations.","expected_response_format":"A 1-page executive summary narrative."}
{"task_id":"CRG02","stage_id":"synthesis_rating_reporting","stage_name":"V. Synthesis, Rating, and Reporting","section_id":"credit_report_generation","section_name":"Credit Report Generation","section_description":"This final object provides prompts to assemble the full narrative report from the preceding analytical components, ensuring a professional and comprehensive final deliverable consistent with industry standards.","prompt_text":"Compile the full, detailed credit report by sequencing the narrative outputs from all preceding analytical sections in a logical, professional format.","expected_response_format":"A single, comprehensive document containing the full analysis."}
{"task_id":"SYS01","stage_id":"meta_instructions_and_tooling","stage_name":"VI. Meta-Instructions & Tooling","section_id":"system_behavior","section_name":"System Behavior","section_description":"Defines the LLM's core operational parameters, persona, and versioning for the task.","prompt_text":"Adopt the persona of a senior credit analyst with 15 years of experience at a major rating agency. All subsequent responses should be formal, data-driven, and reference established credit methodologies.","expected_response_format":"Confirmation of persona adoption, e.g., 'Persona adopted. Ready to proceed with analysis.'"}
{"task_id":"SYS02","stage_id":"meta_instructions_and_tooling","stage_name":"VI. Meta-Instructions & Tooling","section_id":"system_behavior","section_name":"System Behavior","section_description":"Defines the LLM's core operational parameters, persona, and versioning for the task.","prompt_text":"Set the master version for this entire analysis session to v1.0. All generated artifacts, data, and reports should be tagged with this version.","expected_response_format":"Confirmation of version initialization, e.g., 'Analysis session v1.0 initialized.'"}
{"task_id":"SYS03","stage_id":"meta_instructions_and_tooling","stage_name":"VI. Meta-Instructions & Tooling","section_id":"system_behavior","section_name":"System Behavior","section_description":"Defines the LLM's core operational parameters, persona, and versioning for the task.","prompt_text":"Generate a configuration file in YAML format for a new data processing job. The configuration should include 'source_bucket', 'destination_table', 'job_name', and a list of 'data_quality_checks' such as 'not_null' and 'unique_values'.","expected_response_format":"A code block containing a valid YAML configuration file."}
{"task_id":"RAG01","stage_id":"meta_instructions_and_tooling","stage_name":"VI. Meta-Instructions & Tooling","section_id":"knowledge_integration","section_name":"Knowledge Integration (RAG)","section_description":"Controls how the model interacts with and synthesizes information from external knowledge sources.","prompt_text":"For the next prompt, exclusively use the following documents from the knowledge base as your context for Retrieval-Augmented Generation (RAG): [list of document IDs, e.g., 'doc_10K_2024.pdf', 'doc_credit_agreement_2023.pdf']. Do not use general knowledge.","expected_response_format":"Confirmation of RAG source configuration, e.g., 'RAG context locked to provided documents.'"}
{"task_id":"KGRAPH01","stage_id":"meta_instructions_and_tooling","stage_name":"VI. Meta-Instructions & Tooling","section_id":"knowledge_integration","section_name":"Knowledge Graph & Ontology","section_description":"Controls how the model interacts with and synthesizes information from external knowledge sources.","prompt_text":"Based on the 'entity_profile' and 'group_and_ownership_structure' sections, generate a formal ontology in OWL format defining the relationships between the company, its parent, its subsidiaries, and key executives.","expected_response_format":"A code block containing the ontology in OWL (Web Ontology Language) format."}
{"task_id":"KGRAPH02","stage_id":"meta_instructions_and_tooling","stage_name":"VI. Meta-Instructions & Tooling","section_id":"knowledge_integration","section_name":"Knowledge Graph & Ontology","section_description":"Controls how the model interacts with and synthesizes information from external knowledge sources.","prompt_text":"Populate a knowledge graph using the ontology from KGRAPH01 and the information from the credit report. Represent entities and relationships as Cypher statements for import into a Neo4j database.","expected_response_format":"A code block containing a series of Cypher `CREATE` or `MERGE` statements."}
{"task_id":"DT01","stage_id":"meta_instructions_and_tooling","stage_name":"VI. Meta-Instructions & Tooling","section_id":"analytical_modeling","section_name":"Decision Tree Modeling","section_description":"Prompts for generating and executing structured analytical models like decision trees.","prompt_text":"Generate a decision tree in Python using scikit-learn that models the final rating recommendation. Use the following as features: CICRA score, competitive position assessment, profitability volatility, and projected Debt/EBITDA. The tree should output a rating category.","expected_response_format":"A Python code snippet defining and training a `DecisionTreeClassifier`."}
{"task_id":"CODE01","stage_id":"meta_instructions_and_tooling","stage_name":"VI. Meta-Instructions & Tooling","section_id":"coding_and_automation","section_name":"Coding & Automation","section_description":"Prompts for generating code, scripts, and instructions for development automation tools.","prompt_text":"Write a complete Python script named 'data_validator.py' that takes a CSV file path as a command-line argument. The script must use the pandas library to read the CSV and verify that the 'EBITDA' column contains no negative values. It should print a success or failure message.","expected_response_format":"A complete, executable Python script within a single code block."}
{"task_id":"CODE02","stage_id":"meta_instructions_and_tooling","stage_name":"VI. Meta-Instructions & Tooling","section_id":"coding_and_automation","section_name":"Coding & Automation","section_description":"Prompts for generating code, scripts, and instructions for development automation tools.","prompt_text":"Generate the high-level pseudocode and comments for a Python function that will be completed by a coding copilot. The function, named 'calculate_dscr', should take 'net_operating_income' and 'total_debt_service' as inputs and return the Debt Service Coverage Ratio. Include type hints and a docstring.","expected_response_format":"A Python function stub with detailed comments and pseudocode, ready for a copilot tool to complete."}
{"task_id":"API01","stage_id":"meta_instructions_and_tooling","stage_name":"VI. Meta-Instructions & Tooling","section_id":"external_tooling","section_name":"External Tooling (API & CLI)","section_description":"Prompts for generating commands to interact with external tools like APIs and Command-Line Interfaces.","prompt_text":"Generate a Python script to call an external API at 'https://api.marketdata.com/v1/quotes' to retrieve the latest stock price for the company's ticker. The API key is stored in the environment variable 'MARKET_DATA_API_KEY'.","expected_response_format":"A Python code snippet using the `requests` library to make the specified API call."}
{"task_id":"CLI01","stage_id":"meta_instructions_and_tooling","stage_name":"VI. Meta-Instructions & Tooling","section_id":"external_tooling","section_name":"External Tooling (API & CLI)","section_description":"Prompts for generating commands to interact with external tools like APIs and Command-Line Interfaces.","prompt_text":"Generate the gcloud CLI command to download the latest financial reports for the company from the Google Cloud Storage bucket 'gs://financial-reports-archive/' into the local directory './reports'.","expected_response_format":"A shell command snippet, e.g., `gcloud storage cp gs://financial-reports-archive/COMPANY_TICKER/* ./reports/`"}
{"task_id":"CLI02","stage_id":"meta_instructions_and_tooling","stage_name":"VI. Meta-Instructions & Tooling","section_id":"external_tooling","section_name":"External Tooling (API & CLI)","section_description":"Prompts for generating commands to interact with external tools like APIs and Command-Line Interfaces.","prompt_text":"Generate a single-line terminal command that finds all '.log' files in the '/var/log' directory, searches for lines containing the word 'ERROR', and saves the resulting lines to a file named 'error_summary.txt' in the home directory.","expected_response_format":"A single, complete shell command utilizing pipes, e.g., `grep -r 'ERROR' /var/log/*.log > ~/error_summary.txt`."}
{"task_id":"AGENT01","stage_id":"meta_instructions_and_tooling","stage_name":"VI. Meta-Instructions & Tooling","section_id":"agentic_workflow","section_name":"Agentic Workflow (SDK & MCP)","section_description":"Prompts for defining and executing multi-step, agentic tasks, including coordination between multiple agents.","prompt_text":"Initialize as a research agent. Your primary goal is to complete the 'Macro-Environment Risk Assessment' stage. You have access to the following tools: [web_search, knowledge_base_query]. Acknowledge when the goal is complete.","expected_response_format":"Confirmation of agent initialization and goal understanding."}
{"task_id":"AGENT02","stage_id":"meta_instructions_and_tooling","stage_name":"VI. Meta-Instructions & Tooling","section_id":"agentic_workflow","section_name":"Agentic Workflow (SDK & MCP)","section_description":"Prompts for defining and executing multi-step, agentic tasks, including coordination between multiple agents.","prompt_text":"Decompose the goal 'Complete the Financial Risk Profile Assessment' into a sequence of logical steps using the available prompts (FSA01, HFA01, etc.) and tools [code_interpreter, api_caller].","expected_response_format":"A numbered list of steps or a plan in JSON format."}
{"task_id":"MCP01","stage_id":"meta_instructions_and_tooling","stage_name":"VI. Meta-Instructions & Tooling","section_id":"agentic_workflow","section_name":"Agentic Workflow (SDK & MCP)","section_description":"Prompts for defining and executing multi-step, agentic tasks, including coordination between multiple agents.","prompt_text":"This is a multi-agent task. Define roles for 'AnalystAgent' (executes analysis prompts) and 'ReviewerAgent' (critiques outputs for quality and accuracy). The 'ReviewerAgent' must approve the output of each stage before the 'AnalystAgent' can proceed.","expected_response_format":"A JSON object defining the roles, responsibilities, and interaction protocol for the agents."}
{"task_id":"A2A01","stage_id":"meta_instructions_and_tooling","stage_name":"VI. Meta-Instructions & Tooling","section_id":"agentic_workflow","section_name":"Prompt-to-Prompt / A2A","section_description":"Prompts for defining and executing multi-step, agentic tasks, including coordination between multiple agents.","prompt_text":"Upon completion of the current prompt, analyze its output. If the 'leverage' metric is above 4.0x, the next prompt you must execute is FFL03 (Evaluate Covenant Headroom). Otherwise, the next prompt is PA01 (Select Peer Group). Formulate and output ONLY the JSON for the next prompt to be executed.","expected_response_format":"A single, complete JSONL object representing the next prompt in the dynamic chain."}
{"task_id":"FED01","stage_id":"meta_instructions_and_tooling","stage_name":"VI. Meta-Instructions & Tooling","section_id":"federated_operations","section_name":"Federated Operations","section_description":"Prompts for designing and orchestrating federated learning or federated analytics workflows on decentralized data.","prompt_text":"Design a high-level federated analysis plan to calculate the average leverage ratio across three different, isolated corporate groups (GroupA, GroupB, GroupC) without moving their raw financial data. The plan should specify the local computation on each node and the central aggregation step. Use TensorFlow Federated (TFF) constructs as a reference.","expected_response_format":"A narrative or multi-step plan outlining the federated process, including `tff.federated_computation` and aggregation logic."}
{"task_id":"SIM01","stage_id":"advanced_analytics_and_orchestration","stage_name":"VII. Advanced Analytics & Orchestration","section_id":"simulation_and_stochastic_modeling","section_name":"Simulation & Stochastic Modeling","section_description":"Prompts for creating and running advanced simulations to model uncertainty and complex system dynamics.","prompt_text":"Using the 'rating case' forecast as a baseline, generate a Python script to run a 10,000-iteration Monte Carlo simulation on the company's Free Cash Flow. Assume EBITDA margin and revenue growth are normally distributed with means equal to the baseline forecast and standard deviations derived from historical data. The output should be a histogram of potential cash flow outcomes and the probability of cash flow being negative.","expected_response_format":"A Python script using libraries like NumPy and Matplotlib to perform the Monte Carlo simulation and generate visualizations."}
{"task_id":"SIM02","stage_id":"advanced_analytics_and_orchestration","stage_name":"VII. Advanced Analytics & Orchestration","section_id":"simulation_and_stochastic_modeling","section_name":"Simulation & Stochastic Modeling","section_description":"Prompts for creating and running advanced simulations to model uncertainty and complex system dynamics.","prompt_text":"Generate a causal loop diagram in DOT language (for Graphviz) that models the key feedback loops in the company's business. Include nodes for 'Capital Investment', 'Asset Base', 'Revenue Capacity', 'Profitability', and 'Cash Flow for Reinvestment'. Indicate reinforcing ('R') and balancing ('B') loops.","expected_response_format":"A code block containing a system dynamics model in DOT language."}
{"task_id":"XAI01","stage_id":"advanced_analytics_and_orchestration","stage_name":"VII. Advanced Analytics & Orchestration","section_id":"explainability_and_audit","section_name":"Explainability & Audit (XAI)","section_description":"Prompts for interpreting model behavior, ensuring transparency, and creating audit trails.","prompt_text":"For the decision tree model created in task DT01, generate a Python script using the SHAP (SHapley Additive exPlanations) library to explain the prediction for a specific hypothetical company with high debt and strong profitability. The output should be a SHAP force plot visualizing the feature contributions.","expected_response_format":"A Python script that loads the model, creates a sample data point, and generates a SHAP force plot to explain its prediction."}
{"task_id":"XAI02","stage_id":"advanced_analytics_and_orchestration","stage_name":"VII. Advanced Analytics & Orchestration","section_id":"explainability_and_audit","section_name":"Explainability & Audit (XAI)","section_description":"Prompts for interpreting model behavior, ensuring transparency, and creating audit trails.","prompt_text":"Generate a counterfactual analysis narrative. Based on the final model, determine the minimum improvement in 'Projected Debt/EBITDA' and the minimum change in 'Competitive Position Assessment' that would have been required to achieve a one-notch rating upgrade.","expected_response_format":"A narrative analysis explaining the specific changes in key variables required to alter the outcome."}
{"task_id":"XAI03","stage_id":"advanced_analytics_and_orchestration","stage_name":"VII. Advanced Analytics & Orchestration","section_id":"explainability_and_audit","section_name":"Explainability & Audit (XAI)","section_description":"Prompts for interpreting model behavior, ensuring transparency, and creating audit trails.","prompt_text":"Review the full log of prompts and responses in this session and generate a Markdown summary for an audit trail. The summary must list each major analytical step, the data or documents used, and the resulting conclusion, providing a traceable path from raw data to final rating.","expected_response_format":"A structured Markdown document detailing the analytical process flow for audit purposes."}
{"task_id":"AKS01","stage_id":"advanced_analytics_and_orchestration","stage_name":"VII. Advanced Analytics & Orchestration","section_id":"advanced_knowledge_synthesis","section_name":"Advanced Knowledge Synthesis","section_description":"Prompts for advanced reasoning, hypothesis testing, and synthesis across multiple data types and sources.","prompt_text":"Form a hypothesis based on the initial financial data. Then, generate a multi-step plan to validate or refute this hypothesis. The plan must explicitly state which documents to search (using RAG), which API calls to make, and which calculations to perform. Hypothesis Example: 'The company's declining gross margins are primarily caused by rising input costs rather than pricing pressure.'","expected_response_format":"A JSON object with a 'hypothesis' string and a 'validation_plan' array of steps."}
{"task_id":"AKS02","stage_id":"advanced_analytics_and_orchestration","stage_name":"VII. Advanced Analytics & Orchestration","section_id":"advanced_knowledge_synthesis","section_name":"Advanced Knowledge Synthesis","section_description":"Prompts for advanced reasoning, hypothesis testing, and synthesis across multiple data types and sources.","prompt_text":"Synthesize information from the following multimodal sources to assess the company's brand strength: [Text: MD&A section on market position, Image: Chart of market share from investor deck, Table: Customer satisfaction scores from attached CSV]. Conclude with a qualitative assessment.","expected_response_format":"A narrative synthesis that explicitly references how the text, image, and tabular data collectively support the final conclusion on brand strength."}
{"task_id":"ORC01","stage_id":"advanced_analytics_and_orchestration","stage_name":"VII. Advanced Analytics & Orchestration","section_id":"workflow_orchestration","section_name":"Workflow Orchestration","section_description":"Prompts for automating and orchestrating complex workflows, including defining human-in-the-loop checkpoints.","prompt_text":"Generate a GitHub Actions workflow file (`.github/workflows/analysis.yml`) that triggers on a push to the 'main' branch. The workflow should execute the entire chain of analysis scripts (e.g., `data_validator.py`, `monte_carlo.py`) in sequence.","expected_response_format":"A complete, valid YAML file for a GitHub Actions workflow."}
{"task_id":"ORC02","stage_id":"advanced_analytics_and_orchestration","stage_name":"VII. Advanced Analytics & Orchestration","section_id":"workflow_orchestration","section_name":"Workflow Orchestration","section_description":"Prompts for automating and orchestrating complex workflows, including defining human-in-the-loop checkpoints.","prompt_text":"Define a human-in-the-loop (HITL) checkpoint. After the 'anchor' rating is determined in task RPS03, the workflow must pause. Generate a request for human review containing the anchor rating and the business/financial risk profiles. The agent may only proceed to MFN01 after receiving an explicit 'approved' signal.","expected_response_format":"A JSON object defining the HITL trigger condition, the data payload for the human reviewer, and the required approval signal."}
{"task_id":"DYN01","stage_id":"advanced_analytics_and_orchestration","stage_name":"VII. Advanced Analytics & Orchestration","section_id":"dynamic_reporting_and_communication","section_name":"Dynamic Reporting & Communication","section_description":"Prompts for creating interactive, audience-specific reports and presentations.","prompt_text":"Generate a Python script for an interactive dashboard using Streamlit or Plotly Dash. The dashboard must allow a user to select different stress test scenarios (e.g., 'Recession', 'Input Cost Shock') from a dropdown menu and see the projected leverage and coverage ratios update dynamically in a chart.","expected_response_format":"A complete, executable Python script for an interactive dashboard."}
{"task_id":"DYN02","stage_id":"advanced_analytics_and_orchestration","stage_name":"VII. Advanced Analytics & Orchestration","section_id":"dynamic_reporting_and_communication","section_name":"Dynamic Reporting & Communication","section_description":"Prompts for creating interactive, audience-specific reports and presentations.","prompt_text":"Generate three distinct summaries of the final rating recommendation (RR03): 1) An 'Executive Summary' for the CEO (max 100 words, focuses on strategic implications). 2) A 'Portfolio Manager Briefing' (focuses on risk factors, outlook, and covenant details). 3) A 'Methodology Note' for a junior analyst (explains key adjustments and model choices).","expected_response_format":"A JSON object with three keys ('executive_summary', 'pm_briefing', 'methodology_note'), each containing the tailored narrative."}
{"task_id":"DYN03","stage_id":"advanced_analytics_and_orchestration","stage_name":"VII. Advanced Analytics & Orchestration","section_id":"dynamic_reporting_and_communication","section_name":"Dynamic Reporting & Communication","section_description":"Prompts for creating interactive, audience-specific reports and presentations.","prompt_text":"Generate a JSON structure representing a slide deck for the rating committee presentation. The structure should include keys for 'title', 'presenter', and an array of 'slides'. Each slide object should have a 'title', 'talking_points' (an array of strings), and an optional 'visualization_type' (e.g., 'bar_chart', 'line_chart'). Populate it with the key findings of this analysis.","expected_response_format":"A structured JSON object representing the entire presentation."}
{"task_id":"GOV01","stage_id":"governance_deployment_and_lifecycle","stage_name":"VIII. Model Governance, Deployment & Lifecycle Management","section_id":"model_and_artifact_versioning","section_name":"Model & Artifact Versioning","section_description":"Prompts for managing versions of models, data, and code using integrated version control systems.","prompt_text":"Generate the git commands to create a new branch named 'feature/rating_model_v2', add the serialized decision tree model file ('rating_model.pkl') and the final credit report ('credit_report_v1.pdf') to the branch, commit them with the message 'feat: Add version 2 of rating model and initial report', and push the branch to the remote repository.","expected_response_format":"A sequence of shell commands for git."}
{"task_id":"GOV02","stage_id":"governance_deployment_and_lifecycle","stage_name":"VIII. Model Governance, Deployment & Lifecycle Management","section_id":"model_and_artifact_versioning","section_name":"Model & Artifact Versioning","section_description":"Prompts for managing versions of models, data, and code using integrated version control systems.","prompt_text":"Generate a DVC (Data Version Control) command to start tracking the 'historical_financials.csv' file and associate it with the current git commit, ensuring data-to-code lineage.","expected_response_format":"A shell command snippet for DVC, e.g., `dvc add data/historical_financials.csv`."}
{"task_id":"DEP01","stage_id":"governance_deployment_and_lifecycle","stage_name":"VIII. Model Governance, Deployment & Lifecycle Management","section_id":"deployment_and_cicd","section_name":"Deployment & CI/CD","section_description":"Prompts for automating the deployment of models and analysis pipelines into production or staging environments.","prompt_text":"Generate a Dockerfile to containerize the 'rating_model.pkl' and the API script created in task API01. The container should expose port 8080 and run the API server upon startup. Ensure all necessary Python dependencies from a 'requirements.txt' file are installed.","expected_response_format":"A complete, valid Dockerfile within a code block."}
{"task_id":"DEP02","stage_id":"governance_deployment_and_lifecycle","stage_name":"VIII. Model Governance, Deployment & Lifecycle Management","section_id":"deployment_and_cicd","section_name":"Deployment & CI/CD","section_description":"Prompts for automating the deployment of models and analysis pipelines into production or staging environments.","prompt_text":"Generate a Kubernetes deployment manifest in YAML (`deployment.yaml`) to deploy the container image created from the Dockerfile in DEP01. The deployment should specify 2 replicas and include a liveness probe that checks the API's '/health' endpoint every 30 seconds.","expected_response_format":"A complete, valid Kubernetes deployment YAML file."}
{"task_id":"MON01","stage_id":"governance_deployment_and_lifecycle","stage_name":"VIII. Model Governance, Deployment & Lifecycle Management","section_id":"performance_monitoring_and_alerting","section_name":"Performance Monitoring & Alerting","section_description":"Prompts for setting up real-time monitoring of model performance, data drift, and system health.","prompt_text":"Generate a JSON configuration for a monitoring alert. The alert should trigger if the 95th percentile latency of the rating prediction API exceeds 500ms over a 5-minute window. The alert should be sent to the '#credit-ops-alerts' Slack channel via a webhook URL stored in the 'SLACK_WEBHOOK' environment variable.","expected_response_format":"A JSON object defining the alert conditions and notification channel."}
{"task_id":"MON02","stage_id":"governance_deployment_and_lifecycle","stage_name":"VIII. Model Governance, Deployment & Lifecycle Management","section_id":"performance_monitoring_and_alerting","section_name":"Performance Monitoring & Alerting","section_description":"Prompts for setting up real-time monitoring of model performance, data drift, and system health.","prompt_text":"Design a data drift detection job. Generate the pseudocode for a script that runs daily. The script should calculate the statistical distribution (e.g., mean, standard deviation) of key input features from the live prediction requests over the last 24 hours and compare it to the distribution of the training data using the Kolmogorov-Smirnov test. If the p-value for any feature is below 0.05, it should log a 'Drift Detected' warning.","expected_response_format":"Detailed pseudocode or a Python script outline for the data drift detection job."}
{"task_id":"RET01","stage_id":"governance_deployment_and_lifecycle","stage_name":"VIII. Model Governance, Deployment & Lifecycle Management","section_id":"retraining_and_lifecycle_hooks","section_name":"Retraining & Lifecycle Hooks","section_description":"Prompts for defining automated triggers and policies for model retraining, testing, and promotion.","prompt_text":"Define a model retraining policy. Generate a JSON object that specifies the conditions under which the rating model should be automatically retrained. The policy should include two triggers: 1) A 'time-based' trigger to retrain every 90 days. 2) A 'performance-based' trigger if the model's prediction accuracy on a validation set drops below 85%.","expected_response_format":"A JSON object defining the retraining policy with its triggers."}
{"task_id":"RET02","stage_id":"governance_deployment_and_lifecycle","stage_name":"VIII. Model Governance, Deployment & Lifecycle Management","section_id":"retraining_and_lifecycle_hooks","section_name":"Retraining & Lifecycle Hooks","section_description":"Prompts for defining automated triggers and policies for model retraining, testing, and promotion.","prompt_text":"Generate the configuration for a CI/CD pipeline hook. Upon successful completion of a retraining job, the new candidate model must be automatically benchmarked against the currently deployed production model on a hold-out 'challenger' dataset. The new model can only be promoted to staging if its F1-score is at least 2% higher than the production model's score.","expected_response_format":"A YAML or JSON configuration snippet defining the post-retraining benchmarking and promotion gate."}
{"task_id":"ETH01","stage_id":"governance_deployment_and_lifecycle","stage_name":"VIII. Model Governance, Deployment & Lifecycle Management","section_id":"ethical_and_compliance_guardrails","section_name":"Ethical & Compliance Guardrails","section_description":"Prompts for defining and enforcing ethical guidelines, fairness checks, and regulatory compliance within the AI system.","prompt_text":"Generate a test case in Python to check the rating model for fairness. Using a hypothetical dataset with a 'region' feature, the test should calculate the Demographic Parity Difference for the 'Investment Grade' prediction outcome between the 'North America' and 'Europe' groups. The test fails if the absolute difference is greater than 10%.","expected_response_format":"A Python script or function that implements the specified fairness test."}
{"task_id":"ETH02","stage_id":"governance_deployment_and_lifecycle","stage_name":"VIII. Model Governance, Deployment & Lifecycle Management","section_id":"ethical_and_compliance_guardrails","section_name":"Ethical & Compliance Guardrails","section_description":"Prompts for defining and enforcing ethical guidelines, fairness checks, and regulatory compliance within the AI system.","prompt_text":"Define a compliance guardrail as a JSON policy object. This policy must prevent the agent from executing any prompt that involves processing Personally Identifiable Information (PII) unless the prompt explicitly references a 'compliance_approval_code'. The policy should also specify a regex pattern for detecting common PII like email addresses and phone numbers.","expected_response_format":"A JSON object detailing the PII detection pattern and the compliance check logic."}
{"task_id":"HCI01","stage_id":"human_computer_interaction_and_collaboration","stage_name":"IX. Human-Computer Interaction & Collaboration","section_id":"user_preference_and_adaptation","section_name":"User Preference & Adaptation","section_description":"Prompts for tailoring the AI's behavior, verbosity, and output format to individual user needs and expertise levels.","prompt_text":"Set my user profile to 'Expert'. For all subsequent responses, minimize conversational filler, use dense technical language, and provide outputs directly in their final format (e.g., code, JSON) without narrative explanation unless explicitly requested.","expected_response_format":"Confirmation of user profile change, e.g., 'Expert mode enabled.'"}
{"task_id":"HCI02","stage_id":"human_computer_interaction_and_collaboration","stage_name":"IX. Human-Computer Interaction & Collaboration","section_id":"user_preference_and_adaptation","section_name":"User Preference & Adaptation","section_description":"Prompts for tailoring the AI's behavior, verbosity, and output format to individual user needs and expertise levels.","prompt_text":"I am a novice user. For the next task, 'Explain the results of the Monte Carlo simulation (SIM01)', please use an analogy and avoid statistical jargon like 'standard deviation' or 'p-value'. Focus on the business implications of the potential outcomes.","expected_response_format":"A simplified, analogy-driven narrative explanation of the simulation results."}
{"task_id":"COL01","stage_id":"human_computer_interaction_and_collaboration","stage_name":"IX. Human-Computer Interaction & Collaboration","section_id":"collaborative_workspace_management","section_name":"Collaborative Workspace Management","section_description":"Prompts for managing shared analytical sessions, tracking contributions, and resolving conflicts between multiple users.","prompt_text":"Initialize a new collaborative analysis session for the 'Peer Analysis' stage. Invite users 'analyst_jane@example.com' and 'manager_bob@example.com'. All prompts and outputs within this session should be logged with user attribution.","expected_response_format":"Confirmation of session creation and user invitations, returning a unique session ID."}
{"task_id":"COL02","stage_id":"human_computer_interaction_and_collaboration","stage_name":"IX. Human-Computer Interaction & Collaboration","section_id":"collaborative_workspace_management","section_name":"Collaborative Workspace Management","section_description":"Prompts for managing shared analytical sessions, tracking contributions, and resolving conflicts between multiple users.","prompt_text":"User 'analyst_jane@example.com' has proposed a peer group in task PA01. User 'manager_bob@example.com' has proposed a different peer group. Present a side-by-side comparison of the two proposed peer groups and highlight the key differences in their business mix and financial metrics to facilitate a decision.","expected_response_format":"A Markdown table or comparative narrative summarizing the two conflicting inputs."}
{"task_id":"COL03","stage_id":"human_computer_interaction_and_collaboration","stage_name":"IX. Human-Computer Interaction & Collaboration","section_id":"collaborative_workspace_management","section_name":"Collaborative Workspace Management","section_description":"Prompts for managing shared analytical sessions, tracking contributions, and resolving conflicts between multiple users.","prompt_text":"Lock the 'Financial Statement Adjustments' (FSA01-FSA03) section of the analysis. No further changes can be made to these tasks by any user without explicit override from a user with 'Team Lead' permissions.","expected_response_format":"Confirmation that the specified analytical section has been locked."}
{"task_id":"FBK01","stage_id":"human_computer_interaction_and_collaboration","stage_name":"IX. Human-Computer Interaction & Collaboration","section_id":"feedback_and_reinforcement_learning","section_name":"Feedback & Reinforcement Learning","section_description":"Prompts for capturing user feedback to improve the AI's future performance and fine-tune its models.","prompt_text":"The rationale provided in RR03 was not persuasive. The causal link between the company's competitive position and its financial forecast was unclear. Use this feedback to regenerate the rationale, placing greater emphasis on that specific connection. Register this feedback instance for model improvement.","expected_response_format":"A revised narrative for the rating rationale that explicitly incorporates the user's feedback."}
{"task_id":"FBK02","stage_id":"human_computer_interaction_and_collaboration","stage_name":"IX. Human-Computer Interaction & Collaboration","section_id":"feedback_and_reinforcement_learning","section_name":"Feedback & Reinforcement Learning","section_description":"Prompts for capturing user feedback to improve the AI's future performance and fine-tune its models.","prompt_text":"The peer group selected in PA01 was excellent and highly relevant. Create a positive reinforcement signal for the selection logic used. Associate this successful outcome with the input features: industry='specialty chemicals', revenue_size='<$1B', geo_focus='North America'.","expected_response_format":"Confirmation that a positive feedback signal has been logged for reinforcement learning, associating the successful output with the specified input conditions."}
{"task_id":"SEC01","stage_id":"security_privacy_and_access_control","stage_name":"X. Security, Privacy & Access Control","section_id":"permissions_and_role_based_access","section_name":"Permissions & Role-Based Access (RBAC)","section_description":"Prompts for defining and enforcing granular access controls over tasks, data, and system capabilities.","prompt_text":"Define a new user role named 'Junior Analyst'. Generate a JSON RBAC policy that grants this role 'read-only' access to all stages up to 'V. Synthesis, Rating, and Reporting', and explicit 'deny' access to all subsequent stages (VI-X). The role is also denied access to any task involving the 'delete' or 'deploy' verbs.","expected_response_format":"A JSON object representing the Role-Based Access Control policy."}
{"task_id":"SEC02","stage_id":"security_privacy_and_access_control","stage_name":"X. Security, Privacy & Access Control","section_id":"permissions_and_role_based_access","section_name":"Permissions & Role-Based Access (RBAC)","section_description":"Prompts for defining and enforcing granular access controls over tasks, data, and system capabilities.","prompt_text":"The current user is requesting to execute task DEP02 (Kubernetes Deployment). Verify if the user's role has the necessary 'execute' permission for the 'deployment_and_cicd' section. Provide a confirmation or denial message based on the current RBAC policy.","expected_response_format":"A confirmation or denial string, e.g., 'ACCESS DENIED: User role 'Junior Analyst' lacks 'execute' permission for section 'deployment_and_cicd'.'"}
{"task_id":"PRIV01","stage_id":"security_privacy_and_access_control","stage_name":"X. Security, Privacy & Access Control","section_id":"data_privacy_and_anonymization","section_name":"Data Privacy & Anonymization","section_description":"Prompts for handling sensitive data, performing anonymization, and ensuring compliance with privacy regulations.","prompt_text":"Before processing the attached document 'employee_census.csv', run a PII scan and generate a data masking plan. The plan should identify columns containing names, addresses, and social security numbers, and specify a masking technique for each (e.g., 'hash', 'redact', 'substitute_with_placeholder').","expected_response_format":"A JSON object representing the data masking plan."}
{"task_id":"PRIV02","stage_id":"security_privacy_and_access_control","stage_name":"X. Security, Privacy & Access Control","section_id":"data_privacy_and_anonymization","section_name":"Data Privacy & Anonymization","section_description":"Prompts for handling sensitive data, performing anonymization, and ensuring compliance with privacy regulations.","prompt_text":"Generate a differential privacy query. Apply a Laplace mechanism with a specified privacy budget (epsilon) of 1.0 to a query that calculates the average salary from the 'employee_census.csv' file. Generate the Python code to execute this differentially private query.","expected_response_format":"A Python script using a differential privacy library (e.g., Google's diff-privlib, OpenDP) to perform the noisy query."}
{"task_id":"AUD01","stage_id":"security_privacy_and_access_control","stage_name":"X. Security, Privacy & Access Control","section_id":"security_auditing_and_logging","section_name":"Security Auditing & Logging","section_description":"Prompts for logging security-sensitive events and generating reports for compliance and forensic analysis.","prompt_text":"A request to access a sensitive document was denied. Create a high-priority security event log entry. The log must be in JSON format and include a timestamp, the requesting user's ID, the target resource ('doc_merger_prospectus.pdf'), the result ('ACCESS_DENIED'), and the ID of the RBAC policy that blocked the request.","expected_response_format":"A single JSON object representing the structured security event log."}
{"task_id":"AUD02","stage_id":"security_privacy_and_access_control","stage_name":"X. Security, Privacy & Access Control","section_id":"security_auditing_and_logging","section_name":"Security Auditing & Logging","section_description":"Prompts for logging security-sensitive events and generating reports for compliance and forensic analysis.","prompt_text":"Generate a security report for the last 7 days. The report should summarize: 1) The number of failed login attempts by user. 2) A list of all access requests to resources tagged as 'highly_sensitive'. 3) All actions performed by users with the 'Administrator' role. The output should be a formatted Markdown file.","expected_response_format":"A structured Markdown report containing the requested security audit summary."}
`;

    document.addEventListener('DOMContentLoaded', () => {
        const prompts = jsonlData.trim().split('\n').map(line => JSON.parse(line));

        const groupedData = prompts.reduce((acc, prompt) => {
            const { stage_name, section_name } = prompt;
            if (!acc[stage_name]) {
                acc[stage_name] = {};
            }
            if (!acc[stage_name][section_name]) {
                acc[stage_name][section_name] = [];
            }
            acc[stage_name][section_name].push(prompt);
            return acc;
        }, {});

        const libraryContainer = document.getElementById('library-container');
        const navLinks = document.getElementById('nav-links');

        for (const stageName in groupedData) {
            const stageId = stageName.toLowerCase().replace(/[^a-z0-9]+/g, '-');
            
            // Create nav link
            const li = document.createElement('li');
            const a = document.createElement('a');
            a.href = `#${stageId}`;
            a.textContent = stageName;
            li.appendChild(a);
            navLinks.appendChild(li);

            // Create stage container
            const stageDiv = document.createElement('div');
            stageDiv.className = 'stage';
            stageDiv.id = stageId;
            stageDiv.innerHTML = `<h2 class="stage-title">${stageName}</h2>`;

            for (const sectionName in groupedData[stageName]) {
                const sectionDiv = document.createElement('div');
                sectionDiv.className = 'section';
                
                const sectionTitle = document.createElement('h3');
                sectionTitle.className = 'section-title';
                sectionTitle.textContent = sectionName;
                sectionDiv.appendChild(sectionTitle);

                const sectionContent = document.createElement('div');
                sectionContent.className = 'section-content';
                
                const sectionDescription = document.createElement('p');
                sectionDescription.className = 'section-description';
                sectionDescription.textContent = groupedData[stageName][sectionName][0].section_description;
                sectionContent.appendChild(sectionDescription);
                
                groupedData[stageName][sectionName].forEach(prompt => {
                    const card = document.createElement('div');
                    card.className = 'prompt-card';
                    card.innerHTML = `
                        <h4>Task: ${prompt.task_id}</h4>
                        <div class="prompt-text">
                            ${prompt.prompt_text}
                            <button class="copy-btn" title="Copy to Clipboard">ðŸ“‹</button>
                        </div>
                        <div class="response-format">
                            <strong>Expected Response:</strong> ${prompt.expected_response_format}
                        </div>
                    `;
                    sectionContent.appendChild(card);
                });
                sectionDiv.appendChild(sectionContent);
                stageDiv.appendChild(sectionDiv);
            }
            libraryContainer.appendChild(stageDiv);
        }

        // Add event listeners
        addEventListeners();
    });
    
    function addEventListeners() {
        // Search bar
        const searchBar = document.getElementById('search-bar');
        searchBar.addEventListener('keyup', (e) => {
            const searchTerm = e.target.value.toLowerCase();
            document.querySelectorAll('.prompt-card').forEach(card => {
                const cardText = card.textContent.toLowerCase();
                if (cardText.includes(searchTerm)) {
                    card.style.display = 'block';
                } else {
                    card.style.display = 'none';
                }
            });
        });

        // Copy button
        document.querySelectorAll('.copy-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const promptText = e.target.parentElement.innerText.trim();
                navigator.clipboard.writeText(promptText).then(() => {
                    e.target.textContent = 'âœ… Copied!';
                    setTimeout(() => { e.target.textContent = 'ðŸ“‹'; }, 2000);
                });
            });
        });
        
        // Collapsible sections
        document.querySelectorAll('.section-title').forEach(title => {
            title.addEventListener('click', () => {
                title.classList.toggle('open');
                title.nextElementSibling.classList.toggle('open');
            });
        });
        
        // Sidebar navigation
        document.querySelectorAll('#sidebar a').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelectorAll('#sidebar a').forEach(el => el.classList.remove('active'));
                this.classList.add('active');
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });
    }

</script>
</body>
</html>
