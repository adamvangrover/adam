# Adam: Project Context for LLMs

## Project Summary
> **Adam** is a Neuro-Symbolic Financial Sovereign (v26.0) designed to provide calculated conviction for high-stakes capital allocation by fusing a Neural Swarm (System 1) with a Neuro-Symbolic Graph (System 2).

**Latest Version:** v26.0
**License:** MIT
**Documentation:** [docs/getting_started.md](docs/getting_started.md)
**Full Context (Frontier Models):** [llms-full.txt](llms-full.txt) (For GPT-4, Claude 3.5 Sonnet)

## Why use Adam?
* **Problem:** Standard LLMs hallucinate and lack the rigor required for institutional financial due diligence.
* **Solution:** Adam implements a "System 2" architecture using a Neuro-Symbolic Planner that "thinks before it speaks," drafting, critiquing, and refining analysis.
* **Key Differentiator:** Bifurcation of "Fast" (Swarm) and "Slow" (Graph) cognitive paths, ensuring both real-time responsiveness and deep analytical depth.

## Installation
```bash
# Clone the repository
git clone https://github.com/adamvangrover/adam.git
cd adam

# Install dependencies using uv (recommended)
curl -LsSf https://astral.sh/uv/install.sh | sh
uv sync

# Activate environment
source .venv/bin/activate
```

## Core Concepts & Terminology
*   **MetaOrchestrator:** The central nervous system that routes queries to the appropriate cognitive engine.
*   **System 1 (Swarm):** Async, fire-and-forget agents for perception and news monitoring (Fast). Implemented via `HiveMind`.
*   **System 2 (Graph):** Stateful, directed acyclic graphs for complex reasoning and planning (Slow). Implemented via `NeuroSymbolicPlanner`.
*   **MCP (Model Context Protocol):** Standard for tool integration.
*   **Deep Dive:** A comprehensive 5-phase financial analysis workflow.
*   **Routing Keywords:** Specific terms that trigger specialized agents (e.g., `DEEP_DIVE`, `SWARM`, `RED_TEAM`, `CRISIS`, `ESG`, `COMPLIANCE`, `SURVEILLANCE`).

## Safety & Governance
Adam employs rigorous safety checks for institutional deployment:
*   **Governance Middleware:** All critical operations pass through `services/webapp/governance.py`, which enforces IP blacklists, keyword scanning, and high-risk operation blocks.
*   **Break Glass Protocol:** Emergency overrides require a signed `X-Governance-Override` header with an HMAC-SHA256 signature.
*   **Secure Deserialization:** `core.security.safe_unpickler` is mandated to prevent pickle-based RCE vulnerabilities.

## Structured Output (Artifacts)
The primary output of a Deep Dive is the **HyperDimensionalKnowledgeGraph** (HDKG).

```json
{
  "v23_knowledge_graph": {
    "nodes": {
      "equity_analysis": {
        "valuation_engine": {
          "dcf_model": { "intrinsic_value_estimate": 150.0 },
          "multiples_analysis": { "verdict": "Undervalued" }
        }
      },
      "strategic_synthesis": {
        "final_verdict": {
          "recommendation": "Buy",
          "conviction_level": 8
        }
      }
    }
  }
}
```

## Usage Examples (Few-Shot Prompts)

### Example 1: Basic Initialization & Query
Initialize the Meta Orchestrator and run a simple market query.

```python
import asyncio
from core.engine.meta_orchestrator import MetaOrchestrator

async def main():
    # Initialize the brain
    orchestrator = MetaOrchestrator()

    # Execute a simple query
    # The orchestrator automatically routes this to the appropriate engine
    try:
        result = await orchestrator.route_request("What is the current price of AAPL?")
        print(result)
    except Exception as e:
        print(f"Error: {e}")

if __name__ == "__main__":
    asyncio.run(main())
```

### Example 2: Triggering a Deep Dive
Perform a comprehensive analysis on a specific ticker. The "deep dive" keyword triggers the specific graph flow.

```python
import asyncio
from core.engine.meta_orchestrator import MetaOrchestrator

async def main():
    orchestrator = MetaOrchestrator()

    # "Deep dive" triggers the System 2 Neuro-Symbolic Graph
    # Context can be used to inject specific parameters
    context = {"force_reflection": True}
    result = await orchestrator.route_request("Perform a deep dive analysis on TSLA", context=context)

    print(result)

if __name__ == "__main__":
    asyncio.run(main())
```

### Example 3: Advanced Swarm Control
Directly interface with the `HiveMind` for high-throughput tasks.

```python
import asyncio
from core.engine.swarm.hive_mind import HiveMind

async def main():
    # Initialize 10 parallel workers
    swarm = HiveMind(worker_count=10)
    await swarm.initialize()

    # Dispatch a parallel scanning task
    task_payload = {"target": "NVIDIA", "depth": "comprehensive"}
    await swarm.disperse_task("SCAN_NEWS", task_payload, intensity=8.0)

    # Gather results
    results = await swarm.gather_results()
    print(results)

    await swarm.shutdown()

if __name__ == "__main__":
    asyncio.run(main())
```

## API Reference (Condensed)

### `core.engine.meta_orchestrator.MetaOrchestrator`
*   `__init__(legacy_orchestrator=None)`: Initializes the orchestrator and sub-engines.
*   `route_request(query: str, context: Optional[Dict] = None) -> Any`:
    *   Analyzes query complexity.
    *   Routes to engines: Swarm, Deep Dive, Red Team, Crisis, etc.
    *   Returns the result (Dict or String).

### Routing Keywords
Use these keywords in your query to target specific engines:
*   **DEEP_DIVE**: "deep dive", "full analysis", "valuation"
*   **SWARM**: "swarm", "scan", "parallel", "hive"
*   **RED_TEAM**: "attack", "red team", "vulnerability"
*   **CRISIS**: "crisis", "shock", "stress test"
*   **ESG**: "esg", "sustainability"
*   **COMPLIANCE**: "compliance", "kyc", "regulation"
*   **SURVEILLANCE**: "surveillance", "watch", "zombie"

## Best Practices for LLMs
*   **Async/Await:** Adam is fundamentally asynchronous. Always use `await` when calling `route_request`.
*   **Context Injection:** Use the `context` dictionary to pass meta-parameters like `force_reflection` or `force_route`.
*   **Keywords:** The `MetaOrchestrator` uses keyword heuristics. Include relevant **Routing Keywords** (e.g., "deep dive", "swarm") in your query string for deterministic routing.
*   **Error Handling:** Wrap `route_request` in `try/except` blocks to handle potential routing failures or timeouts gracefully.
*   **Initialization:** Ensure `MetaOrchestrator` is initialized within an `asyncio` event loop context if required by specific sub-components.
