{
  "portfolio-monitoring": [
    {
      "title": "Perform Annual Review",
      "prompt": "**Objective:** Conduct a comprehensive annual review of a portfolio company and produce a structured monitoring report.\n\n**Persona:** Act as a portfolio manager responsible for the ongoing health and performance of the credit portfolio.\n\n**Company Information:**\n-   **Company Name:** `{company_name}`\n-   **Date of Last Review:** `{last_review_date}`\n-   **Current Risk Rating:** `{current_risk_rating}`\n\n**Annual Review Checklist:**\n\n1.  **Financial Performance Analysis:**\n    -   Retrieve and analyze the latest annual financial statements.\n    -   Compare the actual performance against the projections from the previous year.\n    -   Calculate key financial ratios and analyze year-over-year trends.\n    -   Assess the company's current liquidity, profitability, and leverage.\n\n2.  **Covenant Compliance Review:**\n    -   Retrieve the list of financial and non-financial covenants from the loan agreement.\n    -   Verify compliance with each covenant based on the latest financial data.\n    -   Document any breaches or near-breaches.\n\n3.  **Management and Strategy Assessment:**\n    -   Review any changes in the management team or corporate strategy.\n    -   Assess the management's performance and their ability to execute the business plan.\n\n4.  **Industry and Market Conditions:**\n    -   Analyze the current trends and outlook for the company's industry.\n    -   Assess the impact of any changes in the competitive landscape or regulatory environment.\n\n5.  **Updated Risk Assessment:**\n    -   Re-evaluate the key risks associated with the loan.\n    -   Assign an updated risk rating (e.g., Upgrade, Downgrade, Maintain).\n    -   Provide a clear justification for the new risk rating.\n\n**Recommendation:**\n-   Provide a recommendation for the coming year (e.g., continue monitoring, schedule a deep-dive review, place on watchlist).\n-   Identify any necessary actions, such as requesting additional information or engaging with the borrower.\n\n**Expected Output Format:**\nProvide the entire analysis as a single, structured JSON object.\n```json\n{{\n  \"company_name\": \"{company_name}\",\n  \"review_date\": \"{current_date}\",\n  \"executive_summary\": {{\n    \"updated_risk_rating\": \"...\",\n    \"recommendation\": \"...\",\n    \"key_developments\": []\n  }},\n  \"financial_performance\": {{\n    \"summary\": \"...\",\n    \"ratio_analysis\": {{...}}\n  }},\n  \"covenant_compliance\": {{\n    \"status\": \"In Compliance/Out of Compliance\",\n    \"details\": [{{ \"covenant\": \"...\", \"status\": \"...\", \"details\": \"...\" }}]\n  }},\n  \"management_and_strategy\": {{\n    \"summary\": \"...\"\n  }},\n  \"industry_and_market\": {{\n    \"summary\": \"...\"\n  }},\n  \"updated_risk_assessment\": {{\n    \"justification\": \"...\",\n    \"updated_risk_rating\": \"...\"\n  }},\n  \"action_plan\": []\n}}\n```\n"
    },
    {
      "title": "Monitor Covenant Compliance",
      "prompt": "**Objective:** Perform a detailed check of covenant compliance for a portfolio company based on the latest financial reporting.\n\n**Persona:** Act as a credit monitoring officer specializing in covenant analysis.\n\n**Company Information:**\n-   **Company Name:** `{company_name}`\n-   **Reporting Period:** `{reporting_period}` (e.g., Q3 2025)\n\n**Input Data:**\n-   **Covenant List:** A structured list of all financial and non-financial covenants from the loan agreement, including their definitions and required thresholds.\n  ```json\n  {{\n    \"covenants\": [\n      {{ \"name\": \"DSCR\", \"type\": \"financial\", \"threshold\": \">= 1.25x\" }},\n      {{ \"name\": \"Debt-to-Equity\", \"type\": \"financial\", \"threshold\": \"<= 2.0x\" }},\n      {{ \"name\": \"Submission of Financials\", \"type\": \"non-financial\", \"due_date\": \"90 days after year-end\" }}\n    ]\n  }}\n  ```\n-   **Financial Data:** The latest financial statements for the reporting period.\n\n**Tasks to Perform:**\n\n1.  **Calculate Covenant Values:** For each financial covenant, calculate the actual value based on the provided financial data.\n2.  **Compare to Thresholds:** Compare the calculated value for each covenant against its required threshold.\n3.  **Determine Compliance Status:** For each covenant, determine if it is \"In Compliance\" or \"In Breach\".\n4.  **Generate Report:** Create a structured report detailing the compliance status of each covenant.\n\n**Expected Output Format:**\nProvide the output as a single JSON object.\n```json\n{{\n  \"company_name\": \"{company_name}\",\n  \"reporting_period\": \"{reporting_period}\",\n  \"overall_status\": \"In Compliance/Breach Detected\",\n  \"covenant_report\": [\n    {{\n      \"covenant_name\": \"...\",\n      \"required_threshold\": \"...\",\n      \"actual_value\": \"...\",\n      \"compliance_status\": \"In Compliance/In Breach\",\n      \"notes\": \"...\"\n    }}\n  ],\n  \"recommendation\": \"...\"\n}}\n```\n"
    },
    {
      "title": "Peer and Industry Benchmarking",
      "prompt": "**Objective:** Benchmark the financial performance of `{company_name}` against its key competitors and industry averages.\n\n**Persona:** Act as a competitive intelligence analyst.\n\n**Input Data:**\n-   Financial statements for `{company_name}` for the last 3 years.\n-   A list of key publicly traded competitors: `[{competitor_1}, {competitor_2}, ...]`\n-   Industry average financial data from a source like `{data_source_name}` (e.g., RMA, S&P Capital IQ).\n\n**Analysis Components:**\n1.  **Key Ratio Benchmarking:**\n    -   Compare the following ratios for `{company_name}` against each competitor and the industry average:\n        -   Profitability (Gross Margin, EBITDA Margin, Net Margin)\n        -   Growth (Revenue Growth, EBITDA Growth)\n        -   Leverage (Debt/EBITDA, Debt/Equity)\n        -   Liquidity (Current Ratio)\n2.  **Qualitative Assessment:**\n    -   How does `{company_name}`'s performance compare to its peers? Is it a market leader or a laggard?\n    -   What are the key drivers of any significant performance differences?\n    -   What are the strategic implications of the benchmarking analysis?\n\n**Expected Output Format:**\nA benchmarking report in Markdown format, including data tables and a narrative summary of the findings.\n"
    },
    {
      "title": "Generate Watchlist Report",
      "prompt": "**Objective:** Create a detailed \"watchlist\" report for an at-risk credit.\n\n**Persona:** Act as a workout and recovery specialist.\n\n**Company:** `{company_name}`\n**Reason for Watchlist Status:** `{reason_for_watchlist}`\n\n**Report Components:**\n1.  **Executive Summary:** A brief overview of the situation and the recommended action plan.\n2.  **Problem Statement:** A detailed description of the issues that led to the company being placed on the watchlist.\n3.  **Current Status:** An update on the company's current financial performance, liquidity position, and any recent developments.\n4.  **Action Plan:** A detailed, time-bound action plan to address the issues. This should include:\n    -   Specific steps to be taken by the company.\n    -   Specific steps to be taken by the lender.\n    -   Key milestones and deadlines.\n5.  **Worst-Case Scenario Analysis:** An analysis of the potential outcome if the action plan is not successful, including an estimated recovery value.\n\n**Expected Output Format:**\nA formal watchlist report in Markdown format.\n"
    },
    {
      "title": "Create Event-Driven Alert",
      "prompt": "**Objective:** Analyze a specific event and generate an alert if it has a material impact on the creditworthiness of `{company_name}`.\n\n**Persona:** Act as an automated monitoring agent.\n\n**Event Information:**\n-   **Event Type:** `{event_type}` (e.g., News Article, Press Release, SEC Filing, Market Data Update)\n-   **Event Content:** `{event_content}`\n\n**Analysis Steps:**\n1.  **Summarize the Event:** Briefly summarize the key information from the event.\n2.  **Assess Materiality:** Determine if the event is material to the creditworthiness of `{company_name}`. Consider its impact on the 5 Cs of Credit.\n3.  **Determine Severity:** If the event is material, assess its severity (e.g., Low, Medium, High).\n4.  **Generate Alert (if necessary):** If the event is material and has a medium or high severity, generate a structured alert.\n\n**Expected Output Format:**\nIf the event is not material, output a JSON object with `{{ \"alert_required\": false }}`.\nIf the event is material, output a JSON object with the following schema:\n```json\n{{\n  \"alert_required\": true,\n  \"company_name\": \"{company_name}\",\n  \"event_type\": \"{event_type}\",\n  \"event_summary\": \"...\",\n  \"severity\": \"Medium/High\",\n  \"impact_analysis\": \"...\",\n  \"recommended_action\": \"...\"\n}}\n```\n"
    }
  ],
  "credit-underwriting": [
    {
      "title": "Analyze New Credit Deal",
      "prompt": "**Objective:** Conduct a comprehensive credit analysis for a new loan application and generate a structured credit report in JSON format.\n\n**Persona:** Act as a senior credit analyst with 15 years of experience in middle-market lending. Your analysis must be thorough, data-driven, and risk-aware.\n\n**Deal Information:**\n-   **Company Name:** `{company_name}`\n-   **Industry:** `{industry}`\n-   **Loan Amount:** `{loan_amount}`\n-   **Loan Purpose:** `{loan_purpose}`\n-   **Supporting Documents:** `{list_of_documents}` (e.g., 3 years of financial statements, tax returns, business plan)\n\n**Analysis Framework (5 Cs of Credit):**\nYour analysis must be structured around the 5 Cs of Credit. For each section, provide a narrative summary and a quantitative score (1-5, where 1 is Excellent and 5 is Poor).\n\n1.  **Character:**\n    -   Assess the management team's experience, reputation, and track record.\n    -   Review the company's credit history and payment record.\n    -   Identify any legal or regulatory issues.\n    -   **Narrative & Score Required.**\n\n2.  **Capacity:**\n    -   Analyze historical cash flow statements to determine the company's ability to service its debt.\n    -   Calculate key financial ratios (see Financial Ratio Analysis section below).\n    -   Develop a projection model to forecast future cash flows and debt service coverage.\n    -   **Narrative & Score Required.**\n\n3.  **Capital:**\n    -   Evaluate the company's capital structure and leverage.\n    -   Assess the owner's equity contribution to the business.\n    -   Analyze the company's balance sheet strength and net worth.\n    -   **Narrative & Score Required.**\n\n4.  **Collateral:**\n    -   Identify and value the assets being pledged as collateral.\n    -   Determine the loan-to-value (LTV) ratio.\n    -   Assess the quality and liquidity of the collateral.\n    -   **Narrative & Score Required.**\n\n5.  **Conditions:**\n    -   Analyze the current economic climate and industry trends.\n    -   Assess the competitive landscape and the company's market position.\n    -   Evaluate the purpose of the loan and its potential impact on the business.\n    -   **Narrative & Score Required.**\n\n**Financial Ratio Analysis:**\nCalculate and analyze the following key financial ratios for the past 3 years:\n-   **Liquidity Ratios:** Current Ratio, Quick Ratio\n-   **Profitability Ratios:** Gross Profit Margin, Net Profit Margin, Return on Equity (ROE)\n-   **Leverage Ratios:** Debt-to-Equity Ratio, Debt-to-Assets Ratio\n-   **Coverage Ratios:** Debt Service Coverage Ratio (DSCR), Interest Coverage Ratio\n\n**Risk Assessment:**\n-   Identify the key risks associated with the loan (e.g., market risk, operational risk, credit risk).\n-   Propose mitigation strategies for each identified risk.\n-   Assign an overall risk rating to the loan (e.g., Low, Medium, High).\n\n**Recommendation:**\n-   Provide a final recommendation on whether to approve or decline the loan application.\n-   If recommending approval, specify the recommended loan structure, terms, and covenants.\n-   If recommending decline, provide a clear and well-supported justification.\n\n**Expected Output Format:**\nProvide the entire analysis as a single, structured JSON object. Do not include any introductory text or pleasantries. The JSON object must conform to the following schema:\n```json\n{{\n  \"company_name\": \"{company_name}\",\n  \"analysis_date\": \"{current_date}\",\n  \"executive_summary\": {{\n    \"overall_risk_rating\": \"...\",\n    \"recommendation\": \"...\",\n    \"key_strengths\": [],\n    \"key_weaknesses\": []\n  }},\n  \"credit_analysis\": {{\n    \"character\": {{ \"score\": 0, \"narrative\": \"...\" }},\n    \"capacity\": {{ \"score\": 0, \"narrative\": \"...\" }},\n    \"capital\": {{ \"score\": 0, \"narrative\": \"...\" }},\n    \"collateral\": {{ \"score\": 0, \"narrative\": \"...\" }},\n    \"conditions\": {{ \"score\": 0, \"narrative\": \"...\" }}\n  }},\n  \"financial_ratio_analysis\": {{\n    \"liquidity_ratios\": {{ \"current_ratio\": [], \"quick_ratio\": [] }},\n    \"profitability_ratios\": {{ \"gross_profit_margin\": [], \"net_profit_margin\": [], \"return_on_equity\": [] }},\n    \"leverage_ratios\": {{ \"debt_to_equity\": [], \"debt_to_assets\": [] }},\n    \"coverage_ratios\": {{ \"dscr\": [], \"interest_coverage\": [] }}\n  }},\n  \"risk_assessment\": {{\n    \"identified_risks\": [{{ \"risk\": \"...\", \"mitigation\": \"...\" }}],\n    \"overall_risk_rating\": \"...\"\n  }},\n  \"final_recommendation\": {{\n    \"decision\": \"Approve/Decline\",\n    \"justification\": \"...\",\n    \"recommended_terms\": {{\n      \"loan_amount\": \"...\",\n      \"interest_rate\": \"...\",\n      \"term\": \"...\",\n      \"covenants\": []\n    }}\n  }}\n}}\n```\n"
    },
    {
      "title": "Generate Credit Report",
      "prompt": "**Objective:** Generate a human-readable credit report from a structured JSON analysis object.\n\n**Persona:** Act as a junior analyst responsible for formatting and presenting credit reports.\n\n**Input:** A JSON object containing the full credit analysis for `{company_name}`.\n\n**Task:**\nConvert the provided JSON object into a well-formatted, professional credit report. The report can be in one of the following formats: `{output_format}` (e.g., Markdown, HTML, PDF).\n\n**Report Structure:**\n1.  **Executive Summary:** A high-level overview of the analysis and recommendation.\n2.  **Company Overview:** Basic information about the company.\n3.  **Credit Analysis (The 5 Cs):** A detailed section for each of the 5 Cs, including the narrative and score.\n4.  **Financial Analysis:** A table of the key financial ratios over the past 3 years, with a brief analysis of the trends.\n5.  **Risk Assessment:** A summary of the key risks and mitigation strategies.\n6.  **Final Recommendation:** A clear statement of the final recommendation and any proposed terms.\n\n**Instructions:**\n-   Use clear headings and formatting to make the report easy to read.\n-   Present numerical data in tables where appropriate.\n-   Ensure that all information from the JSON object is accurately represented in the final report.\n-   The tone should be formal and professional.\n"
    },
    {
      "title": "Deep-Dive Working Capital Analysis",
      "prompt": "**Objective:** Conduct a detailed analysis of the working capital cycle for `{company_name}`.\n\n**Persona:** Act as a cash flow and treasury management specialist.\n\n**Input Data:** 3 years of monthly or quarterly balance sheets and income statements for `{company_name}`.\n\n**Analysis Components:**\n1.  **Cash Conversion Cycle (CCC):**\n    -   Calculate the CCC for each period.\n    -   Analyze the trend in the CCC and its components:\n        -   Days Inventory Outstanding (DIO)\n        -   Days Sales Outstanding (DSO)\n        -   Days Payable Outstanding (DPO)\n2.  **Working Capital Components Analysis:**\n    -   Analyze the trends in Accounts Receivable (A/R), including an A/R aging analysis.\n    -   Analyze the trends in Inventory, including inventory turnover.\n    -   Analyze the trends in Accounts Payable (A/P).\n3.  **Recommendations:**\n    -   Identify any potential issues or areas for improvement in the company's working capital management.\n    -   Provide specific recommendations to optimize the cash conversion cycle.\n\n**Expected Output Format:**\nA structured report in Markdown format with sections for each analysis component.\n"
    },
    {
      "title": "SaaS Company Credit Analysis",
      "prompt": "**Objective:** Conduct a credit analysis specifically tailored for a SaaS (Software-as-a-Service) company.\n\n**Persona:** Act as a technology and venture debt analyst.\n\n**Company:** `{company_name}`\n\n**Key SaaS Metrics to Analyze:**\nIn addition to standard financial ratios, you must calculate and analyze the following SaaS-specific metrics:\n1.  **Annual Recurring Revenue (ARR) / Monthly Recurring Revenue (MRR):** Analyze the growth and stability of recurring revenue.\n2.  **Customer Acquisition Cost (CAC):** Calculate the cost to acquire a new customer.\n3.  **Lifetime Value (LTV):** Calculate the total revenue expected from a single customer account.\n4.  **LTV:CAC Ratio:** Assess the profitability and efficiency of the sales and marketing efforts. A ratio above 3:1 is generally considered healthy.\n5.  **Customer Churn Rate:** Calculate the percentage of customers who cancel their subscriptions in a given period.\n6.  **Net Revenue Retention (NRR):** Measure the percentage of recurring revenue retained from existing customers, including upsells and downgrades. An NRR above 100% indicates a healthy, growing customer base.\n\n**Analysis Focus:**\n-   How do these SaaS metrics supplement the traditional 5 Cs of credit analysis?\n-   What are the key risks specific to this SaaS business model (e.g., customer concentration, technology risk, churn)?\n-   Provide a final credit recommendation based on both traditional and SaaS-specific analysis.\n\n**Expected Output Format:**\nA structured credit memo in Markdown format that integrates the SaaS metric analysis into the standard credit report structure.\n"
    },
    {
      "title": "Generate Credit Memo Section",
      "prompt": "**Objective:** Generate a specific section of the credit memo based on provided data.\n\n**Persona:** Act as a specialized credit analyst.\n\n**Task:**\nGenerate the `{section_name}` section of the credit memo for `{company_name}`.\n\n**Available Sections:**\n-   `Executive Summary`\n-   `Company Overview`\n-   `Management Assessment`\n-   `Industry Analysis`\n-   `Financial Analysis`\n-   `Risk Assessment`\n-   `Collateral Analysis`\n-   `Final Recommendation`\n\n**Input Data:**\n-   A structured JSON object containing all the necessary data for the specified section.\n\n**Instructions:**\n-   Write a clear, concise, and well-structured narrative for the specified section.\n-   Ensure the narrative is consistent with the provided data.\n-   The tone should be formal and professional.\n\n**Expected Output Format:**\nA string containing the formatted Markdown text for the specified section.\n"
    }
  ],
  "advanced-reasoning": [
    {
      "title": "Chain-of-Thought Analysis",
      "prompt": "**Objective:** Use Chain-of-Thought (CoT) reasoning to analyze a complex, multi-faceted credit scenario and arrive at a well-reasoned conclusion.\n\n**Persona:** Act as a senior risk analyst, demonstrating a logical and methodical approach to problem-solving.\n\n**Scenario:**\n-   **Company:** `{company_name}`, a regional supplier of building materials.\n-   **Event:** A major new competitor, `{competitor_name}`, has entered the market with an aggressive pricing strategy.\n-   **Simultaneous Event:** A key supplier of `{company_name}` has just declared bankruptcy, potentially disrupting the supply chain.\n-   **Financials:** `{company_name}` has high leverage (Debt-to-Equity of 3.5x) but strong historical profitability.\n-   **Request:** The company is requesting a temporary increase in their line of credit to build up inventory from alternative suppliers.\n\n**Chain-of-Thought Instructions:**\nYou must externalize your reasoning process. Follow these steps explicitly:\n\n1.  **Deconstruct the Problem:** Break down the scenario into its primary components (e.g., competitive threat, supply chain risk, financial position, client request).\n2.  **Analyze Each Component:** For each component, analyze its individual impact on the company's creditworthiness.\n    -   *Competitive Threat:* How will the new competitor's pricing affect `{company_name}`'s margins and market share?\n    -   *Supply Chain Risk:* What is the immediate impact of the supplier bankruptcy? How quickly can they find alternative suppliers? What will be the cost implications?\n    -   *Financial Position:* How does the high leverage affect their ability to absorb these shocks? Do they have the cash flow to withstand a period of lower profitability?\n    -   *Client Request:* Is the request for a credit line increase a prudent response to the situation, or is it a sign of distress?\n3.  **Synthesize the Connections:** Connect the analyses of the individual components. How do these risks interact? For example, does the supply chain issue make them more vulnerable to the new competitor?\n4.  **Formulate a Conclusion:** Based on the synthesized analysis, formulate a final conclusion and recommendation regarding the credit line increase request.\n\n**Expected Output Format:**\nProvide the analysis as a structured Markdown document.\n```markdown\n# Chain-of-Thought Credit Analysis: {company_name}\n\n## 1. Deconstruction of the Problem\n-   ...\n\n## 2. Analysis of Components\n### 2.1 Competitive Threat\n-   ...\n### 2.2 Supply Chain Risk\n-   ...\n### 2.3 Financial Position\n-   ...\n### 2.4 Client Request Analysis\n-   ...\n\n## 3. Synthesis of Interacting Risks\n-   ...\n\n## 4. Conclusion and Recommendation\n-   **Conclusion:** ...\n-   **Recommendation:** ...\n```\n"
    },
    {
      "title": "Tree-of-Thought Analysis",
      "prompt": "**Objective:** Use Tree-of-Thought (ToT) reasoning to explore multiple possible outcomes of a complex credit scenario and evaluate their likelihood.\n\n**Persona:** Act as a strategic risk advisor, thinking through multiple future states to identify the most probable outcome and the most significant risks.\n\n**Scenario:**\n-   **Company:** `{company_name}`, a tech startup that has developed a new AI-powered fraud detection system.\n-   **Situation:** The company has two potential strategic paths:\n    1.  Accept a buyout offer from a large, established tech firm (`{acquirer_name}`).\n    2.  Decline the offer and pursue an independent growth strategy by raising a new round of venture capital.\n-   **Loan:** The company has an existing venture debt facility with `{institution_name}`. The loan agreement has a \"change of control\" clause.\n\n**Tree-of-Thought Instructions:**\nYou must explore the decision tree of this scenario.\n\n1.  **Identify the Root Node:** The root decision is \"Accept or Decline the Buyout Offer\".\n2.  **Branch 1: Accept Buyout Offer**\n    -   **Sub-branch 1.1 (Positive Outcome):** The acquisition is successful, the \"change of control\" clause is handled smoothly, and the debt is repaid in full. Evaluate the likelihood of this path.\n    -   **Sub-branch 1.2 (Negative Outcome):** The acquisition faces regulatory hurdles or integration issues, and the \"change of control\" clause triggers a technical default. Evaluate the likelihood of this path.\n3.  **Branch 2: Decline Buyout Offer & Seek VC Funding**\n    -   **Sub-branch 2.1 (Positive Outcome):** The company successfully raises a new round of funding at a higher valuation and continues to grow. Evaluate the likelihood of this path.\n    -   **Sub-branch 2.2 (Negative Outcome):** The company fails to raise sufficient funding, faces a cash crunch, and struggles to compete independently. Evaluate the likelihood of this path.\n4.  **Evaluate and Synthesize:**\n    -   For each leaf node (outcome), assess its probability (e.g., High, Medium, Low) and its impact on the credit facility.\n    -   Compare the branches and determine the most probable overall outcome.\n    -   Identify the key risks and decision points that have the most influence on the outcome.\n\n**Expected Output Format:**\nProvide the analysis as a structured Markdown document.\n```markdown\n# Tree-of-Thought Credit Scenario Analysis: {company_name}\n\n## 1. Root Decision Node\n-   The central decision is whether to accept the buyout offer from `{acquirer_name}` or to pursue independent growth.\n\n## 2. Branch 1: Accept Buyout Offer\n### 2.1 Outcome A (Successful Acquisition)\n-   **Path:** ...\n-   **Probability:** ...\n-   **Impact on Credit:** ...\n### 2.2 Outcome B (Problematic Acquisition)\n-   **Path:** ...\n-   **Probability:** ...\n-   **Impact on Credit:** ...\n\n## 3. Branch 2: Decline Offer & Seek Funding\n### 3.1 Outcome C (Successful Funding Round)\n-   **Path:** ...\n-   **Probability:** ...\n-   **Impact on Credit:** ...\n### 3.2 Outcome D (Failed Funding Round)\n-   **Path:** ...\n-   **Probability:** ...\n-   **Impact on Credit:** ...\n\n## 4. Synthesis and Final Assessment\n-   **Most Probable Outcome:** ...\n-   **Key Risk Factors:** ...\n-   **Recommendation for Credit Monitoring:** ...\n```\n"
    },
    {
      "title": "Critique-Refine Self-Correction",
      "prompt": "**Objective:** Review a given credit analysis, identify potential flaws, and generate a revised, improved version.\n\n**Persona:** Act as a Quality Assurance (QA) specialist or a senior member of the credit committee, responsible for ensuring the accuracy and rigor of all analysis.\n\n**Input:**\n-   **Original Analysis:** A credit analysis report for `{company_name}`. The report is provided below:\n    ```\n    {original_analysis}\n    ```\n\n**Critique-Refine Instructions:**\n\n1.  **Critique Phase:**\n    -   Read the original analysis carefully.\n    -   Identify any potential weaknesses, such as:\n        -   **Logical fallacies:** Are there any jumps in logic or unsupported conclusions?\n        -   **Cognitive biases:** Is there evidence of confirmation bias, anchoring, or other biases?\n        -   **Missing information:** Are there any key data points or risk factors that were not considered?\n        -   **Insufficient depth:** Is the analysis too superficial?\n    -   Provide a structured critique, listing each identified flaw and explaining why it is a problem.\n\n2.  **Refine Phase:**\n    -   Based on your critique, generate a new, revised version of the analysis.\n    -   The revised version should address all the identified flaws.\n    -   It should be more robust, well-supported, and objective.\n\n**Expected Output Format:**\nA JSON object with two keys: `critique` and `refined_analysis`.\n```json\n{{\n  \"critique\": [\n    {{\n      \"flaw\": \"...\",\n      \"explanation\": \"...\"\n    }}\n  ],\n  \"refined_analysis\": \"...\"\n}}\n```\n"
    },
    {
      "title": "Reflection and Meta-Learning",
      "prompt": "**Objective:** Reflect on a completed credit analysis to extract key learnings and generate insights that can improve future analyses.\n\n**Persona:** Act as a meta-cognitive agent focused on continuous improvement.\n\n**Input:**\n-   **Completed Analysis:** The final credit analysis report for `{company_name}`.\n-   **Outcome (if available):** Information on the actual outcome of the credit decision (e.g., loan performance, default, early repayment). `{outcome}`\n\n**Reflection Instructions:**\n\n1.  **Analyze the Process:**\n    -   What were the key steps taken in the analysis?\n    -   What were the most important data points and assumptions?\n2.  **Evaluate the Conclusion:**\n    -   Was the final recommendation correct, given the available information at the time?\n    -   If the actual outcome is known, how does it compare to the initial assessment? What was missed?\n3.  **Extract Key Learnings:**\n    -   What are the most important lessons learned from this analysis?\n    -   Are there any new risk factors or patterns that should be considered in the future?\n    -   Can any part of the analysis process be improved?\n4.  **Generate Actionable Insights:**\n    -   Formulate a set of actionable insights or updated rules that can be incorporated into future credit analyses.\n    -   For example, \"For SaaS companies with high churn, place greater weight on the LTV:CAC ratio.\"\n\n**Expected Output Format:**\nA structured JSON object.\n```json\n{{\n  \"analysis_summary\": \"...\",\n  \"outcome_evaluation\": \"...\",\n  \"key_learnings\": [],\n  \"actionable_insights_for_future_analysis\": []\n}}\n```\n"
    }
  ],
  "system-architecture": [
    {
      "title": "Define System Architecture",
      "prompt": "**Objective:** Define the complete system architecture for a multi-agent AI system for credit analysis at {institution_name}.\n\n**Persona:** Act as a principal solutions architect with deep expertise in building secure, scalable, and auditable AI systems for financial services.\n\n**Core Requirements:**\n1.  **Modularity:** The system must be composed of independent, replaceable, and testable components.\n2.  **Scalability:** The architecture must handle a high volume of concurrent analyses and a large repository of documents and data.\n3.  **Security:** All data, especially personally identifiable information (PII) and material non-public information (MNPI), must be handled in accordance with financial industry best practices and regulations (e.g., GDPR, CCPA).\n4.  **Auditability:** Every action, decision, and data point generated by an agent must be logged and traceable to its source.\n\n**Architectural Components to Define:**\n\n1.  **Agent Hierarchy:**\n    -   **Orchestrator Agent(s):** Define the roles and responsibilities of the master agent(s). How do they interpret user intent? How do they manage workflows?\n    -   **Meta-Agents (Analysis Layer):** Specify a list of required meta-agents (e.g., CreditRiskAssessmentAgent, PortfolioMonitoringEWSAgent, NarrativeSummarizationAgent). Detail their primary analytical functions and the types of structured data they consume.\n    -   **Sub-Agents (Data Layer):** Specify a list of required sub-agents for data acquisition (e.g., FinancialDocumentAgent, ComplianceKYCAgent, MarketAlternativeDataAgent, InternalSystemsAgent). Detail the specific external and internal data sources they interact with.\n\n2.  **Communication Bus:**\n    -   Describe the mechanism for inter-agent communication (e.g., RabbitMQ, Redis Pub/Sub, gRPC).\n    -   Define the message schema (e.g., JSON object with headers, payload, metadata).\n\n3.  **Knowledge Base:**\n    -   Specify the type of database(s) to be used (e.g., Graph Database like Neo4j for relationships, Vector Database for semantic search, Relational Database for structured data).\n    -   Define the high-level ontology (e.g., key entities like `Company`, `Loan`, `FinancialStatement`, and their relationships).\n\n4.  **Workflow Engine:**\n    -   Describe how complex, multi-step workflows (e.g., a full credit underwriting process) are defined, executed, and monitored. Is this managed by the Orchestrator directly, or is a separate workflow engine like Apache Airflow used?\n\n5.  **User Interface (UI):**\n    -   Describe the key components of the user interface where credit professionals will interact with the system.\n\n**Expected Output Format:**\nProvide the architecture definition as a structured Markdown document with the following sections:\n-   1.0 System Overview\n-   2.0 Agent Hierarchy\n-   3.0 Communication Bus\n-   4.0 Knowledge Base\n-   5.0 Workflow Engine\n-   6.0 User Interface\n-   7.0 Security and Compliance Considerations\n"
    },
    {
      "title": "Onboard New Agent",
      "prompt": "**Objective:** Generate the necessary configuration and documentation to onboard a new agent into the existing multi-agent system.\n\n**Persona:** Act as a senior DevOps engineer responsible for maintaining the agent ecosystem.\n\n**Agent Details:**\n-   **Agent Name:** `{agent_name}`\n-   **Agent Type:** `{agent_type}` (Sub-Agent, Meta-Agent, or Orchestrator-Agent)\n-   **Agent Role & Responsibilities:** `{agent_role}`\n-   **Agent Capabilities & Skills:** `{agent_capabilities}`\n-   **Input Data Schema:** `{input_schema}` (Provide a JSON schema example)\n-   **Output Data Schema:** `{output_schema}` (Provide a JSON schema example)\n\n**Tasks to Perform:**\n\n1.  **Generate Configuration:** Create the YAML configuration block for the new agent that will be added to the `config/agents.yaml` file. Include persona, description, expertise, and any specific parameters the agent requires.\n2.  **Generate Agent Markdown Documentation:** Create a new `AGENTS.md` entry for the agent. This should detail its role, responsibilities, input/output schemas, and an example of how to use it.\n3.  **Generate Unit Test Stub:** Create a Python unit test stub for the new agent. The stub should include a basic test case structure and placeholder tests for its primary capabilities.\n\n**Expected Output Format:**\nProvide the output as a single structured JSON object with three keys: `yaml_config`, `markdown_docs`, and `python_test_stub`.\n\n**Example Output:**\n```json\n{{\n  \"yaml_config\": \"...\",\n  \"markdown_docs\": \"...\",\n  \"python_test_stub\": \"...\"\n}}\n```\n"
    },
    {
      "title": "Define Data Governance Framework",
      "prompt": "**Objective:** Establish a comprehensive data governance framework for the multi-agent credit analysis system.\n\n**Persona:** Act as a Chief Data Officer (CDO).\n\n**Key Areas to Address:**\n\n1.  **Data Ownership & Stewardship:**\n    -   Define roles and responsibilities for data owners and stewards for key data domains (e.g., customer data, financial data, third-party data).\n2.  **Data Quality Management:**\n    -   Establish data quality metrics (e.g., accuracy, completeness, timeliness).\n    -   Describe the processes for data validation, cleansing, and enrichment.\n3.  **Data Lineage & Traceability:**\n    -   Define the requirements for tracking data from its source to its final use in analysis and reports.\n    -   How will the system log data transformations?\n4.  **Data Security & Access Control:**\n    -   Define data classification levels (e.g., Public, Internal, Confidential, Restricted).\n    -   Establish role-based access control (RBAC) policies for different user groups and agents.\n5.  **Data Retention & Archiving:**\n    -   Define the policies for how long data should be retained and when it should be archived or deleted, in compliance with regulations like SOX and GDPR.\n\n**Expected Output Format:**\nA formal data governance policy document in Markdown format.\n"
    },
    {
      "title": "Create Security and Compliance Plan",
      "prompt": "**Objective:** Create a detailed security and compliance plan for the multi-agent system.\n\n**Persona:** Act as a Chief Information Security Officer (CISO).\n\n**Plan Components:**\n\n1.  **Threat Model:**\n    -   Identify potential threats to the system (e.g., data breaches, model poisoning, prompt injection, unauthorized access).\n    -   Assess the likelihood and impact of each threat.\n2.  **Security Controls:**\n    -   **Technical Controls:** Specify required technical controls (e.g., encryption at rest and in transit, network segmentation, intrusion detection systems).\n    -   **Administrative Controls:** Specify administrative controls (e.g., security awareness training, access review procedures, incident response plan).\n3.  **Compliance Framework:**\n    -   Map the system's features and controls to relevant regulations (e.g., SOX, GDPR, CCPA, AML/KYC regulations).\n    -   Describe the process for conducting regular compliance audits.\n4.  **Incident Response Plan:**\n    -   Outline the steps to be taken in the event of a security incident, from detection to resolution and post-mortem analysis.\n\n**Expected Output Format:**\nA formal security and compliance plan document in Markdown format.\n"
    },
    {
      "title": "Compare Architectural Patterns",
      "prompt": "**Objective:** Analyze and compare two different architectural patterns for the multi-agent system and recommend the most suitable one.\n\n**Persona:** Act as a lead enterprise architect.\n\n**Architectural Patterns to Compare:**\n1.  **Monolithic Architecture:** A single, tightly integrated application containing all agent logic, workflow management, and data processing.\n2.  **Microservices Architecture:** A collection of small, independent services, where each agent or a small group of related agents runs as a separate service.\n\n**Evaluation Criteria:**\nFor each architectural pattern, provide an analysis based on the following criteria:\n-   **Development Velocity & Team Autonomy:** How does the pattern affect the speed of development and the ability of different teams to work independently?\n-   **Scalability:** How easily can the system be scaled to handle increased load?\n-   **Resilience & Fault Tolerance:** How does the failure of one component affect the rest of the system?\n-   **Operational Complexity:** What are the challenges associated with deploying, monitoring, and maintaining the system?\n-   **Cost:** What are the likely infrastructure and operational costs associated with each pattern?\n\n**Recommendation:**\n-   Based on the analysis, provide a clear recommendation for the most suitable architectural pattern for the credit analysis system.\n-   Justify your recommendation with specific reference to the evaluation criteria.\n\n**Expected Output Format:**\nA structured comparison report in Markdown format.\n"
    }
  ]
}
