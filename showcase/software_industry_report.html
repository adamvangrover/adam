<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADAM v23.5 :: Untitled Report</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/market_mayhem_tiers.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@300;400;600;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/nav.js" defer></script>
    <script src="js/market_mayhem_viewer.js" defer></script>
</head>
<body class="tier-high">

    <div id="system2-overlay" class="system2-overlay">
        <div class="system2-terminal">
            <div id="sys2-content"></div>
        </div>
    </div>

    <div id="toast-container" class="cyber-toast-container"></div>

    <div id="raw-source-modal" class="raw-source-modal">
        <div class="raw-source-header">
            <span>SOURCE_DATA.JSON</span>
            <span style="cursor:pointer; color:#cc0000;" onclick="toggleSource()">[CLOSE]</span>
        </div>
        <div class="raw-source-content" id="raw-source-content"></div>
    </div>

    <div class="doc-toolbar" style="display: flex;">
        <div class="toolbar-item" onclick="window.location.href='market_mayhem_archive_v24.html'"><strong>FILE</strong></div>
        <div class="toolbar-item" onclick="toggleRedactionMode()">REDACT</div>
        <div class="toolbar-item" onclick="printReport()">PRINT</div>
        <div class="toolbar-item" onclick="shareReport()">SHARE</div>
        <div class="toolbar-item" onclick="downloadReport()">DOWNLOAD</div>
        <div class="toolbar-item" onclick="toggleTheme()">VIEW</div>
        <div class="toolbar-item" onclick="showToast('INSERT: PERMISSION DENIED')">INSERT</div>
        <div class="toolbar-item" onclick="showToast('FORMAT: LOCKED')">FORMAT</div>
        <div class="toolbar-item" onclick="runVerification()" style="color: #0078d7;"><strong>VERIFY</strong></div>
        <div style="flex-grow:1;"></div>
        <div class="toolbar-item" style="color:#666;">ADAM_V26_EDITOR</div>
    </div>

    <div style="max-width: 1400px; margin: 0 auto; padding: 10px 20px; display:flex; justify-content:space-between; align-items:center; display: none;">
        <a href="market_mayhem_archive_v24.html" class="cyber-btn">&larr; RETURN TO ARCHIVE</a>
        <div style="font-family:'JetBrains Mono'; font-size:0.7rem; color:#666;">SECURE CONNECTION ESTABLISHED</div>
    </div>

    <div class="newsletter-wrapper">
        <div class="paper-sheet" id="paper-sheet">

            <div id="top-secret-stamp" class="top-secret-stamp">TOP SECRET</div>

            <div class="doc-header-ui" style="display: flex;">
                <span id="verification-status">CONFIDENTIAL // SYSTEM 2 REVIEW</span>
                <span>72008b8b</span>
            </div>

            <div style="display:flex; justify-content:space-between; font-family:'JetBrains Mono'; font-size:0.8rem; color:#666; margin-bottom:20px; margin-top: 20px;">
                <span>2025-02-21</span>
                <span>ID: 72008b8b</span>
            </div>

            <h1 class="title">Untitled Report</h1>

            <div class="doc-metadata-panel" style="display: grid;">
                <div class="doc-metadata-item"><strong>Classification</strong>UNCLASSIFIED</div>
                <div class="doc-metadata-item"><strong>Conviction</strong>50/100</div>
                <div class="doc-metadata-item"><strong>Sentiment</strong>100/100</div>
                <div class="doc-metadata-item"><strong>Reviewer</strong>Overseer</div>
            </div>

            <div id="financialChartContainer" style="display:none; margin-bottom: 30px;">
                <canvas id="financialChart"></canvas>
            </div>

            <div id="crisisSimContainer" style="display:none; margin-bottom: 30px; border: 1px solid #cc0000; padding: 20px; background: rgba(50, 0, 0, 0.2);">
                <h3 style="color: #cc0000; margin-top: 0; font-family: 'JetBrains Mono'; border-bottom: 1px solid #cc0000; padding-bottom: 10px; margin-bottom: 20px;">CRISIS SIMULATOR // STRESS TEST</h3>

                <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px; margin-bottom: 20px;">
                    <div class="crisis-btn" onclick="renderCrisis('2008_LEHMAN')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2008 LEHMAN
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('1987_BLACK_MONDAY')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        1987 BLACK MON
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('2000_DOTCOM_BUBBLE')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2000 DOTCOM
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('2020_COVID')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2020 PANDEMIC
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('2022_INFLATION_SHOCK')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2022 INFLATION
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('2025_AI_SHOCK')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2025 AI SHOCK
                    </div>
                </div>

                <div style="height: 300px; position: relative;">
                    <canvas id="crisisChart"></canvas>
                </div>

                <div id="crisisMetrics" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px; font-family: 'JetBrains Mono'; font-size: 0.8rem; color: #ccc;">
                    <div style="border: 1px solid #00f3ff; padding: 10px; background: rgba(0, 243, 255, 0.05);">
                        <div style="color: #00f3ff; border-bottom: 1px solid #00f3ff; margin-bottom: 10px; padding-bottom: 5px; font-weight: bold;">PORTFOLIO PERFORMANCE</div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;"><span>MAX DRAWDOWN:</span> <span id="port_dd" style="color: #fff;">0.00%</span></div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;"><span>VOLATILITY (ANN):</span> <span id="port_vol" style="color: #fff;">0.00%</span></div>
                        <div style="display: flex; justify-content: space-between;"><span>TOTAL RETURN:</span> <span id="port_ret" style="color: #fff;">0.00%</span></div>
                    </div>
                    <div style="border: 1px solid #666; padding: 10px; background: rgba(100, 100, 100, 0.1);">
                        <div style="color: #888; border-bottom: 1px solid #666; margin-bottom: 10px; padding-bottom: 5px; font-weight: bold;">MARKET BENCHMARK</div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;"><span>MAX DRAWDOWN:</span> <span id="mkt_dd" style="color: #ccc;">0.00%</span></div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;"><span>VOLATILITY (ANN):</span> <span id="mkt_vol" style="color: #ccc;">0.00%</span></div>
                        <div style="display: flex; justify-content: space-between;"><span>TOTAL RETURN:</span> <span id="mkt_ret" style="color: #ccc;">0.00%</span></div>
                    </div>
                </div>

                <div style="font-size: 0.7rem; color: #888; margin-top: 15px; font-style: italic;">
                    * Hypothetical performance based on portfolio beta and current risk profile. PAST PERFORMANCE IS NOT INDICATIVE OF FUTURE RESULTS.
                </div>
            </div>

            <div id="document-body">
                <h2>Industry Overview</h2><p>The software industry encompasses a vast array of businesses that develop, produce, and distribute software for various purposes, including operating systems, applications, and cloud-based services. This industry is a major driver of technological innovation and plays a critical role in the global economy, transforming how businesses operate and individuals interact with technology.</p>
<h2>Key Trends</h2><h2>Growth Drivers</h2><h2>Challenges</h2><h2>Opportunities</h2><h2>Peer Group Analysis</h2><ul><li>Revenue Growth</li><li>Profitability (Operating Margin)</li><li>Market Share</li><li>R&D Investment</li><li>Valuation (P/E Ratio)</li></ul><h2>Key Terms and Metrics</h2><h2>Investment Ideas</h2>
            </div>

            <div class="provenance-log">
                <div class="log-entry">
                    <span>> HASH_CHECK</span>
                    <span style="color:var(--terminal-green);">72008b8b1a46fd21b1c43dacc74b497f02212380da6ccc848761fa0f95c53362</span>
                </div>
                <div class="log-entry">
                    <span>> SENTIMENT_SCAN</span>
                    <span>100 (DENSITY: 51)</span>
                </div>
                <div class="log-entry">
                    <span>> CONVICTION_LOCK</span>
                    <span>50%</span>
                </div>
                <div class="log-entry">
                    <span>> CRITIQUE_LOG</span>
                    <span>"Agent Overseer reviewed this intelligence. Verdict: VALIDATED. Sentiment alignment: 100/100. Cross-reference with knowledge graph completed."</span>
                </div>
            </div>

            <a href="#" class="source-jump-btn" onclick="toggleSource(); return false;" title="View Source JSON">JUMP TO SOURCE</a>

            <div style="margin-top: 40px; border-top: 1px solid #ccc; padding-top: 20px; font-style: italic; color: #666;">
                End of Transmission.
            </div>
        </div>

        <aside class="cyber-sidebar">
            <div class="sidebar-widget">
                <div class="sidebar-title">Intelligence Metadata</div>
                <div class="stat-row"><span>DATE</span> <span class="stat-val">2025-02-21</span></div>
                <div class="stat-row"><span>TYPE</span> <span class="stat-val">COMPANY_REPORT</span></div>
                <div class="stat-row"><span>CLASS</span> <span class="stat-val">UNCLASSIFIED</span></div>
                <div class="stat-row"><span>PROVENANCE</span> <span class="stat-val" title="72008b8b1a46fd21b1c43dacc74b497f02212380da6ccc848761fa0f95c53362">72008b8b</span></div>
            </div>

            <div class="sidebar-widget">
                <div class="sidebar-title">Sentiment Analysis</div>
                <div class="stat-row"><span>SCORE</span> <span class="stat-val">100/100</span></div>
                <div class="sentiment-bar">
                    <div class="sentiment-fill" style="width: 100%;"></div>
                </div>
            </div>

            <div class="sidebar-widget">
                <div class="sidebar-title">Detected Entities</div>
                <div class="tag-cloud">
                    <a href="market_mayhem_archive_v24.html?search=Cloud" class="tag" style="text-decoration:none; border-color:#666;">Cloud</a><a href="market_mayhem_archive_v24.html?search=EV" class="tag" style="text-decoration:none; border-color:#666;">EV</a><a href="market_mayhem_archive_v24.html?search=Growth" class="tag" style="text-decoration:none; border-color:#666;">Growth</a><a href="market_mayhem_archive_v24.html?search=Tech" class="tag" style="text-decoration:none; border-color:#666;">Tech</a>
                </div>
            </div>

             <div class="sidebar-widget">
                <div class="sidebar-title">Agent Conviction</div>
                 <div class="stat-row"><span>CONFIDENCE</span> <span class="stat-val">50/100</span></div>
                 <div class="sentiment-bar">
                    <div class="sentiment-fill" style="width: 50%; background: #ffff00;"></div>
                </div>
            </div>

            <div class="sidebar-widget">
                <div class="sidebar-title">Semantic Analysis</div>
                 <div class="stat-row"><span>DENSITY</span> <span class="stat-val">51/100</span></div>
                 <div class="stat-row"><span>PROBABILITY</span> <span class="stat-val">50/100</span></div>
            </div>

             <div class="sidebar-widget" style="border-color: #555;">
                <div class="sidebar-title">Reviewer Agent Log</div>
                 <div style="font-size: 0.75rem; color: #ccc; font-style: italic;">
                    "Agent Overseer reviewed this intelligence. Verdict: VALIDATED. Sentiment alignment: 100/100. Cross-reference with knowledge graph completed."
                </div>
                <div class="stat-row" style="margin-top:10px;"><span>QUALITY SCORE</span> <span class="stat-val">100/100</span></div>
            </div>

             <div class="sidebar-widget">
                <div class="sidebar-title">Contributing Agents</div>
                 <div style="display:flex; flex-direction:column; gap:5px;">
                    <div style="font-size:0.75rem; color:#666;">System Core</div>
                </div>
            </div>
        </aside>
    </div>

    <textarea id="hidden-raw-data" style="display:none;">{
  "title": "Untitled Report",
  "date": "2025-02-21",
  "summary": "The software industry encompasses a vast array of businesses that develop, produce, and distribute software for various purposes, including operating systems, applications, and cloud-based services. T...",
  "type": "COMPANY_REPORT",
  "full_body": "<h2>Industry Overview</h2><p>The software industry encompasses a vast array of businesses that develop, produce, and distribute software for various purposes, including operating systems, applications, and cloud-based services. This industry is a major driver of technological innovation and plays a critical role in the global economy, transforming how businesses operate and individuals interact with technology.</p>\n<h2>Key Trends</h2><h2>Growth Drivers</h2><h2>Challenges</h2><h2>Opportunities</h2><h2>Peer Group Analysis</h2><ul><li>Revenue Growth</li><li>Profitability (Operating Margin)</li><li>Market Share</li><li>R&D Investment</li><li>Valuation (P/E Ratio)</li></ul><h2>Key Terms and Metrics</h2><h2>Investment Ideas</h2>",
  "sentiment_score": 100,
  "entities": {
    "tickers": [],
    "agents": [],
    "sovereigns": [],
    "keywords": [
      "Cloud",
      "EV",
      "Growth",
      "Tech"
    ]
  },
  "provenance_hash": "72008b8b1a46fd21b1c43dacc74b497f02212380da6ccc848761fa0f95c53362",
  "filename": "software_industry_report.html",
  "is_sourced": true,
  "metrics_json": "{}",
  "source_priority": 2,
  "conviction": 50,
  "semantic_score": 51,
  "probability": 50,
  "outlook_score": 10,
  "critique": "Agent Overseer reviewed this intelligence. Verdict: VALIDATED. Sentiment alignment: 100/100. Cross-reference with knowledge graph completed."
}</textarea>

    <script>
        // Chart Injection Logic
        const metricsData = {};
        const crisisData = {"2008_LEHMAN": {"scenario": "2008_LEHMAN", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30], "market": [100.0, 100.36, 103.45, 111.1, 113.58, 115.21, 125.18, 117.98, 105.47, 99.48, 95.17, 90.88, 89.06, 81.17, 74.69, 87.43, 97.92, 86.85, 85.24, 80.38, 73.07, 62.98, 61.77, 61.29, 60.83, 55.35, 51.41, 50.4, 52.44, 46.19], "portfolio": [100.0, 101.94, 104.72, 116.17, 124.91, 127.68, 147.59, 131.26, 111.59, 100.3, 94.12, 81.6, 82.95, 75.13, 68.43, 89.94, 108.44, 87.28, 91.08, 84.3, 76.29, 62.05, 59.98, 57.02, 56.43, 47.9, 44.74, 44.38, 48.41, 40.54], "metrics": {"market": {"max_drawdown": 63.1, "volatility": 114.84, "total_return": -53.81}, "portfolio": {"max_drawdown": 72.53, "volatility": 187.99, "total_return": -59.46}}}, "1987_BLACK_MONDAY": {"scenario": "1987_BLACK_MONDAY", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20], "market": [100.0, 111.16, 132.24, 135.68, 141.45, 116.22, 102.77, 94.42, 95.2, 87.6, 90.62, 93.03, 92.53, 88.96, 85.72, 85.98, 75.24, 76.62, 86.64, 88.81], "portfolio": [100.0, 114.42, 149.47, 162.96, 171.75, 123.75, 96.74, 83.49, 85.55, 71.74, 80.08, 82.69, 83.67, 77.72, 74.72, 75.93, 65.52, 70.15, 82.43, 81.37], "metrics": {"market": {"max_drawdown": 46.81, "volatility": 139.85, "total_return": -11.19}, "portfolio": {"max_drawdown": 61.85, "volatility": 222.41, "total_return": -18.63}}}, "2000_DOTCOM_BUBBLE": {"scenario": "2000_DOTCOM_BUBBLE", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45], "market": [100.0, 103.65, 111.39, 114.2, 112.81, 105.46, 106.57, 102.52, 101.34, 92.45, 105.58, 96.33, 93.43, 85.34, 92.15, 97.97, 88.32, 80.84, 82.06, 75.22, 80.11, 75.94, 80.7, 74.39, 77.84, 83.1, 83.05, 80.04, 83.11, 84.91, 83.8, 89.52, 91.74, 95.01, 87.9, 83.12, 81.65, 82.24, 82.18, 84.06, 80.61, 78.22, 79.57, 79.29, 83.73], "portfolio": [100.0, 103.48, 114.35, 117.09, 117.25, 101.69, 97.63, 90.16, 85.75, 69.15, 80.32, 69.01, 66.92, 59.12, 68.59, 77.29, 67.16, 57.54, 59.36, 51.37, 53.75, 50.8, 57.28, 52.16, 56.25, 62.37, 61.56, 57.04, 60.44, 63.01, 60.75, 66.91, 71.23, 75.52, 66.82, 58.92, 56.57, 55.4, 54.01, 56.05, 50.96, 48.04, 48.35, 48.0, 52.83], "metrics": {"market": {"max_drawdown": 34.86, "volatility": 89.81, "total_return": -16.27}, "portfolio": {"max_drawdown": 59.06, "volatility": 144.17, "total_return": -47.17}}}, "2020_COVID": {"scenario": "2020_COVID", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40], "market": [100.0, 96.44, 92.23, 94.41, 97.41, 100.28, 93.99, 95.08, 90.96, 94.26, 89.58, 88.14, 93.0, 90.43, 79.68, 90.27, 83.42, 73.43, 71.63, 55.58, 44.71, 49.25, 48.07, 62.02, 59.11, 58.95, 52.42, 54.22, 51.58, 49.37, 50.61, 51.31, 50.54, 53.43, 52.26, 48.26, 54.39, 54.08, 54.66, 56.71], "portfolio": [100.0, 92.63, 83.57, 85.96, 92.38, 97.58, 89.29, 90.48, 90.87, 98.92, 90.06, 89.03, 94.07, 87.31, 69.43, 83.78, 74.78, 64.12, 63.27, 46.61, 30.18, 34.68, 31.5, 43.73, 40.96, 38.74, 32.29, 33.56, 31.29, 28.35, 28.89, 29.75, 29.42, 32.29, 30.76, 28.15, 33.3, 31.24, 31.65, 34.2], "metrics": {"market": {"max_drawdown": 55.41, "volatility": 139.06, "total_return": -43.29}, "portfolio": {"max_drawdown": 71.85, "volatility": 204.68, "total_return": -65.8}}}, "2022_INFLATION_SHOCK": {"scenario": "2022_INFLATION_SHOCK", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60], "market": [100.0, 99.81, 94.82, 94.82, 93.0, 85.11, 87.69, 84.07, 84.66, 76.75, 75.12, 75.55, 74.87, 75.88, 71.39, 70.93, 71.93, 66.99, 62.45, 64.7, 62.86, 59.8, 57.69, 55.05, 55.56, 59.84, 60.73, 62.46, 62.36, 43.65, 41.15, 37.25, 35.92, 34.16, 34.58, 32.75, 34.85, 36.77, 36.63, 34.96, 35.2, 37.06, 39.21, 38.86, 39.02, 40.21, 40.42, 40.77, 40.74, 41.39, 39.43, 40.08, 40.35, 42.29, 40.56, 39.65, 40.08, 39.94, 40.19, 42.41], "portfolio": [100.0, 100.23, 92.2, 91.55, 85.76, 75.46, 77.82, 71.04, 72.06, 61.41, 61.32, 61.71, 61.7, 60.47, 54.62, 52.58, 50.81, 44.76, 39.61, 42.65, 39.64, 37.97, 36.03, 32.48, 32.91, 37.06, 38.97, 42.13, 41.44, 20.93, 19.37, 16.76, 16.63, 14.65, 14.44, 12.73, 14.18, 15.46, 15.5, 14.61, 15.3, 16.25, 17.12, 17.35, 16.6, 16.85, 16.65, 16.99, 16.23, 16.96, 15.46, 15.86, 16.24, 17.59, 16.09, 15.35, 15.74, 15.87, 15.67, 17.28], "metrics": {"market": {"max_drawdown": 67.25, "volatility": 86.84, "total_return": -57.59}, "portfolio": {"max_drawdown": 87.3, "volatility": 144.01, "total_return": -82.72}}}, "2025_AI_SHOCK": {"scenario": "2025_AI_SHOCK", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35], "market": [100.0, 92.44, 73.16, 73.67, 73.02, 66.08, 56.79, 57.76, 60.56, 73.28, 63.93, 59.88, 58.14, 58.54, 68.02, 63.06, 68.34, 61.16, 67.77, 62.74, 53.66, 44.4, 46.67, 47.99, 44.27, 44.65, 44.36, 41.76, 43.63, 37.23, 28.18, 26.01, 26.53, 22.91, 20.98], "portfolio": [100.0, 89.52, 59.81, 60.14, 58.01, 50.7, 41.5, 42.76, 43.02, 56.64, 46.43, 43.24, 40.87, 43.46, 55.54, 49.03, 56.31, 43.35, 52.53, 46.84, 35.76, 29.17, 31.37, 31.38, 27.48, 27.4, 25.94, 23.87, 26.05, 19.81, 13.2, 11.97, 12.64, 10.49, 8.81], "metrics": {"market": {"max_drawdown": 79.02, "volatility": 158.15, "total_return": -79.02}, "portfolio": {"max_drawdown": 91.19, "volatility": 242.44, "total_return": -91.19}}}};

        // --- Metrics Chart ---
        if (metricsData && Object.keys(metricsData).length > 0) {
            const ctx = document.getElementById('financialChart');
            const container = document.getElementById('financialChartContainer');

            // Basic parsing of metrics structure (assuming flat or Year->Val)
            let labels = [];
            let values = [];
            let labelName = "Metric";

            // Try to find a timeseries
            for (const [key, val] of Object.entries(metricsData)) {
                if (typeof val === 'object') {
                    // Likely year -> value
                    labels = Object.keys(val);
                    values = Object.values(val).map(v => parseFloat(v.replace(/[^0-9.-]/g, '')));
                    labelName = key;
                    break;
                }
            }

            if (labels.length > 0) {
                container.style.display = 'block';
                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: labelName,
                            data: values,
                            backgroundColor: 'rgba(204, 0, 0, 0.5)',
                            borderColor: '#cc0000',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { labels: { color: '#ccc' } }
                        },
                        scales: {
                            y: { grid: { color: '#333' }, ticks: { color: '#888' } },
                            x: { grid: { color: '#333' }, ticks: { color: '#888' } }
                        }
                    }
                });
            }
        }

        // --- Crisis Simulation Logic ---
        let crisisChartInstance = null;

        window.renderCrisis = function(scenarioName) {
            if (!crisisData || !crisisData[scenarioName]) return;

            // UI Feedback for Buttons
            document.querySelectorAll('.crisis-btn').forEach(btn => {
                btn.style.borderColor = btn.innerText.includes(scenarioName.split('_')[1]) ? '#cc0000' : '#666';
                btn.style.color = btn.innerText.includes(scenarioName.split('_')[1]) ? '#cc0000' : '#ccc';
            });

            const data = crisisData[scenarioName];

            // Update Metrics Display
            if (data.metrics) {
                const p = data.metrics.portfolio;
                const m = data.metrics.market;

                document.getElementById('port_dd').innerText = p.max_drawdown.toFixed(2) + '%';
                document.getElementById('port_vol').innerText = p.volatility.toFixed(2) + '%';
                document.getElementById('port_ret').innerText = p.total_return.toFixed(2) + '%';

                // Color code return
                document.getElementById('port_ret').style.color = p.total_return >= 0 ? '#00f3ff' : '#ff4444';

                document.getElementById('mkt_dd').innerText = m.max_drawdown.toFixed(2) + '%';
                document.getElementById('mkt_vol').innerText = m.volatility.toFixed(2) + '%';
                document.getElementById('mkt_ret').innerText = m.total_return.toFixed(2) + '%';

                document.getElementById('mkt_ret').style.color = m.total_return >= 0 ? '#ccc' : '#cc0000';
            }

            const ctx = document.getElementById('crisisChart').getContext('2d');

            if (crisisChartInstance) {
                crisisChartInstance.destroy();
            }

            crisisChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: data.labels,
                    datasets: [
                        {
                            label: 'Your Portfolio (Simulated)',
                            data: data.portfolio,
                            borderColor: '#00f3ff',
                            backgroundColor: 'rgba(0, 243, 255, 0.1)',
                            borderWidth: 2,
                            tension: 0.4,
                            pointRadius: 0
                        },
                        {
                            label: 'Market Benchmark',
                            data: data.market,
                            borderColor: '#666',
                            borderDash: [5, 5],
                            borderWidth: 1,
                            pointRadius: 0,
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        mode: 'index',
                        intersect: false,
                    },
                    plugins: {
                        legend: { labels: { color: '#ccc', font: { family: 'JetBrains Mono' } } },
                        title: {
                            display: true,
                            text: 'STRESS TEST SCENARIO: ' + scenarioName.replace(/_/g, ' '),
                            color: '#cc0000',
                            font: { family: 'JetBrains Mono' }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0,0,0,0.8)',
                            titleColor: '#cc0000',
                            bodyColor: '#fff',
                            borderColor: '#333',
                            borderWidth: 1
                        }
                    },
                    scales: {
                        y: {
                            grid: { color: '#333' },
                            ticks: { color: '#888', callback: function(value) { return value + '%'; } }
                        },
                        x: {
                            grid: { color: '#333' },
                            ticks: { display: false }
                        }
                    }
                }
            });
        };

        // Auto-Run Default Crisis if Data Available
        if (crisisData && Object.keys(crisisData).length > 0) {
            document.getElementById('crisisSimContainer').style.display = 'block';

            // Parse URL parameters for ?sim=SCENARIO_NAME
            const urlParams = new URLSearchParams(window.location.search);
            const simParam = urlParams.get('sim');

            // slight delay to ensure Chart.js loaded
            setTimeout(() => {
                if (simParam && crisisData[simParam]) {
                    renderCrisis(simParam);
                    // Scroll to container
                    document.getElementById('crisisSimContainer').scrollIntoView({ behavior: 'smooth' });
                } else {
                    renderCrisis('2008_LEHMAN');
                }
            }, 100);
        }
    </script>
</body>
</html>