<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADAM v23.5 :: 2022 Year in Review: Navigating a Turbulent Market</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/market_mayhem_tiers.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@300;400;600;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/nav.js" defer></script>
    <script src="js/market_mayhem_viewer.js" defer></script>
</head>
<body class="tier-high">

    <div id="system2-overlay" class="system2-overlay">
        <div class="system2-terminal">
            <div id="sys2-content"></div>
        </div>
    </div>

    <div id="toast-container" class="cyber-toast-container"></div>

    <div id="raw-source-modal" class="raw-source-modal">
        <div class="raw-source-header">
            <span>SOURCE_DATA.JSON</span>
            <span style="cursor:pointer; color:#cc0000;" onclick="toggleSource()">[CLOSE]</span>
        </div>
        <div class="raw-source-content" id="raw-source-content"></div>
    </div>

    <div class="doc-toolbar" style="display: flex;">
        <div class="toolbar-item" onclick="window.location.href='market_mayhem_archive_v24.html'"><strong>FILE</strong></div>
        <div class="toolbar-item" onclick="toggleRedactionMode()">REDACT</div>
        <div class="toolbar-item" onclick="printReport()">PRINT</div>
        <div class="toolbar-item" onclick="shareReport()">SHARE</div>
        <div class="toolbar-item" onclick="downloadReport()">DOWNLOAD</div>
        <div class="toolbar-item" onclick="toggleTheme()">VIEW</div>
        <div class="toolbar-item" onclick="showToast('INSERT: PERMISSION DENIED')">INSERT</div>
        <div class="toolbar-item" onclick="showToast('FORMAT: LOCKED')">FORMAT</div>
        <div class="toolbar-item" onclick="runVerification()" style="color: #0078d7;"><strong>VERIFY</strong></div>
        <div style="flex-grow:1;"></div>
        <div class="toolbar-item" style="color:#666;">ADAM_V26_EDITOR</div>
    </div>

    <div style="max-width: 1400px; margin: 0 auto; padding: 10px 20px; display:flex; justify-content:space-between; align-items:center; display: none;">
        <a href="market_mayhem_archive_v24.html" class="cyber-btn">&larr; RETURN TO ARCHIVE</a>
        <div style="font-family:'JetBrains Mono'; font-size:0.7rem; color:#666;">SECURE CONNECTION ESTABLISHED</div>
    </div>

    <div class="newsletter-wrapper">
        <div class="paper-sheet" id="paper-sheet">

            <div id="top-secret-stamp" class="top-secret-stamp">TOP SECRET</div>

            <div class="doc-header-ui" style="display: flex;">
                <span id="verification-status">CONFIDENTIAL // SYSTEM 2 REVIEW</span>
                <span>314d1cfd</span>
            </div>

            <div style="display:flex; justify-content:space-between; font-family:'JetBrains Mono'; font-size:0.8rem; color:#666; margin-bottom:20px; margin-top: 20px;">
                <span>2023-01-01</span>
                <span>ID: 314d1cfd</span>
            </div>

            <h1 class="title">2022 Year in Review: Navigating a Turbulent Market</h1>

            <div class="doc-metadata-panel" style="display: grid;">
                <div class="doc-metadata-item"><strong>Classification</strong>UNCLASSIFIED</div>
                <div class="doc-metadata-item"><strong>Conviction</strong>60/100</div>
                <div class="doc-metadata-item"><strong>Sentiment</strong>73/100</div>
                <div class="doc-metadata-item"><strong>Reviewer</strong>Risk_Engine</div>
            </div>

            <div id="financialChartContainer" style="display:none; margin-bottom: 30px;">
                <canvas id="financialChart"></canvas>
            </div>

            <div id="crisisSimContainer" style="display:none; margin-bottom: 30px; border: 1px solid #cc0000; padding: 20px; background: rgba(50, 0, 0, 0.2);">
                <h3 style="color: #cc0000; margin-top: 0; font-family: 'JetBrains Mono'; border-bottom: 1px solid #cc0000; padding-bottom: 10px; margin-bottom: 20px;">CRISIS SIMULATOR // STRESS TEST</h3>

                <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px; margin-bottom: 20px;">
                    <div class="crisis-btn" onclick="renderCrisis('2008_LEHMAN')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2008 LEHMAN
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('1987_BLACK_MONDAY')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        1987 BLACK MON
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('2000_DOTCOM_BUBBLE')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2000 DOTCOM
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('2020_COVID')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2020 PANDEMIC
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('2022_INFLATION_SHOCK')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2022 INFLATION
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('2025_AI_SHOCK')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2025 AI SHOCK
                    </div>
                </div>

                <div style="height: 300px; position: relative;">
                    <canvas id="crisisChart"></canvas>
                </div>

                <div id="crisisMetrics" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px; font-family: 'JetBrains Mono'; font-size: 0.8rem; color: #ccc;">
                    <div style="border: 1px solid #00f3ff; padding: 10px; background: rgba(0, 243, 255, 0.05);">
                        <div style="color: #00f3ff; border-bottom: 1px solid #00f3ff; margin-bottom: 10px; padding-bottom: 5px; font-weight: bold;">PORTFOLIO PERFORMANCE</div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;"><span>MAX DRAWDOWN:</span> <span id="port_dd" style="color: #fff;">0.00%</span></div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;"><span>VOLATILITY (ANN):</span> <span id="port_vol" style="color: #fff;">0.00%</span></div>
                        <div style="display: flex; justify-content: space-between;"><span>TOTAL RETURN:</span> <span id="port_ret" style="color: #fff;">0.00%</span></div>
                    </div>
                    <div style="border: 1px solid #666; padding: 10px; background: rgba(100, 100, 100, 0.1);">
                        <div style="color: #888; border-bottom: 1px solid #666; margin-bottom: 10px; padding-bottom: 5px; font-weight: bold;">MARKET BENCHMARK</div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;"><span>MAX DRAWDOWN:</span> <span id="mkt_dd" style="color: #ccc;">0.00%</span></div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;"><span>VOLATILITY (ANN):</span> <span id="mkt_vol" style="color: #ccc;">0.00%</span></div>
                        <div style="display: flex; justify-content: space-between;"><span>TOTAL RETURN:</span> <span id="mkt_ret" style="color: #ccc;">0.00%</span></div>
                    </div>
                </div>

                <div style="font-size: 0.7rem; color: #888; margin-top: 15px; font-style: italic;">
                    * Hypothetical performance based on portfolio beta and current risk profile. PAST PERFORMANCE IS NOT INDICATIVE OF FUTURE RESULTS.
                </div>
            </div>

            <div id="document-body">
                <h2>Market Overview</h2><p>2022 was a challenging year for investors, marked by heightened volatility, rising inflation, and geopolitical tensions. Major stock indices experienced significant declines, with the S&P 500 ending the year down 19.4%. The technology sector was particularly hard hit, as rising interest rates and slowing economic growth weighed on valuations.</p>
<h2>Major Themes and Trends</h2><p>Several key themes and trends shaped the market in 2022: <em> <strong>Inflation:</strong> Inflation surged to multi-decade highs, driven by supply chain disruptions, strong consumer demand, and expansionary monetary policies. </em> <strong>Rising Interest Rates:</strong>  Central banks responded to inflation by aggressively raising interest rates, leading to increased borrowing costs and tighter financial conditions. <em> <strong>Geopolitical Risks:</strong> The war in Ukraine, tensions between the US and China, and political instability in several regions added to market uncertainty. </em> <strong>Energy Crisis:</strong>  The energy crisis, triggered by the war in Ukraine and supply constraints, led to soaring energy prices and concerns about economic growth. <em> <strong>Shifting Consumer Behavior:</strong>  Consumer spending patterns shifted as inflation and economic uncertainty weighed on discretionary spending. </em> <strong>Technological Innovation:</strong>  Despite market challenges, technological innovation continued at a rapid pace, with advancements in artificial intelligence, cloud computing, and renewable energy.</p>
<h2>Industry Performance</h2><p>Industry performance was mixed in 2022: <em> <strong>Energy:</strong> The energy sector was the top performer, benefiting from high energy prices. </em> <strong>Utilities:</strong>  Utilities also performed relatively well, as they are considered defensive investments in times of economic uncertainty. <em> <strong>Consumer Staples:</strong>  Consumer staples companies, which provide essential goods and services, also showed resilience. </em> <strong>Technology:</strong>  The technology sector was the worst performer, as valuations declined sharply. * <strong>Consumer Discretionary:</strong>  Consumer discretionary companies, which are sensitive to economic conditions, also faced headwinds.</p>
<h2>Top Performers</h2><p>Some of the top-performing companies in 2022 included: <em> <strong>ExxonMobil (XOM):</strong>  Benefited from high oil prices. </em> <strong>Chevron (CVX):</strong>  Another energy giant that profited from the energy crisis. <em> <strong>NextEra Energy (NEE):</strong>  A leading renewable energy company. </em> <strong>PepsiCo (PEP):</strong>  A consumer staples giant with strong brand recognition. * <strong>Dollar General (DG):</strong>  A discount retailer that benefited from value-conscious consumers.</p>
<h2>Portfolio Construction and Optimization</h2><p>In a volatile and uncertain market like 2022, portfolio construction and optimization are crucial. Investors should consider: <em> <strong>Diversification:</strong>  Diversifying across asset classes, sectors, and geographies to reduce risk. </em> <strong>Risk Management:</strong>  Implementing risk management strategies, such as hedging or position sizing, to mitigate potential losses. <em> <strong>Value Investing:</strong>  Focusing on undervalued companies with strong fundamentals. </em> <strong>Long-Term Perspective:</strong>  Maintaining a long-term perspective and avoiding impulsive decisions based on short-term market fluctuations.</p>
<h2>Looking Ahead</h2><p>While 2022 presented significant challenges, it also created opportunities for investors. As we move forward, it's essential to stay informed about market trends, assess risks carefully, and maintain a disciplined investment approach. Adam v15.4 can assist investors in navigating the complexities of the market and making informed decisions.</p>

            </div>

            <div class="provenance-log">
                <div class="log-entry">
                    <span>> HASH_CHECK</span>
                    <span style="color:var(--terminal-green);">314d1cfdda9661921873263aaec4bc34da923be44c0c6e89fa1a719146368938</span>
                </div>
                <div class="log-entry">
                    <span>> SENTIMENT_SCAN</span>
                    <span>73 (DENSITY: 44)</span>
                </div>
                <div class="log-entry">
                    <span>> CONVICTION_LOCK</span>
                    <span>60%</span>
                </div>
                <div class="log-entry">
                    <span>> CRITIQUE_LOG</span>
                    <span>"Agent Risk_Engine reviewed this intelligence. Verdict: REVIEW_REQUIRED. Sentiment alignment: 73/100. Cross-reference with knowledge graph completed."</span>
                </div>
            </div>

            <a href="#" class="source-jump-btn" onclick="toggleSource(); return false;" title="View Source JSON">JUMP TO SOURCE</a>

            <div style="margin-top: 40px; border-top: 1px solid #ccc; padding-top: 20px; font-style: italic; color: #666;">
                End of Transmission.
            </div>
        </div>

        <aside class="cyber-sidebar">
            <div class="sidebar-widget">
                <div class="sidebar-title">Intelligence Metadata</div>
                <div class="stat-row"><span>DATE</span> <span class="stat-val">2023-01-01</span></div>
                <div class="stat-row"><span>TYPE</span> <span class="stat-val">MARKET_OUTLOOK</span></div>
                <div class="stat-row"><span>CLASS</span> <span class="stat-val">UNCLASSIFIED</span></div>
                <div class="stat-row"><span>PROVENANCE</span> <span class="stat-val" title="314d1cfdda9661921873263aaec4bc34da923be44c0c6e89fa1a719146368938">314d1cfd</span></div>
            </div>

            <div class="sidebar-widget">
                <div class="sidebar-title">Sentiment Analysis</div>
                <div class="stat-row"><span>SCORE</span> <span class="stat-val">73/100</span></div>
                <div class="sentiment-bar">
                    <div class="sentiment-fill" style="width: 73%;"></div>
                </div>
            </div>

            <div class="sidebar-widget">
                <div class="sidebar-title">Detected Entities</div>
                <div class="tag-cloud">
                    <a href="market_mayhem_archive_v24.html?search=CN_PBOC" class="tag" style="text-decoration:none;">CN_PBOC</a><a href="market_mayhem_archive_v24.html?search=US_FED" class="tag" style="text-decoration:none;">US_FED</a><a href="market_mayhem_archive_v24.html?search=AI" class="tag" style="text-decoration:none; border-color:#666;">AI</a><a href="market_mayhem_archive_v24.html?search=Banks" class="tag" style="text-decoration:none; border-color:#666;">Banks</a><a href="market_mayhem_archive_v24.html?search=Cloud" class="tag" style="text-decoration:none; border-color:#666;">Cloud</a><a href="market_mayhem_archive_v24.html?search=EV" class="tag" style="text-decoration:none; border-color:#666;">EV</a><a href="market_mayhem_archive_v24.html?search=Energy" class="tag" style="text-decoration:none; border-color:#666;">Energy</a>
                </div>
            </div>

             <div class="sidebar-widget">
                <div class="sidebar-title">Agent Conviction</div>
                 <div class="stat-row"><span>CONFIDENCE</span> <span class="stat-val">60/100</span></div>
                 <div class="sentiment-bar">
                    <div class="sentiment-fill" style="width: 60%; background: #ffff00;"></div>
                </div>
            </div>

            <div class="sidebar-widget">
                <div class="sidebar-title">Semantic Analysis</div>
                 <div class="stat-row"><span>DENSITY</span> <span class="stat-val">44/100</span></div>
                 <div class="stat-row"><span>PROBABILITY</span> <span class="stat-val">80/100</span></div>
            </div>

             <div class="sidebar-widget" style="border-color: #555;">
                <div class="sidebar-title">Reviewer Agent Log</div>
                 <div style="font-size: 0.75rem; color: #ccc; font-style: italic;">
                    "Agent Risk_Engine reviewed this intelligence. Verdict: REVIEW_REQUIRED. Sentiment alignment: 73/100. Cross-reference with knowledge graph completed."
                </div>
                <div class="stat-row" style="margin-top:10px;"><span>QUALITY SCORE</span> <span class="stat-val">100/100</span></div>
            </div>

             <div class="sidebar-widget">
                <div class="sidebar-title">Contributing Agents</div>
                 <div style="display:flex; flex-direction:column; gap:5px;">
                    <div style="font-size:0.75rem; color:#666;">System Core</div>
                </div>
            </div>
        </aside>
    </div>

    <textarea id="hidden-raw-data" style="display:none;">{
  "title": "2022 Year in Review: Navigating a Turbulent Market",
  "date": "2023-01-01",
  "summary": "2022 was a challenging year for investors, marked by heightened volatility, rising inflation, and geopolitical tensions. Major stock indices experienced significant declines, with the S&P 500 ending t...",
  "type": "MARKET_OUTLOOK",
  "full_body": "<h2>Market Overview</h2><p>2022 was a challenging year for investors, marked by heightened volatility, rising inflation, and geopolitical tensions. Major stock indices experienced significant declines, with the S&P 500 ending the year down 19.4%. The technology sector was particularly hard hit, as rising interest rates and slowing economic growth weighed on valuations.</p>\n<h2>Major Themes and Trends</h2><p>Several key themes and trends shaped the market in 2022: <em> <strong>Inflation:</strong> Inflation surged to multi-decade highs, driven by supply chain disruptions, strong consumer demand, and expansionary monetary policies. </em> <strong>Rising Interest Rates:</strong>  Central banks responded to inflation by aggressively raising interest rates, leading to increased borrowing costs and tighter financial conditions. <em> <strong>Geopolitical Risks:</strong> The war in Ukraine, tensions between the US and China, and political instability in several regions added to market uncertainty. </em> <strong>Energy Crisis:</strong>  The energy crisis, triggered by the war in Ukraine and supply constraints, led to soaring energy prices and concerns about economic growth. <em> <strong>Shifting Consumer Behavior:</strong>  Consumer spending patterns shifted as inflation and economic uncertainty weighed on discretionary spending. </em> <strong>Technological Innovation:</strong>  Despite market challenges, technological innovation continued at a rapid pace, with advancements in artificial intelligence, cloud computing, and renewable energy.</p>\n<h2>Industry Performance</h2><p>Industry performance was mixed in 2022: <em> <strong>Energy:</strong> The energy sector was the top performer, benefiting from high energy prices. </em> <strong>Utilities:</strong>  Utilities also performed relatively well, as they are considered defensive investments in times of economic uncertainty. <em> <strong>Consumer Staples:</strong>  Consumer staples companies, which provide essential goods and services, also showed resilience. </em> <strong>Technology:</strong>  The technology sector was the worst performer, as valuations declined sharply. * <strong>Consumer Discretionary:</strong>  Consumer discretionary companies, which are sensitive to economic conditions, also faced headwinds.</p>\n<h2>Top Performers</h2><p>Some of the top-performing companies in 2022 included: <em> <strong>ExxonMobil (XOM):</strong>  Benefited from high oil prices. </em> <strong>Chevron (CVX):</strong>  Another energy giant that profited from the energy crisis. <em> <strong>NextEra Energy (NEE):</strong>  A leading renewable energy company. </em> <strong>PepsiCo (PEP):</strong>  A consumer staples giant with strong brand recognition. * <strong>Dollar General (DG):</strong>  A discount retailer that benefited from value-conscious consumers.</p>\n<h2>Portfolio Construction and Optimization</h2><p>In a volatile and uncertain market like 2022, portfolio construction and optimization are crucial. Investors should consider: <em> <strong>Diversification:</strong>  Diversifying across asset classes, sectors, and geographies to reduce risk. </em> <strong>Risk Management:</strong>  Implementing risk management strategies, such as hedging or position sizing, to mitigate potential losses. <em> <strong>Value Investing:</strong>  Focusing on undervalued companies with strong fundamentals. </em> <strong>Long-Term Perspective:</strong>  Maintaining a long-term perspective and avoiding impulsive decisions based on short-term market fluctuations.</p>\n<h2>Looking Ahead</h2><p>While 2022 presented significant challenges, it also created opportunities for investors. As we move forward, it's essential to stay informed about market trends, assess risks carefully, and maintain a disciplined investment approach. Adam v15.4 can assist investors in navigating the complexities of the market and making informed decisions.</p>\n",
  "sentiment_score": 73,
  "entities": {
    "tickers": [],
    "agents": [],
    "sovereigns": [
      "CN_PBOC",
      "US_FED"
    ],
    "keywords": [
      "AI",
      "Banks",
      "Cloud",
      "EV",
      "Energy"
    ]
  },
  "provenance_hash": "314d1cfdda9661921873263aaec4bc34da923be44c0c6e89fa1a719146368938",
  "filename": "2022 Year in Review: Navigating a Turbulent Market.html",
  "is_sourced": true,
  "metrics_json": "{}",
  "source_priority": 2,
  "conviction": 60,
  "semantic_score": 44,
  "probability": 80,
  "outlook_score": 10,
  "critique": "Agent Risk_Engine reviewed this intelligence. Verdict: REVIEW_REQUIRED. Sentiment alignment: 73/100. Cross-reference with knowledge graph completed."
}</textarea>

    <script>
        // Chart Injection Logic
        const metricsData = {};
        const crisisData = {"2008_LEHMAN": {"scenario": "2008_LEHMAN", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30], "market": [100.0, 103.85, 108.04, 110.68, 100.74, 92.2, 94.88, 87.7, 82.8, 71.7, 69.57, 67.67, 72.77, 70.68, 60.21, 47.36, 45.91, 60.03, 53.63, 60.31, 54.33, 51.09, 45.75, 49.2, 47.06, 43.56, 40.88, 40.6, 38.4, 33.52], "portfolio": [100.0, 109.94, 114.76, 116.04, 100.05, 86.63, 90.01, 79.5, 70.73, 52.26, 47.06, 45.47, 49.77, 48.39, 34.21, 24.93, 23.76, 33.17, 26.95, 30.71, 25.81, 23.45, 20.28, 23.48, 20.96, 18.22, 16.35, 16.44, 14.36, 11.52], "metrics": {"market": {"max_drawdown": 69.71, "volatility": 154.45, "total_return": -66.48}, "portfolio": {"max_drawdown": 90.07, "volatility": 228.3, "total_return": -88.48}}}, "1987_BLACK_MONDAY": {"scenario": "1987_BLACK_MONDAY", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20], "market": [100.0, 95.09, 93.73, 89.11, 91.64, 63.92, 58.95, 61.02, 57.23, 34.45, 18.73, 12.87, 16.59, 13.97, 14.56, 15.53, 16.25, 15.03, 12.54, 10.81], "portfolio": [100.0, 94.86, 91.08, 83.8, 90.82, 50.33, 45.09, 46.91, 43.31, 18.88, 5.12, 2.13, 3.06, 2.37, 2.53, 2.74, 2.94, 2.53, 1.97, 1.59], "metrics": {"market": {"max_drawdown": 89.19, "volatility": 277.5, "total_return": -89.19}, "portfolio": {"max_drawdown": 98.41, "volatility": 433.05, "total_return": -98.41}}}, "2000_DOTCOM_BUBBLE": {"scenario": "2000_DOTCOM_BUBBLE", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45], "market": [100.0, 97.44, 88.3, 88.71, 87.05, 84.0, 80.45, 80.57, 88.43, 76.08, 81.98, 89.22, 95.54, 100.55, 93.63, 75.15, 77.62, 86.72, 85.36, 73.17, 71.8, 70.19, 67.1, 64.26, 62.89, 57.14, 59.75, 60.03, 62.49, 64.11, 67.23, 68.57, 71.55, 70.16, 70.68, 67.37, 61.98, 63.9, 61.7, 60.37, 59.91, 56.41, 53.15, 54.34, 54.73], "portfolio": [100.0, 92.63, 78.27, 80.42, 79.05, 78.02, 71.38, 70.03, 80.42, 61.52, 66.88, 72.95, 81.7, 86.47, 77.29, 54.49, 56.89, 64.18, 65.09, 49.84, 46.91, 45.56, 41.78, 39.96, 37.75, 32.78, 34.85, 34.87, 36.38, 38.2, 39.58, 40.87, 43.5, 41.14, 42.99, 38.56, 34.71, 36.29, 33.71, 32.92, 32.28, 28.22, 24.89, 25.43, 24.8], "metrics": {"market": {"max_drawdown": 47.14, "volatility": 101.05, "total_return": -45.27}, "portfolio": {"max_drawdown": 75.2, "volatility": 152.01, "total_return": -75.2}}}, "2020_COVID": {"scenario": "2020_COVID", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40], "market": [100.0, 95.36, 95.26, 95.26, 91.39, 81.27, 83.64, 87.58, 88.04, 85.3, 74.31, 73.47, 65.47, 57.56, 63.98, 66.08, 69.14, 66.2, 65.08, 63.08, 60.85, 48.0, 52.27, 35.34, 36.12, 36.71, 37.22, 31.15, 30.0, 29.95, 26.87, 27.92, 25.85, 24.13, 24.89, 25.23, 23.67, 22.26, 21.43, 20.21], "portfolio": [100.0, 88.31, 88.83, 88.98, 87.13, 71.09, 75.37, 78.38, 80.26, 73.73, 60.02, 58.39, 49.84, 39.15, 46.49, 48.9, 51.27, 45.07, 48.22, 44.66, 43.11, 30.43, 32.93, 15.98, 16.49, 17.09, 17.41, 13.67, 13.11, 12.99, 11.15, 11.63, 10.2, 9.01, 9.26, 9.78, 8.88, 7.92, 7.4, 6.52], "metrics": {"market": {"max_drawdown": 79.79, "volatility": 127.82, "total_return": -79.79}, "portfolio": {"max_drawdown": 93.48, "volatility": 196.98, "total_return": -93.48}}}, "2022_INFLATION_SHOCK": {"scenario": "2022_INFLATION_SHOCK", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60], "market": [100.0, 95.59, 91.89, 90.36, 95.87, 92.95, 90.49, 98.2, 97.43, 102.77, 95.76, 89.41, 85.47, 89.18, 87.83, 90.19, 90.41, 90.08, 94.07, 89.92, 89.36, 81.52, 79.27, 78.05, 77.23, 73.03, 75.01, 68.99, 65.16, 52.14, 46.2, 43.05, 43.18, 43.47, 45.18, 43.5, 43.26, 41.53, 44.56, 46.1, 44.33, 43.49, 42.99, 43.13, 43.18, 43.99, 46.15, 46.8, 46.98, 44.38, 45.61, 42.59, 43.57, 42.54, 41.75, 42.97, 43.27, 44.48, 43.41, 41.88], "portfolio": [100.0, 87.44, 80.99, 80.57, 87.48, 85.84, 80.2, 91.74, 88.96, 95.93, 87.27, 78.94, 75.01, 78.86, 78.25, 79.12, 77.67, 80.63, 82.32, 77.28, 79.75, 70.22, 63.55, 64.12, 61.93, 58.51, 60.31, 55.5, 53.27, 40.06, 29.89, 27.01, 25.67, 27.11, 28.32, 27.06, 25.92, 23.69, 26.02, 27.01, 27.02, 26.26, 26.29, 25.98, 25.01, 26.31, 28.3, 27.94, 27.88, 25.85, 27.84, 24.19, 24.63, 23.22, 22.66, 22.97, 22.84, 24.06, 23.7, 22.0], "metrics": {"market": {"max_drawdown": 59.59, "volatility": 76.03, "total_return": -58.12}, "portfolio": {"max_drawdown": 78.0, "volatility": 115.87, "total_return": -78.0}}}, "2025_AI_SHOCK": {"scenario": "2025_AI_SHOCK", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35], "market": [100.0, 98.91, 85.35, 79.42, 75.03, 71.57, 62.72, 56.32, 51.72, 40.82, 37.85, 38.08, 40.15, 38.52, 35.21, 37.76, 37.42, 32.95, 21.08, 25.15, 23.8, 13.63, 13.83, 14.99, 13.05, 14.01, 14.58, 16.54, 14.21, 12.93, 11.73, 10.33, 11.08, 11.5, 11.44], "portfolio": [100.0, 100.58, 78.2, 71.28, 65.36, 59.95, 49.1, 42.72, 38.3, 26.78, 25.6, 26.22, 27.96, 26.67, 23.3, 26.25, 25.74, 21.68, 10.8, 14.27, 12.47, 4.41, 4.44, 5.01, 4.4, 4.98, 5.47, 6.62, 5.21, 4.63, 3.89, 3.02, 3.48, 3.65, 3.61], "metrics": {"market": {"max_drawdown": 89.67, "volatility": 193.76, "total_return": -88.56}, "portfolio": {"max_drawdown": 97.0, "volatility": 294.75, "total_return": -96.39}}}};

        // --- Metrics Chart ---
        if (metricsData && Object.keys(metricsData).length > 0) {
            const ctx = document.getElementById('financialChart');
            const container = document.getElementById('financialChartContainer');

            // Basic parsing of metrics structure (assuming flat or Year->Val)
            let labels = [];
            let values = [];
            let labelName = "Metric";

            // Try to find a timeseries
            for (const [key, val] of Object.entries(metricsData)) {
                if (typeof val === 'object') {
                    // Likely year -> value
                    labels = Object.keys(val);
                    values = Object.values(val).map(v => parseFloat(v.replace(/[^0-9.-]/g, '')));
                    labelName = key;
                    break;
                }
            }

            if (labels.length > 0) {
                container.style.display = 'block';
                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: labelName,
                            data: values,
                            backgroundColor: 'rgba(204, 0, 0, 0.5)',
                            borderColor: '#cc0000',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { labels: { color: '#ccc' } }
                        },
                        scales: {
                            y: { grid: { color: '#333' }, ticks: { color: '#888' } },
                            x: { grid: { color: '#333' }, ticks: { color: '#888' } }
                        }
                    }
                });
            }
        }

        // --- Crisis Simulation Logic ---
        let crisisChartInstance = null;

        window.renderCrisis = function(scenarioName) {
            if (!crisisData || !crisisData[scenarioName]) return;

            // UI Feedback for Buttons
            document.querySelectorAll('.crisis-btn').forEach(btn => {
                btn.style.borderColor = btn.innerText.includes(scenarioName.split('_')[1]) ? '#cc0000' : '#666';
                btn.style.color = btn.innerText.includes(scenarioName.split('_')[1]) ? '#cc0000' : '#ccc';
            });

            const data = crisisData[scenarioName];

            // Update Metrics Display
            if (data.metrics) {
                const p = data.metrics.portfolio;
                const m = data.metrics.market;

                document.getElementById('port_dd').innerText = p.max_drawdown.toFixed(2) + '%';
                document.getElementById('port_vol').innerText = p.volatility.toFixed(2) + '%';
                document.getElementById('port_ret').innerText = p.total_return.toFixed(2) + '%';

                // Color code return
                document.getElementById('port_ret').style.color = p.total_return >= 0 ? '#00f3ff' : '#ff4444';

                document.getElementById('mkt_dd').innerText = m.max_drawdown.toFixed(2) + '%';
                document.getElementById('mkt_vol').innerText = m.volatility.toFixed(2) + '%';
                document.getElementById('mkt_ret').innerText = m.total_return.toFixed(2) + '%';

                document.getElementById('mkt_ret').style.color = m.total_return >= 0 ? '#ccc' : '#cc0000';
            }

            const ctx = document.getElementById('crisisChart').getContext('2d');

            if (crisisChartInstance) {
                crisisChartInstance.destroy();
            }

            crisisChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: data.labels,
                    datasets: [
                        {
                            label: 'Your Portfolio (Simulated)',
                            data: data.portfolio,
                            borderColor: '#00f3ff',
                            backgroundColor: 'rgba(0, 243, 255, 0.1)',
                            borderWidth: 2,
                            tension: 0.4,
                            pointRadius: 0
                        },
                        {
                            label: 'Market Benchmark',
                            data: data.market,
                            borderColor: '#666',
                            borderDash: [5, 5],
                            borderWidth: 1,
                            pointRadius: 0,
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        mode: 'index',
                        intersect: false,
                    },
                    plugins: {
                        legend: { labels: { color: '#ccc', font: { family: 'JetBrains Mono' } } },
                        title: {
                            display: true,
                            text: 'STRESS TEST SCENARIO: ' + scenarioName.replace(/_/g, ' '),
                            color: '#cc0000',
                            font: { family: 'JetBrains Mono' }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0,0,0,0.8)',
                            titleColor: '#cc0000',
                            bodyColor: '#fff',
                            borderColor: '#333',
                            borderWidth: 1
                        }
                    },
                    scales: {
                        y: {
                            grid: { color: '#333' },
                            ticks: { color: '#888', callback: function(value) { return value + '%'; } }
                        },
                        x: {
                            grid: { color: '#333' },
                            ticks: { display: false }
                        }
                    }
                }
            });
        };

        // Auto-Run Default Crisis if Data Available
        if (crisisData && Object.keys(crisisData).length > 0) {
            document.getElementById('crisisSimContainer').style.display = 'block';

            // Parse URL parameters for ?sim=SCENARIO_NAME
            const urlParams = new URLSearchParams(window.location.search);
            const simParam = urlParams.get('sim');

            // slight delay to ensure Chart.js loaded
            setTimeout(() => {
                if (simParam && crisisData[simParam]) {
                    renderCrisis(simParam);
                    // Scroll to container
                    document.getElementById('crisisSimContainer').scrollIntoView({ behavior: 'smooth' });
                } else {
                    renderCrisis('2008_LEHMAN');
                }
            }, 100);
        }
    </script>
</body>
</html>