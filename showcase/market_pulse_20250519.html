<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADAM v23.5 :: MARKET PULSE // 2025-05-19</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/market_mayhem_tiers.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@300;400;600;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/nav.js" defer></script>
    <script src="js/market_mayhem_viewer.js" defer></script>
</head>
<body class="tier-high">

    <div id="system2-overlay" class="system2-overlay">
        <div class="system2-terminal">
            <div id="sys2-content"></div>
        </div>
    </div>

    <div id="toast-container" class="cyber-toast-container"></div>

    <div id="raw-source-modal" class="raw-source-modal">
        <div class="raw-source-header">
            <span>SOURCE_DATA.JSON</span>
            <span style="cursor:pointer; color:#cc0000;" onclick="toggleSource()">[CLOSE]</span>
        </div>
        <div class="raw-source-content" id="raw-source-content"></div>
    </div>

    <div class="doc-toolbar" style="display: flex;">
        <div class="toolbar-item" onclick="window.location.href='market_mayhem_archive_v24.html'"><strong>FILE</strong></div>
        <div class="toolbar-item" onclick="toggleRedactionMode()">REDACT</div>
        <div class="toolbar-item" onclick="printReport()">PRINT</div>
        <div class="toolbar-item" onclick="shareReport()">SHARE</div>
        <div class="toolbar-item" onclick="downloadReport()">DOWNLOAD</div>
        <div class="toolbar-item" onclick="toggleTheme()">VIEW</div>
        <div class="toolbar-item" onclick="showToast('INSERT: PERMISSION DENIED')">INSERT</div>
        <div class="toolbar-item" onclick="showToast('FORMAT: LOCKED')">FORMAT</div>
        <div class="toolbar-item" onclick="runVerification()" style="color: #0078d7;"><strong>VERIFY</strong></div>
        <div style="flex-grow:1;"></div>
        <div class="toolbar-item" style="color:#666;">ADAM_V26_EDITOR</div>
    </div>

    <div style="max-width: 1400px; margin: 0 auto; padding: 10px 20px; display:flex; justify-content:space-between; align-items:center; display: none;">
        <a href="market_mayhem_archive_v24.html" class="cyber-btn">&larr; RETURN TO ARCHIVE</a>
        <div style="font-family:'JetBrains Mono'; font-size:0.7rem; color:#666;">SECURE CONNECTION ESTABLISHED</div>
    </div>

    <div class="newsletter-wrapper">
        <div class="paper-sheet" id="paper-sheet">

            <div id="top-secret-stamp" class="top-secret-stamp">TOP SECRET</div>

            <div class="doc-header-ui" style="display: flex;">
                <span id="verification-status">CONFIDENTIAL // SYSTEM 2 REVIEW</span>
                <span>5e527838</span>
            </div>

            <div style="display:flex; justify-content:space-between; font-family:'JetBrains Mono'; font-size:0.8rem; color:#666; margin-bottom:20px; margin-top: 20px;">
                <span>2025-05-19</span>
                <span>ID: 5e527838</span>
            </div>

            <h1 class="title">MARKET PULSE // 2025-05-19</h1>

            <div class="doc-metadata-panel" style="display: grid;">
                <div class="doc-metadata-item"><strong>Classification</strong>UNCLASSIFIED</div>
                <div class="doc-metadata-item"><strong>Conviction</strong>50/100</div>
                <div class="doc-metadata-item"><strong>Sentiment</strong>0/100</div>
                <div class="doc-metadata-item"><strong>Reviewer</strong>Sovereign_AI</div>
            </div>

            <div id="financialChartContainer" style="display:none; margin-bottom: 30px;">
                <canvas id="financialChart"></canvas>
            </div>

            <div id="crisisSimContainer" style="display:none; margin-bottom: 30px; border: 1px solid #cc0000; padding: 20px; background: rgba(50, 0, 0, 0.2);">
                <h3 style="color: #cc0000; margin-top: 0; font-family: 'JetBrains Mono'; border-bottom: 1px solid #cc0000; padding-bottom: 10px; margin-bottom: 20px;">CRISIS SIMULATOR // STRESS TEST</h3>

                <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px; margin-bottom: 20px;">
                    <div class="crisis-btn" onclick="renderCrisis('2008_LEHMAN')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2008 LEHMAN
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('1987_BLACK_MONDAY')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        1987 BLACK MON
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('2000_DOTCOM_BUBBLE')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2000 DOTCOM
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('2020_COVID')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2020 PANDEMIC
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('2022_INFLATION_SHOCK')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2022 INFLATION
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('2025_AI_SHOCK')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2025 AI SHOCK
                    </div>
                </div>

                <div style="height: 300px; position: relative;">
                    <canvas id="crisisChart"></canvas>
                </div>

                <div id="crisisMetrics" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px; font-family: 'JetBrains Mono'; font-size: 0.8rem; color: #ccc;">
                    <div style="border: 1px solid #00f3ff; padding: 10px; background: rgba(0, 243, 255, 0.05);">
                        <div style="color: #00f3ff; border-bottom: 1px solid #00f3ff; margin-bottom: 10px; padding-bottom: 5px; font-weight: bold;">PORTFOLIO PERFORMANCE</div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;"><span>MAX DRAWDOWN:</span> <span id="port_dd" style="color: #fff;">0.00%</span></div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;"><span>VOLATILITY (ANN):</span> <span id="port_vol" style="color: #fff;">0.00%</span></div>
                        <div style="display: flex; justify-content: space-between;"><span>TOTAL RETURN:</span> <span id="port_ret" style="color: #fff;">0.00%</span></div>
                    </div>
                    <div style="border: 1px solid #666; padding: 10px; background: rgba(100, 100, 100, 0.1);">
                        <div style="color: #888; border-bottom: 1px solid #666; margin-bottom: 10px; padding-bottom: 5px; font-weight: bold;">MARKET BENCHMARK</div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;"><span>MAX DRAWDOWN:</span> <span id="mkt_dd" style="color: #ccc;">0.00%</span></div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;"><span>VOLATILITY (ANN):</span> <span id="mkt_vol" style="color: #ccc;">0.00%</span></div>
                        <div style="display: flex; justify-content: space-between;"><span>TOTAL RETURN:</span> <span id="mkt_ret" style="color: #ccc;">0.00%</span></div>
                    </div>
                </div>

                <div style="font-size: 0.7rem; color: #888; margin-top: 15px; font-style: italic;">
                    * Hypothetical performance based on portfolio beta and current risk profile. PAST PERFORMANCE IS NOT INDICATIVE OF FUTURE RESULTS.
                </div>
            </div>

            <div id="document-body">
                <strong>Status:</strong> ONLINE
<strong>Clearance:</strong> PUBLIC
<strong>Tone:</strong> CYBER-MINIMALIST
<p>---</p>
<h2>< SYSTEM_OVERVIEW ></h2>
<p>The S&P 500 is testing key resistance at 5,450 as the "AI Rotation" trade broadens beyond semiconductors into software and utilities. Volatility (VIX) remains suppressed (13.2), suggesting complacency or a structured calm before the next macro catalyst (June FOMC).</p>
<h2>< NODES_IN_FOCUS ></h2>
<ul>
<li>  <strong>SECTOR: UTILITIES (XLU)</strong></li>
<li>  <strong>Signal:</strong> +4.2% WTD.</li>
<li>  <strong>Thesis:</strong> "Power is the new Oil." Data center energy demand is driving re-rating of regulated utilities with nuclear exposure.</li>
<li>  <strong>Conviction:</strong> HIGH.</li>
</ul>
<ul>
<li>  <strong>CRYPTO: BITCOIN (BTC)</strong></li>
<li>  <strong>Signal:</strong> Range-bound ($88k - $92k).</li>
<li>  <strong>Thesis:</strong> Institutional accumulation via ETF inflows is offsetting miner capitulation post-halving. Expect breakout if CPI prints < 2.8%.</li>
<li>  <strong>Conviction:</strong> MEDIUM.</li>
</ul>
<ul>
<li>  <strong>MACRO: JAPAN (USD/JPY)</strong></li>
<li>  <strong>Signal:</strong> 158.50 (Intervention Watch).</li>
<li>  <strong>Thesis:</strong> BOJ is cornered. Further yield curve control adjustments are inevitable. Short JGBs remains the "Widowmaker" trade, but the risk/reward is tilting.</li>
<li>  <strong>Conviction:</strong> LOW (High Volatility).</li>
</ul>
<h2>< DATA_STREAM ></h2>
<p>| METRIC | VALUE | DELTA (YoY) |
| :--- | :--- | :--- |
| <strong>US 10Y Yield</strong> | 4.35% | -12bps |
| <strong>Brent Crude</strong> | $82.40 | +3.5% |
| <strong>Gold</strong> | $2,410 | +15.2% |
| <strong>Global Liquidity</strong> | $98.5T | +2.1% |</p>
<h2>< SYNTHESIS ></h2>
<p>Markets are pricing in a "Goldilocks" soft landing, but the divergence between equity valuations (21x fwd P/E) and real rates (2.0%) is expanding. We recommend a barbell strategy: Long AI infrastructure (Hardware/Energy) and Short Consumer Discretionary (High-end retail showing cracks).</p>
<p>> "In the age of information, silence is the most expensive luxury. In the age of AI, compute is the new currency."</p>
<strong>END_TRANSMISSION</strong>

            </div>

            <div class="provenance-log">
                <div class="log-entry">
                    <span>> HASH_CHECK</span>
                    <span style="color:var(--terminal-green);">5e527838fda511c11385f2e2b26c5931351f458f6892c14dd354272ffd0adf14</span>
                </div>
                <div class="log-entry">
                    <span>> SENTIMENT_SCAN</span>
                    <span>0 (DENSITY: 75)</span>
                </div>
                <div class="log-entry">
                    <span>> CONVICTION_LOCK</span>
                    <span>50%</span>
                </div>
                <div class="log-entry">
                    <span>> CRITIQUE_LOG</span>
                    <span>"Agent Sovereign_AI reviewed this intelligence. Verdict: HIGH_CONFIDENCE. Sentiment alignment: 0/100. Cross-reference with knowledge graph completed."</span>
                </div>
            </div>

            <a href="#" class="source-jump-btn" onclick="toggleSource(); return false;" title="View Source JSON">JUMP TO SOURCE</a>

            <div style="margin-top: 40px; border-top: 1px solid #ccc; padding-top: 20px; font-style: italic; color: #666;">
                End of Transmission.
            </div>
        </div>

        <aside class="cyber-sidebar">
            <div class="sidebar-widget">
                <div class="sidebar-title">Intelligence Metadata</div>
                <div class="stat-row"><span>DATE</span> <span class="stat-val">2025-05-19</span></div>
                <div class="stat-row"><span>TYPE</span> <span class="stat-val">NEWSLETTER</span></div>
                <div class="stat-row"><span>CLASS</span> <span class="stat-val">UNCLASSIFIED</span></div>
                <div class="stat-row"><span>PROVENANCE</span> <span class="stat-val" title="5e527838fda511c11385f2e2b26c5931351f458f6892c14dd354272ffd0adf14">5e527838</span></div>
            </div>

            <div class="sidebar-widget">
                <div class="sidebar-title">Sentiment Analysis</div>
                <div class="stat-row"><span>SCORE</span> <span class="stat-val">0/100</span></div>
                <div class="sentiment-bar">
                    <div class="sentiment-fill" style="width: 0%;"></div>
                </div>
            </div>

            <div class="sidebar-widget">
                <div class="sidebar-title">Detected Entities</div>
                <div class="tag-cloud">
                    <a href="market_mayhem_archive_v24.html?search=JP_BOJ" class="tag" style="text-decoration:none;">JP_BOJ</a><a href="market_mayhem_archive_v24.html?search=US_FED" class="tag" style="text-decoration:none;">US_FED</a><a href="market_mayhem_archive_v24.html?search=AI" class="tag" style="text-decoration:none; border-color:#666;">AI</a><a href="market_mayhem_archive_v24.html?search=Bitcoin" class="tag" style="text-decoration:none; border-color:#666;">Bitcoin</a><a href="market_mayhem_archive_v24.html?search=Crypto" class="tag" style="text-decoration:none; border-color:#666;">Crypto</a><a href="market_mayhem_archive_v24.html?search=EV" class="tag" style="text-decoration:none; border-color:#666;">EV</a><a href="market_mayhem_archive_v24.html?search=Energy" class="tag" style="text-decoration:none; border-color:#666;">Energy</a>
                </div>
            </div>

             <div class="sidebar-widget">
                <div class="sidebar-title">Agent Conviction</div>
                 <div class="stat-row"><span>CONFIDENCE</span> <span class="stat-val">50/100</span></div>
                 <div class="sentiment-bar">
                    <div class="sentiment-fill" style="width: 50%; background: #ffff00;"></div>
                </div>
            </div>

            <div class="sidebar-widget">
                <div class="sidebar-title">Semantic Analysis</div>
                 <div class="stat-row"><span>DENSITY</span> <span class="stat-val">75/100</span></div>
                 <div class="stat-row"><span>PROBABILITY</span> <span class="stat-val">70/100</span></div>
            </div>

             <div class="sidebar-widget" style="border-color: #555;">
                <div class="sidebar-title">Reviewer Agent Log</div>
                 <div style="font-size: 0.75rem; color: #ccc; font-style: italic;">
                    "Agent Sovereign_AI reviewed this intelligence. Verdict: HIGH_CONFIDENCE. Sentiment alignment: 0/100. Cross-reference with knowledge graph completed."
                </div>
                <div class="stat-row" style="margin-top:10px;"><span>QUALITY SCORE</span> <span class="stat-val">100/100</span></div>
            </div>

             <div class="sidebar-widget">
                <div class="sidebar-title">Contributing Agents</div>
                 <div style="display:flex; flex-direction:column; gap:5px;">
                    <div style="font-size:0.75rem; color:#666;">System Core</div>
                </div>
            </div>
        </aside>
    </div>

    <textarea id="hidden-raw-data" style="display:none;">{
  "title": "MARKET PULSE // 2025-05-19",
  "date": "2025-05-19",
  "summary": "Market analysis and strategic insights.",
  "type": "NEWSLETTER",
  "full_body": "<strong>Status:</strong> ONLINE\n<strong>Clearance:</strong> PUBLIC\n<strong>Tone:</strong> CYBER-MINIMALIST\n<p>---</p>\n<h2>< SYSTEM_OVERVIEW ></h2>\n<p>The S&P 500 is testing key resistance at 5,450 as the \"AI Rotation\" trade broadens beyond semiconductors into software and utilities. Volatility (VIX) remains suppressed (13.2), suggesting complacency or a structured calm before the next macro catalyst (June FOMC).</p>\n<h2>< NODES_IN_FOCUS ></h2>\n<ul>\n<li>  <strong>SECTOR: UTILITIES (XLU)</strong></li>\n<li>  <strong>Signal:</strong> +4.2% WTD.</li>\n<li>  <strong>Thesis:</strong> \"Power is the new Oil.\" Data center energy demand is driving re-rating of regulated utilities with nuclear exposure.</li>\n<li>  <strong>Conviction:</strong> HIGH.</li>\n</ul>\n<ul>\n<li>  <strong>CRYPTO: BITCOIN (BTC)</strong></li>\n<li>  <strong>Signal:</strong> Range-bound ($88k - $92k).</li>\n<li>  <strong>Thesis:</strong> Institutional accumulation via ETF inflows is offsetting miner capitulation post-halving. Expect breakout if CPI prints < 2.8%.</li>\n<li>  <strong>Conviction:</strong> MEDIUM.</li>\n</ul>\n<ul>\n<li>  <strong>MACRO: JAPAN (USD/JPY)</strong></li>\n<li>  <strong>Signal:</strong> 158.50 (Intervention Watch).</li>\n<li>  <strong>Thesis:</strong> BOJ is cornered. Further yield curve control adjustments are inevitable. Short JGBs remains the \"Widowmaker\" trade, but the risk/reward is tilting.</li>\n<li>  <strong>Conviction:</strong> LOW (High Volatility).</li>\n</ul>\n<h2>< DATA_STREAM ></h2>\n<p>| METRIC | VALUE | DELTA (YoY) |\n| :--- | :--- | :--- |\n| <strong>US 10Y Yield</strong> | 4.35% | -12bps |\n| <strong>Brent Crude</strong> | $82.40 | +3.5% |\n| <strong>Gold</strong> | $2,410 | +15.2% |\n| <strong>Global Liquidity</strong> | $98.5T | +2.1% |</p>\n<h2>< SYNTHESIS ></h2>\n<p>Markets are pricing in a \"Goldilocks\" soft landing, but the divergence between equity valuations (21x fwd P/E) and real rates (2.0%) is expanding. We recommend a barbell strategy: Long AI infrastructure (Hardware/Energy) and Short Consumer Discretionary (High-end retail showing cracks).</p>\n<p>> \"In the age of information, silence is the most expensive luxury. In the age of AI, compute is the new currency.\"</p>\n<strong>END_TRANSMISSION</strong>\n",
  "sentiment_score": 0,
  "entities": {
    "tickers": [],
    "agents": [],
    "sovereigns": [
      "JP_BOJ",
      "US_FED"
    ],
    "keywords": [
      "AI",
      "Bitcoin",
      "Crypto",
      "EV",
      "Energy"
    ]
  },
  "provenance_hash": "5e527838fda511c11385f2e2b26c5931351f458f6892c14dd354272ffd0adf14",
  "filename": "market_pulse_20250519.html",
  "is_sourced": true,
  "metrics_json": "{}",
  "source_priority": 2,
  "conviction": 50,
  "critique": "Agent Sovereign_AI reviewed this intelligence. Verdict: HIGH_CONFIDENCE. Sentiment alignment: 0/100. Cross-reference with knowledge graph completed.",
  "quality": 100,
  "semantic_score": 75,
  "probability": 70,
  "outlook_score": 10
}</textarea>

    <script>
        // Chart Injection Logic
        const metricsData = {};
        const crisisData = {"2008_LEHMAN": {"scenario": "2008_LEHMAN", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30], "market": [100.0, 105.63, 110.45, 111.56, 110.76, 96.67, 92.48, 80.38, 82.86, 80.86, 72.68, 72.78, 74.34, 73.08, 52.12, 50.91, 59.65, 59.45, 61.96, 58.13, 57.2, 58.52, 58.16, 55.98, 48.79, 52.66, 45.53, 46.84, 48.5, 48.87], "portfolio": [100.0, 100.68, 104.35, 107.77, 107.67, 100.72, 96.31, 93.61, 96.42, 93.33, 91.88, 90.98, 92.17, 88.53, 73.43, 77.66, 80.29, 78.28, 78.99, 79.3, 78.99, 77.56, 78.77, 78.14, 72.5, 75.91, 67.29, 66.09, 70.01, 69.15], "metrics": {"market": {"max_drawdown": 59.19, "volatility": 133.22, "total_return": -51.13}, "portfolio": {"max_drawdown": 38.67, "volatility": 77.32, "total_return": -30.85}}}, "1987_BLACK_MONDAY": {"scenario": "1987_BLACK_MONDAY", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20], "market": [100.0, 83.08, 86.2, 84.81, 97.33, 86.22, 83.39, 85.6, 90.31, 53.26, 55.13, 53.62, 47.24, 51.05, 50.79, 44.77, 38.2, 33.36, 30.49, 28.08], "portfolio": [100.0, 90.89, 95.75, 93.17, 101.92, 96.27, 93.69, 91.51, 97.51, 72.25, 80.35, 72.34, 69.93, 72.87, 69.16, 60.26, 56.15, 55.18, 51.69, 51.83], "metrics": {"market": {"max_drawdown": 71.92, "volatility": 187.86, "total_return": -71.92}, "portfolio": {"max_drawdown": 49.28, "volatility": 132.61, "total_return": -48.17}}}, "2000_DOTCOM_BUBBLE": {"scenario": "2000_DOTCOM_BUBBLE", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45], "market": [100.0, 91.93, 91.31, 90.35, 91.93, 85.48, 86.79, 93.37, 96.34, 64.25, 72.41, 63.37, 60.45, 59.39, 61.18, 62.49, 60.92, 60.07, 53.01, 53.86, 50.47, 48.55, 47.56, 49.8, 49.03, 49.3, 48.94, 51.07, 51.83, 48.53, 48.3, 49.47, 50.26, 47.44, 47.25, 47.37, 46.33, 44.34, 42.42, 39.98, 40.05, 38.57, 36.22, 36.11, 37.47], "portfolio": [100.0, 95.86, 95.38, 95.19, 100.47, 94.11, 94.1, 101.52, 101.7, 82.62, 91.92, 93.54, 82.13, 83.9, 84.82, 84.87, 82.98, 84.46, 78.02, 75.94, 73.7, 72.64, 71.03, 71.81, 73.44, 73.2, 74.49, 74.05, 72.0, 66.34, 65.43, 67.99, 66.55, 66.74, 62.61, 60.1, 59.34, 57.92, 56.42, 53.17, 55.32, 52.72, 51.41, 50.37, 50.64], "metrics": {"market": {"max_drawdown": 63.89, "volatility": 105.99, "total_return": -62.53}, "portfolio": {"max_drawdown": 50.47, "volatility": 77.18, "total_return": -49.36}}}, "2020_COVID": {"scenario": "2020_COVID", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40], "market": [100.0, 101.59, 94.15, 96.24, 92.44, 85.91, 85.4, 79.98, 88.31, 73.34, 78.74, 77.56, 78.59, 75.8, 86.73, 95.58, 90.48, 90.63, 84.49, 111.86, 92.01, 105.54, 84.01, 91.72, 85.19, 90.11, 99.36, 100.7, 105.71, 105.97, 104.11, 84.46, 75.72, 72.76, 72.63, 71.35, 73.02, 71.17, 75.79, 76.47], "portfolio": [100.0, 101.63, 96.4, 97.3, 95.14, 91.11, 89.65, 85.68, 94.3, 88.21, 93.28, 92.22, 94.81, 95.04, 104.46, 112.22, 112.45, 117.81, 113.2, 132.2, 107.31, 114.05, 110.79, 112.81, 105.76, 107.71, 113.46, 114.59, 118.78, 122.0, 118.76, 101.19, 93.26, 90.58, 89.99, 88.69, 88.93, 89.8, 96.87, 100.04], "metrics": {"market": {"max_drawdown": 36.38, "volatility": 157.84, "total_return": -23.53}, "portfolio": {"max_drawdown": 32.91, "volatility": 101.73, "total_return": 0.04}}}, "2022_INFLATION_SHOCK": {"scenario": "2022_INFLATION_SHOCK", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60], "market": [100.0, 97.45, 95.98, 94.05, 95.95, 93.73, 93.97, 95.98, 90.86, 94.22, 97.8, 100.45, 97.82, 98.63, 96.42, 93.67, 93.84, 101.99, 100.01, 98.62, 98.57, 96.97, 96.64, 94.11, 97.35, 98.72, 93.31, 90.9, 95.15, 78.16, 75.4, 66.63, 64.04, 62.38, 55.14, 56.42, 58.42, 61.6, 62.06, 63.31, 61.64, 63.02, 58.34, 57.53, 57.94, 60.58, 60.43, 61.47, 63.09, 63.97, 61.96, 59.6, 57.83, 55.46, 55.23, 54.96, 57.16, 55.25, 56.51, 56.98], "portfolio": [100.0, 99.32, 99.95, 100.02, 101.06, 98.5, 94.59, 98.22, 95.62, 94.96, 98.91, 104.24, 98.72, 100.4, 102.22, 99.44, 99.39, 106.84, 103.01, 100.33, 97.66, 96.36, 91.76, 90.34, 90.07, 88.68, 85.89, 82.63, 83.25, 75.28, 71.98, 67.62, 62.72, 60.92, 56.2, 56.19, 55.28, 58.96, 58.03, 58.2, 57.62, 57.55, 53.92, 51.49, 51.23, 52.13, 53.35, 52.9, 54.7, 55.37, 54.52, 53.51, 51.89, 51.46, 51.57, 52.57, 54.14, 52.11, 51.43, 51.47], "metrics": {"market": {"max_drawdown": 46.11, "volatility": 68.32, "total_return": -43.02}, "portfolio": {"max_drawdown": 52.05, "volatility": 52.71, "total_return": -48.53}}}, "2025_AI_SHOCK": {"scenario": "2025_AI_SHOCK", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35], "market": [100.0, 94.92, 82.96, 79.19, 74.22, 63.49, 63.3, 67.17, 64.68, 62.79, 63.12, 65.1, 67.45, 67.05, 65.47, 68.65, 57.65, 33.85, 32.56, 25.93, 29.06, 25.64, 27.07, 25.39, 23.43, 24.66, 22.44, 22.56, 21.67, 23.79, 22.2, 20.95, 19.52, 18.95, 19.55], "portfolio": [100.0, 97.38, 87.98, 85.49, 80.8, 73.67, 74.11, 75.12, 75.17, 71.58, 69.89, 69.65, 71.21, 68.49, 67.59, 71.42, 66.61, 50.1, 55.54, 47.7, 55.48, 50.34, 51.31, 46.33, 44.24, 42.89, 41.38, 40.79, 40.2, 40.85, 38.0, 35.46, 33.24, 32.28, 33.02], "metrics": {"market": {"max_drawdown": 81.05, "volatility": 152.84, "total_return": -80.45}, "portfolio": {"max_drawdown": 67.72, "volatility": 109.74, "total_return": -66.98}}}};

        // --- Metrics Chart ---
        if (metricsData && Object.keys(metricsData).length > 0) {
            const ctx = document.getElementById('financialChart');
            const container = document.getElementById('financialChartContainer');

            // Basic parsing of metrics structure (assuming flat or Year->Val)
            let labels = [];
            let values = [];
            let labelName = "Metric";

            // Try to find a timeseries
            for (const [key, val] of Object.entries(metricsData)) {
                if (typeof val === 'object') {
                    // Likely year -> value
                    labels = Object.keys(val);
                    values = Object.values(val).map(v => parseFloat(v.replace(/[^0-9.-]/g, '')));
                    labelName = key;
                    break;
                }
            }

            if (labels.length > 0) {
                container.style.display = 'block';
                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: labelName,
                            data: values,
                            backgroundColor: 'rgba(204, 0, 0, 0.5)',
                            borderColor: '#cc0000',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { labels: { color: '#ccc' } }
                        },
                        scales: {
                            y: { grid: { color: '#333' }, ticks: { color: '#888' } },
                            x: { grid: { color: '#333' }, ticks: { color: '#888' } }
                        }
                    }
                });
            }
        }

        // --- Crisis Simulation Logic ---
        let crisisChartInstance = null;

        window.renderCrisis = function(scenarioName) {
            if (!crisisData || !crisisData[scenarioName]) return;

            // UI Feedback for Buttons
            document.querySelectorAll('.crisis-btn').forEach(btn => {
                btn.style.borderColor = btn.innerText.includes(scenarioName.split('_')[1]) ? '#cc0000' : '#666';
                btn.style.color = btn.innerText.includes(scenarioName.split('_')[1]) ? '#cc0000' : '#ccc';
            });

            const data = crisisData[scenarioName];

            // Update Metrics Display
            if (data.metrics) {
                const p = data.metrics.portfolio;
                const m = data.metrics.market;

                document.getElementById('port_dd').innerText = p.max_drawdown.toFixed(2) + '%';
                document.getElementById('port_vol').innerText = p.volatility.toFixed(2) + '%';
                document.getElementById('port_ret').innerText = p.total_return.toFixed(2) + '%';

                // Color code return
                document.getElementById('port_ret').style.color = p.total_return >= 0 ? '#00f3ff' : '#ff4444';

                document.getElementById('mkt_dd').innerText = m.max_drawdown.toFixed(2) + '%';
                document.getElementById('mkt_vol').innerText = m.volatility.toFixed(2) + '%';
                document.getElementById('mkt_ret').innerText = m.total_return.toFixed(2) + '%';

                document.getElementById('mkt_ret').style.color = m.total_return >= 0 ? '#ccc' : '#cc0000';
            }

            const ctx = document.getElementById('crisisChart').getContext('2d');

            if (crisisChartInstance) {
                crisisChartInstance.destroy();
            }

            crisisChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: data.labels,
                    datasets: [
                        {
                            label: 'Your Portfolio (Simulated)',
                            data: data.portfolio,
                            borderColor: '#00f3ff',
                            backgroundColor: 'rgba(0, 243, 255, 0.1)',
                            borderWidth: 2,
                            tension: 0.4,
                            pointRadius: 0
                        },
                        {
                            label: 'Market Benchmark',
                            data: data.market,
                            borderColor: '#666',
                            borderDash: [5, 5],
                            borderWidth: 1,
                            pointRadius: 0,
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        mode: 'index',
                        intersect: false,
                    },
                    plugins: {
                        legend: { labels: { color: '#ccc', font: { family: 'JetBrains Mono' } } },
                        title: {
                            display: true,
                            text: 'STRESS TEST SCENARIO: ' + scenarioName.replace(/_/g, ' '),
                            color: '#cc0000',
                            font: { family: 'JetBrains Mono' }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0,0,0,0.8)',
                            titleColor: '#cc0000',
                            bodyColor: '#fff',
                            borderColor: '#333',
                            borderWidth: 1
                        }
                    },
                    scales: {
                        y: {
                            grid: { color: '#333' },
                            ticks: { color: '#888', callback: function(value) { return value + '%'; } }
                        },
                        x: {
                            grid: { color: '#333' },
                            ticks: { display: false }
                        }
                    }
                }
            });
        };

        // Auto-Run Default Crisis if Data Available
        if (crisisData && Object.keys(crisisData).length > 0) {
            document.getElementById('crisisSimContainer').style.display = 'block';

            // Parse URL parameters for ?sim=SCENARIO_NAME
            const urlParams = new URLSearchParams(window.location.search);
            const simParam = urlParams.get('sim');

            // slight delay to ensure Chart.js loaded
            setTimeout(() => {
                if (simParam && crisisData[simParam]) {
                    renderCrisis(simParam);
                    // Scroll to container
                    document.getElementById('crisisSimContainer').scrollIntoView({ behavior: 'smooth' });
                } else {
                    renderCrisis('2008_LEHMAN');
                }
            }, 100);
        }
    </script>
</body>
</html>