<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADAM v23.5 :: üè† Adam's House View: December 10, 2025</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/market_mayhem_tiers.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@300;400;600;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/nav.js" defer></script>
    <script src="js/market_mayhem_viewer.js" defer></script>
</head>
<body class="tier-high">

    <div id="system2-overlay" class="system2-overlay">
        <div class="system2-terminal">
            <div id="sys2-content"></div>
        </div>
    </div>

    <div id="toast-container" class="cyber-toast-container"></div>

    <div id="raw-source-modal" class="raw-source-modal">
        <div class="raw-source-header">
            <span>SOURCE_DATA.JSON</span>
            <span style="cursor:pointer; color:#cc0000;" onclick="toggleSource()">[CLOSE]</span>
        </div>
        <div class="raw-source-content" id="raw-source-content"></div>
    </div>

    <div class="doc-toolbar" style="display: flex;">
        <div class="toolbar-item" onclick="window.location.href='market_mayhem_archive_v24.html'"><strong>FILE</strong></div>
        <div class="toolbar-item" onclick="toggleRedactionMode()">REDACT</div>
        <div class="toolbar-item" onclick="printReport()">PRINT</div>
        <div class="toolbar-item" onclick="shareReport()">SHARE</div>
        <div class="toolbar-item" onclick="downloadReport()">DOWNLOAD</div>
        <div class="toolbar-item" onclick="toggleTheme()">VIEW</div>
        <div class="toolbar-item" onclick="showToast('INSERT: PERMISSION DENIED')">INSERT</div>
        <div class="toolbar-item" onclick="showToast('FORMAT: LOCKED')">FORMAT</div>
        <div class="toolbar-item" onclick="runVerification()" style="color: #0078d7;"><strong>VERIFY</strong></div>
        <div style="flex-grow:1;"></div>
        <div class="toolbar-item" style="color:#666;">ADAM_V26_EDITOR</div>
    </div>

    <div style="max-width: 1400px; margin: 0 auto; padding: 10px 20px; display:flex; justify-content:space-between; align-items:center; display: none;">
        <a href="market_mayhem_archive_v24.html" class="cyber-btn">&larr; RETURN TO ARCHIVE</a>
        <div style="font-family:'JetBrains Mono'; font-size:0.7rem; color:#666;">SECURE CONNECTION ESTABLISHED</div>
    </div>

    <div class="newsletter-wrapper">
        <div class="paper-sheet" id="paper-sheet">

            <div id="top-secret-stamp" class="top-secret-stamp">TOP SECRET</div>

            <div class="doc-header-ui" style="display: flex;">
                <span id="verification-status">CONFIDENTIAL // SYSTEM 2 REVIEW</span>
                <span>d9923905</span>
            </div>

            <div style="display:flex; justify-content:space-between; font-family:'JetBrains Mono'; font-size:0.8rem; color:#666; margin-bottom:20px; margin-top: 20px;">
                <span>2025-12-10</span>
                <span>ID: d9923905</span>
            </div>

            <h1 class="title">üè† Adam's House View: December 10, 2025</h1>

            <div class="doc-metadata-panel" style="display: grid;">
                <div class="doc-metadata-item"><strong>Classification</strong>UNCLASSIFIED</div>
                <div class="doc-metadata-item"><strong>Conviction</strong>50/100</div>
                <div class="doc-metadata-item"><strong>Sentiment</strong>100/100</div>
                <div class="doc-metadata-item"><strong>Reviewer</strong>Market_Maker</div>
            </div>

            <div id="financialChartContainer" style="display:none; margin-bottom: 30px;">
                <canvas id="financialChart"></canvas>
            </div>

            <div id="crisisSimContainer" style="display:none; margin-bottom: 30px; border: 1px solid #cc0000; padding: 20px; background: rgba(50, 0, 0, 0.2);">
                <h3 style="color: #cc0000; margin-top: 0; font-family: 'JetBrains Mono'; border-bottom: 1px solid #cc0000; padding-bottom: 10px; margin-bottom: 20px;">CRISIS SIMULATOR // STRESS TEST</h3>

                <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px; margin-bottom: 20px;">
                    <div class="crisis-btn" onclick="renderCrisis('2008_LEHMAN')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2008 LEHMAN
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('1987_BLACK_MONDAY')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        1987 BLACK MON
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('2000_DOTCOM_BUBBLE')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2000 DOTCOM
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('2020_COVID')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2020 PANDEMIC
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('2022_INFLATION_SHOCK')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2022 INFLATION
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('2025_AI_SHOCK')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2025 AI SHOCK
                    </div>
                </div>

                <div style="height: 300px; position: relative;">
                    <canvas id="crisisChart"></canvas>
                </div>

                <div id="crisisMetrics" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px; font-family: 'JetBrains Mono'; font-size: 0.8rem; color: #ccc;">
                    <div style="border: 1px solid #00f3ff; padding: 10px; background: rgba(0, 243, 255, 0.05);">
                        <div style="color: #00f3ff; border-bottom: 1px solid #00f3ff; margin-bottom: 10px; padding-bottom: 5px; font-weight: bold;">PORTFOLIO PERFORMANCE</div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;"><span>MAX DRAWDOWN:</span> <span id="port_dd" style="color: #fff;">0.00%</span></div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;"><span>VOLATILITY (ANN):</span> <span id="port_vol" style="color: #fff;">0.00%</span></div>
                        <div style="display: flex; justify-content: space-between;"><span>TOTAL RETURN:</span> <span id="port_ret" style="color: #fff;">0.00%</span></div>
                    </div>
                    <div style="border: 1px solid #666; padding: 10px; background: rgba(100, 100, 100, 0.1);">
                        <div style="color: #888; border-bottom: 1px solid #666; margin-bottom: 10px; padding-bottom: 5px; font-weight: bold;">MARKET BENCHMARK</div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;"><span>MAX DRAWDOWN:</span> <span id="mkt_dd" style="color: #ccc;">0.00%</span></div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;"><span>VOLATILITY (ANN):</span> <span id="mkt_vol" style="color: #ccc;">0.00%</span></div>
                        <div style="display: flex; justify-content: space-between;"><span>TOTAL RETURN:</span> <span id="mkt_ret" style="color: #ccc;">0.00%</span></div>
                    </div>
                </div>

                <div style="font-size: 0.7rem; color: #888; margin-top: 15px; font-style: italic;">
                    * Hypothetical performance based on portfolio beta and current risk profile. PAST PERFORMANCE IS NOT INDICATIVE OF FUTURE RESULTS.
                </div>
            </div>

            <div id="document-body">
                <strong>Strategic Allocation Update</strong>
<h2>Asset Class Stance</h2>
<p>| Asset Class | View | Trend |
| :--- | :--- | :--- |
| <strong>Equities (US)</strong> | NEUTRAL | ‚û°Ô∏è |
| <strong>Equities (EM)</strong> | UNDERWEIGHT | ‚ÜòÔ∏è |
| <strong>Fixed Income</strong> | OVERWEIGHT | ‚ÜóÔ∏è |
| <strong>Commodities</strong> | BULLISH | ‚ÜóÔ∏è |
| <strong>Crypto</strong> | ACCUMULATE | ‚ÜóÔ∏è |</p>
<h2>Core Convictions</h2>
<p>1.  <strong>AI Hardware:</strong> Peak margins passed, moving to software differentiation.
2.  <strong>Energy:</strong> Structural supply deficit meets AI demand shock.
3.  <strong>Rates:</strong> Lower for longer is dead; higher for longer is the new normal.</p>
<h2>Portfolio Positioning</h2>
<ul>
<li>  <strong>Cash:</strong> 15% (Dry powder for volatility)</li>
<li>  <strong>Gold/Bitcoin:</strong> 10% (Debasement hedge)</li>
<li>  <strong>High Quality Tech:</strong> 40%</li>
<li>  <strong>Energy/Infra:</strong> 35%</li>
</ul>
<p>---
<em>Generated by Adam v23.5</em></p>

            </div>

            <div class="provenance-log">
                <div class="log-entry">
                    <span>> HASH_CHECK</span>
                    <span style="color:var(--terminal-green);">d9923905d8e22fe4c95f7bdb4ee31af0153f47804332c0c6385037463223eccc</span>
                </div>
                <div class="log-entry">
                    <span>> SENTIMENT_SCAN</span>
                    <span>100 (DENSITY: 89)</span>
                </div>
                <div class="log-entry">
                    <span>> CONVICTION_LOCK</span>
                    <span>50%</span>
                </div>
                <div class="log-entry">
                    <span>> CRITIQUE_LOG</span>
                    <span>"Agent Market_Maker reviewed this intelligence. Verdict: SPECULATIVE. Sentiment alignment: 100/100. Cross-reference with knowledge graph completed."</span>
                </div>
            </div>

            <a href="#" class="source-jump-btn" onclick="toggleSource(); return false;" title="View Source JSON">JUMP TO SOURCE</a>

            <div style="margin-top: 40px; border-top: 1px solid #ccc; padding-top: 20px; font-style: italic; color: #666;">
                End of Transmission.
            </div>
        </div>

        <aside class="cyber-sidebar">
            <div class="sidebar-widget">
                <div class="sidebar-title">Intelligence Metadata</div>
                <div class="stat-row"><span>DATE</span> <span class="stat-val">2025-12-10</span></div>
                <div class="stat-row"><span>TYPE</span> <span class="stat-val">NEWSLETTER</span></div>
                <div class="stat-row"><span>CLASS</span> <span class="stat-val">UNCLASSIFIED</span></div>
                <div class="stat-row"><span>PROVENANCE</span> <span class="stat-val" title="d9923905d8e22fe4c95f7bdb4ee31af0153f47804332c0c6385037463223eccc">d9923905</span></div>
            </div>

            <div class="sidebar-widget">
                <div class="sidebar-title">Sentiment Analysis</div>
                <div class="stat-row"><span>SCORE</span> <span class="stat-val">100/100</span></div>
                <div class="sentiment-bar">
                    <div class="sentiment-fill" style="width: 100%;"></div>
                </div>
            </div>

            <div class="sidebar-widget">
                <div class="sidebar-title">Detected Entities</div>
                <div class="tag-cloud">
                    <a href="market_mayhem_archive_v24.html?search=US_FED" class="tag" style="text-decoration:none;">US_FED</a><a href="market_mayhem_archive_v24.html?search=AI" class="tag" style="text-decoration:none; border-color:#666;">AI</a><a href="market_mayhem_archive_v24.html?search=Bitcoin" class="tag" style="text-decoration:none; border-color:#666;">Bitcoin</a><a href="market_mayhem_archive_v24.html?search=Crypto" class="tag" style="text-decoration:none; border-color:#666;">Crypto</a><a href="market_mayhem_archive_v24.html?search=DeFi" class="tag" style="text-decoration:none; border-color:#666;">DeFi</a><a href="market_mayhem_archive_v24.html?search=Energy" class="tag" style="text-decoration:none; border-color:#666;">Energy</a>
                </div>
            </div>

             <div class="sidebar-widget">
                <div class="sidebar-title">Agent Conviction</div>
                 <div class="stat-row"><span>CONFIDENCE</span> <span class="stat-val">50/100</span></div>
                 <div class="sentiment-bar">
                    <div class="sentiment-fill" style="width: 50%; background: #ffff00;"></div>
                </div>
            </div>

            <div class="sidebar-widget">
                <div class="sidebar-title">Semantic Analysis</div>
                 <div class="stat-row"><span>DENSITY</span> <span class="stat-val">89/100</span></div>
                 <div class="stat-row"><span>PROBABILITY</span> <span class="stat-val">50/100</span></div>
            </div>

             <div class="sidebar-widget" style="border-color: #555;">
                <div class="sidebar-title">Reviewer Agent Log</div>
                 <div style="font-size: 0.75rem; color: #ccc; font-style: italic;">
                    "Agent Market_Maker reviewed this intelligence. Verdict: SPECULATIVE. Sentiment alignment: 100/100. Cross-reference with knowledge graph completed."
                </div>
                <div class="stat-row" style="margin-top:10px;"><span>QUALITY SCORE</span> <span class="stat-val">100/100</span></div>
            </div>

             <div class="sidebar-widget">
                <div class="sidebar-title">Contributing Agents</div>
                 <div style="display:flex; flex-direction:column; gap:5px;">
                    <div style="font-size:0.75rem; color:#666;">System Core</div>
                </div>
            </div>
        </aside>
    </div>

    <textarea id="hidden-raw-data" style="display:none;">{
  "title": "\ud83c\udfe0 Adam's House View: December 10, 2025",
  "date": "2025-12-10",
  "summary": "Market analysis and strategic insights.",
  "type": "NEWSLETTER",
  "full_body": "<strong>Strategic Allocation Update</strong>\n<h2>Asset Class Stance</h2>\n<p>| Asset Class | View | Trend |\n| :--- | :--- | :--- |\n| <strong>Equities (US)</strong> | NEUTRAL | \u27a1\ufe0f |\n| <strong>Equities (EM)</strong> | UNDERWEIGHT | \u2198\ufe0f |\n| <strong>Fixed Income</strong> | OVERWEIGHT | \u2197\ufe0f |\n| <strong>Commodities</strong> | BULLISH | \u2197\ufe0f |\n| <strong>Crypto</strong> | ACCUMULATE | \u2197\ufe0f |</p>\n<h2>Core Convictions</h2>\n<p>1.  <strong>AI Hardware:</strong> Peak margins passed, moving to software differentiation.\n2.  <strong>Energy:</strong> Structural supply deficit meets AI demand shock.\n3.  <strong>Rates:</strong> Lower for longer is dead; higher for longer is the new normal.</p>\n<h2>Portfolio Positioning</h2>\n<ul>\n<li>  <strong>Cash:</strong> 15% (Dry powder for volatility)</li>\n<li>  <strong>Gold/Bitcoin:</strong> 10% (Debasement hedge)</li>\n<li>  <strong>High Quality Tech:</strong> 40%</li>\n<li>  <strong>Energy/Infra:</strong> 35%</li>\n</ul>\n<p>---\n<em>Generated by Adam v23.5</em></p>\n",
  "sentiment_score": 100,
  "entities": {
    "tickers": [],
    "agents": [],
    "sovereigns": [
      "US_FED"
    ],
    "keywords": [
      "AI",
      "Bitcoin",
      "Crypto",
      "DeFi",
      "Energy"
    ]
  },
  "provenance_hash": "d9923905d8e22fe4c95f7bdb4ee31af0153f47804332c0c6385037463223eccc",
  "filename": "House_View_20251210.html",
  "is_sourced": true,
  "metrics_json": "{}",
  "source_priority": 2,
  "conviction": 50,
  "critique": "Agent Market_Maker reviewed this intelligence. Verdict: SPECULATIVE. Sentiment alignment: 100/100. Cross-reference with knowledge graph completed.",
  "quality": 100,
  "semantic_score": 89,
  "probability": 50,
  "outlook_score": 24
}</textarea>

    <script>
        // Chart Injection Logic
        const metricsData = {};
        const crisisData = {"2008_LEHMAN": {"scenario": "2008_LEHMAN", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30], "market": [100.0, 101.12, 108.82, 90.0, 86.98, 83.78, 70.51, 75.09, 81.95, 77.58, 70.9, 66.92, 68.92, 64.56, 68.0, 69.23, 76.45, 68.68, 76.34, 65.89, 69.5, 66.91, 70.25, 65.3, 54.87, 52.84, 50.67, 47.48, 46.37, 43.17], "portfolio": [100.0, 100.76, 111.68, 79.28, 74.01, 69.65, 53.07, 57.45, 62.36, 57.05, 46.64, 43.62, 44.64, 41.28, 48.3, 47.88, 59.91, 49.51, 60.03, 46.92, 50.06, 46.52, 48.27, 43.38, 33.4, 31.3, 29.51, 27.1, 26.59, 24.1], "metrics": {"market": {"max_drawdown": 60.33, "volatility": 125.38, "total_return": -56.83}, "portfolio": {"max_drawdown": 78.42, "volatility": 207.1, "total_return": -75.9}}}, "1987_BLACK_MONDAY": {"scenario": "1987_BLACK_MONDAY", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20], "market": [100.0, 109.88, 112.97, 119.15, 120.38, 93.21, 88.38, 96.04, 107.52, 93.19, 95.94, 84.65, 70.76, 70.54, 56.64, 56.7, 58.41, 58.8, 64.07, 78.68], "portfolio": [100.0, 118.54, 127.06, 139.51, 144.68, 93.58, 86.63, 99.02, 119.99, 105.3, 101.8, 85.28, 61.81, 62.31, 42.72, 43.78, 48.15, 45.9, 52.8, 71.06], "metrics": {"market": {"max_drawdown": 52.95, "volatility": 181.25, "total_return": -21.32}, "portfolio": {"max_drawdown": 70.47, "volatility": 286.32, "total_return": -28.94}}}, "2000_DOTCOM_BUBBLE": {"scenario": "2000_DOTCOM_BUBBLE", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45], "market": [100.0, 91.93, 96.53, 96.4, 98.58, 94.19, 97.1, 104.56, 102.05, 100.2, 104.43, 102.59, 109.18, 109.21, 105.6, 108.32, 108.53, 115.92, 114.28, 102.51, 101.74, 102.8, 100.89, 104.67, 106.71, 105.22, 105.19, 111.76, 109.16, 109.91, 105.7, 108.54, 108.57, 103.63, 101.34, 101.01, 97.21, 102.41, 102.44, 106.94, 101.33, 92.81, 86.24, 86.53, 85.9], "portfolio": [100.0, 92.18, 102.14, 100.61, 98.81, 91.84, 98.26, 107.89, 102.79, 97.1, 97.52, 97.96, 103.86, 111.29, 103.8, 104.62, 104.44, 117.85, 118.22, 94.14, 95.25, 95.42, 93.63, 98.62, 103.48, 104.58, 101.96, 111.75, 106.3, 109.12, 104.99, 104.94, 103.62, 99.44, 97.38, 94.82, 89.38, 96.09, 96.84, 102.29, 94.52, 82.27, 74.37, 75.02, 73.92], "metrics": {"market": {"max_drawdown": 25.9, "volatility": 65.65, "total_return": -14.1}, "portfolio": {"max_drawdown": 37.47, "volatility": 101.78, "total_return": -26.08}}}, "2020_COVID": {"scenario": "2020_COVID", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40], "market": [100.0, 101.68, 88.7, 84.78, 90.94, 93.41, 89.1, 86.09, 78.46, 79.3, 67.67, 61.58, 66.26, 68.98, 65.42, 56.15, 59.64, 52.3, 50.64, 46.34, 39.6, 30.35, 29.57, 30.83, 27.17, 28.28, 26.83, 25.13, 26.44, 26.99, 29.5, 27.96, 25.87, 25.17, 25.21, 24.85, 24.49, 22.11, 21.61, 21.67], "portfolio": [100.0, 103.59, 86.53, 78.41, 86.96, 92.85, 82.21, 75.99, 66.63, 68.46, 56.73, 49.71, 53.91, 59.15, 52.4, 38.65, 40.86, 32.59, 30.69, 24.05, 18.32, 12.31, 11.83, 12.18, 10.26, 11.0, 10.88, 9.86, 10.45, 10.38, 11.6, 11.01, 9.82, 9.53, 9.73, 9.42, 9.28, 7.95, 7.88, 7.98], "metrics": {"market": {"max_drawdown": 78.75, "volatility": 115.11, "total_return": -78.33}, "portfolio": {"max_drawdown": 92.39, "volatility": 173.12, "total_return": -92.02}}}, "2022_INFLATION_SHOCK": {"scenario": "2022_INFLATION_SHOCK", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60], "market": [100.0, 104.49, 102.14, 99.39, 99.99, 91.02, 96.96, 96.99, 95.61, 89.46, 92.47, 87.77, 85.93, 84.84, 83.7, 86.15, 85.23, 82.27, 83.28, 79.91, 83.37, 85.72, 86.48, 88.9, 88.51, 93.36, 87.98, 91.81, 92.26, 91.5, 93.19, 84.46, 84.12, 89.9, 92.31, 91.8, 91.68, 90.6, 81.33, 79.42, 79.2, 77.15, 76.64, 77.68, 76.25, 77.29, 78.28, 77.43, 78.21, 74.37, 73.83, 73.32, 74.15, 73.67, 78.29, 76.6, 73.52, 72.35, 71.28, 72.38], "portfolio": [100.0, 107.31, 105.16, 95.38, 97.42, 81.13, 90.83, 92.42, 85.6, 77.27, 77.27, 71.03, 67.61, 63.84, 60.72, 62.69, 61.74, 60.23, 62.0, 61.21, 65.14, 67.91, 68.6, 70.04, 71.73, 77.8, 75.07, 77.74, 78.25, 71.34, 78.89, 65.11, 66.95, 72.78, 78.3, 78.55, 80.07, 77.9, 64.05, 58.06, 56.45, 54.84, 53.36, 56.01, 53.98, 55.06, 58.56, 57.43, 57.82, 53.97, 53.34, 53.66, 54.11, 51.3, 57.31, 54.76, 52.05, 50.92, 48.94, 49.71], "metrics": {"market": {"max_drawdown": 31.78, "volatility": 56.93, "total_return": -27.62}, "portfolio": {"max_drawdown": 54.39, "volatility": 102.23, "total_return": -50.29}}}, "2025_AI_SHOCK": {"scenario": "2025_AI_SHOCK", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35], "market": [100.0, 94.36, 94.59, 93.23, 81.41, 78.56, 91.32, 76.8, 70.4, 72.19, 67.03, 67.91, 70.77, 63.98, 61.31, 45.78, 58.52, 48.7, 42.78, 35.8, 41.44, 35.37, 35.05, 37.52, 28.69, 30.19, 29.93, 27.31, 27.01, 25.12, 25.34, 23.15, 27.81, 26.84, 25.19], "portfolio": [100.0, 90.36, 91.4, 91.7, 71.95, 67.65, 86.05, 68.1, 58.5, 59.62, 54.09, 56.92, 61.0, 52.06, 46.22, 27.55, 38.32, 25.31, 20.28, 14.11, 16.81, 12.57, 11.58, 12.75, 8.04, 8.71, 8.62, 7.24, 7.07, 6.06, 6.25, 5.5, 7.17, 6.91, 6.45], "metrics": {"market": {"max_drawdown": 76.85, "volatility": 182.03, "total_return": -74.81}, "portfolio": {"max_drawdown": 94.5, "volatility": 286.54, "total_return": -93.55}}}};

        // --- Metrics Chart ---
        if (metricsData && Object.keys(metricsData).length > 0) {
            const ctx = document.getElementById('financialChart');
            const container = document.getElementById('financialChartContainer');

            // Basic parsing of metrics structure (assuming flat or Year->Val)
            let labels = [];
            let values = [];
            let labelName = "Metric";

            // Try to find a timeseries
            for (const [key, val] of Object.entries(metricsData)) {
                if (typeof val === 'object') {
                    // Likely year -> value
                    labels = Object.keys(val);
                    values = Object.values(val).map(v => parseFloat(v.replace(/[^0-9.-]/g, '')));
                    labelName = key;
                    break;
                }
            }

            if (labels.length > 0) {
                container.style.display = 'block';
                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: labelName,
                            data: values,
                            backgroundColor: 'rgba(204, 0, 0, 0.5)',
                            borderColor: '#cc0000',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { labels: { color: '#ccc' } }
                        },
                        scales: {
                            y: { grid: { color: '#333' }, ticks: { color: '#888' } },
                            x: { grid: { color: '#333' }, ticks: { color: '#888' } }
                        }
                    }
                });
            }
        }

        // --- Crisis Simulation Logic ---
        let crisisChartInstance = null;

        window.renderCrisis = function(scenarioName) {
            if (!crisisData || !crisisData[scenarioName]) return;

            // UI Feedback for Buttons
            document.querySelectorAll('.crisis-btn').forEach(btn => {
                btn.style.borderColor = btn.innerText.includes(scenarioName.split('_')[1]) ? '#cc0000' : '#666';
                btn.style.color = btn.innerText.includes(scenarioName.split('_')[1]) ? '#cc0000' : '#ccc';
            });

            const data = crisisData[scenarioName];

            // Update Metrics Display
            if (data.metrics) {
                const p = data.metrics.portfolio;
                const m = data.metrics.market;

                document.getElementById('port_dd').innerText = p.max_drawdown.toFixed(2) + '%';
                document.getElementById('port_vol').innerText = p.volatility.toFixed(2) + '%';
                document.getElementById('port_ret').innerText = p.total_return.toFixed(2) + '%';

                // Color code return
                document.getElementById('port_ret').style.color = p.total_return >= 0 ? '#00f3ff' : '#ff4444';

                document.getElementById('mkt_dd').innerText = m.max_drawdown.toFixed(2) + '%';
                document.getElementById('mkt_vol').innerText = m.volatility.toFixed(2) + '%';
                document.getElementById('mkt_ret').innerText = m.total_return.toFixed(2) + '%';

                document.getElementById('mkt_ret').style.color = m.total_return >= 0 ? '#ccc' : '#cc0000';
            }

            const ctx = document.getElementById('crisisChart').getContext('2d');

            if (crisisChartInstance) {
                crisisChartInstance.destroy();
            }

            crisisChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: data.labels,
                    datasets: [
                        {
                            label: 'Your Portfolio (Simulated)',
                            data: data.portfolio,
                            borderColor: '#00f3ff',
                            backgroundColor: 'rgba(0, 243, 255, 0.1)',
                            borderWidth: 2,
                            tension: 0.4,
                            pointRadius: 0
                        },
                        {
                            label: 'Market Benchmark',
                            data: data.market,
                            borderColor: '#666',
                            borderDash: [5, 5],
                            borderWidth: 1,
                            pointRadius: 0,
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        mode: 'index',
                        intersect: false,
                    },
                    plugins: {
                        legend: { labels: { color: '#ccc', font: { family: 'JetBrains Mono' } } },
                        title: {
                            display: true,
                            text: 'STRESS TEST SCENARIO: ' + scenarioName.replace(/_/g, ' '),
                            color: '#cc0000',
                            font: { family: 'JetBrains Mono' }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0,0,0,0.8)',
                            titleColor: '#cc0000',
                            bodyColor: '#fff',
                            borderColor: '#333',
                            borderWidth: 1
                        }
                    },
                    scales: {
                        y: {
                            grid: { color: '#333' },
                            ticks: { color: '#888', callback: function(value) { return value + '%'; } }
                        },
                        x: {
                            grid: { color: '#333' },
                            ticks: { display: false }
                        }
                    }
                }
            });
        };

        // Auto-Run Default Crisis if Data Available
        if (crisisData && Object.keys(crisisData).length > 0) {
            document.getElementById('crisisSimContainer').style.display = 'block';

            // Parse URL parameters for ?sim=SCENARIO_NAME
            const urlParams = new URLSearchParams(window.location.search);
            const simParam = urlParams.get('sim');

            // slight delay to ensure Chart.js loaded
            setTimeout(() => {
                if (simParam && crisisData[simParam]) {
                    renderCrisis(simParam);
                    // Scroll to container
                    document.getElementById('crisisSimContainer').scrollIntoView({ behavior: 'smooth' });
                } else {
                    renderCrisis('2008_LEHMAN');
                }
            }, 100);
        }
    </script>
</body>
</html>