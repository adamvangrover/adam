<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADAM v23.5 :: 2023 Year in Review: A Year of Recovery and Resilience</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/market_mayhem_tiers.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@300;400;600;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/nav.js" defer></script>
    <script src="js/market_mayhem_viewer.js" defer></script>
</head>
<body class="tier-high">

    <div id="system2-overlay" class="system2-overlay">
        <div class="system2-terminal">
            <div id="sys2-content"></div>
        </div>
    </div>

    <div id="toast-container" class="cyber-toast-container"></div>

    <div id="raw-source-modal" class="raw-source-modal">
        <div class="raw-source-header">
            <span>SOURCE_DATA.JSON</span>
            <span style="cursor:pointer; color:#cc0000;" onclick="toggleSource()">[CLOSE]</span>
        </div>
        <div class="raw-source-content" id="raw-source-content"></div>
    </div>

    <div class="doc-toolbar" style="display: flex;">
        <div class="toolbar-item" onclick="window.location.href='market_mayhem_archive_v24.html'"><strong>FILE</strong></div>
        <div class="toolbar-item" onclick="toggleRedactionMode()">REDACT</div>
        <div class="toolbar-item" onclick="printReport()">PRINT</div>
        <div class="toolbar-item" onclick="shareReport()">SHARE</div>
        <div class="toolbar-item" onclick="downloadReport()">DOWNLOAD</div>
        <div class="toolbar-item" onclick="toggleTheme()">VIEW</div>
        <div class="toolbar-item" onclick="showToast('INSERT: PERMISSION DENIED')">INSERT</div>
        <div class="toolbar-item" onclick="showToast('FORMAT: LOCKED')">FORMAT</div>
        <div class="toolbar-item" onclick="runVerification()" style="color: #0078d7;"><strong>VERIFY</strong></div>
        <div style="flex-grow:1;"></div>
        <div class="toolbar-item" style="color:#666;">ADAM_V26_EDITOR</div>
    </div>

    <div style="max-width: 1400px; margin: 0 auto; padding: 10px 20px; display:flex; justify-content:space-between; align-items:center; display: none;">
        <a href="market_mayhem_archive_v24.html" class="cyber-btn">&larr; RETURN TO ARCHIVE</a>
        <div style="font-family:'JetBrains Mono'; font-size:0.7rem; color:#666;">SECURE CONNECTION ESTABLISHED</div>
    </div>

    <div class="newsletter-wrapper">
        <div class="paper-sheet" id="paper-sheet">

            <div id="top-secret-stamp" class="top-secret-stamp">TOP SECRET</div>

            <div class="doc-header-ui" style="display: flex;">
                <span id="verification-status">CONFIDENTIAL // SYSTEM 2 REVIEW</span>
                <span>520624c1</span>
            </div>

            <div style="display:flex; justify-content:space-between; font-family:'JetBrains Mono'; font-size:0.8rem; color:#666; margin-bottom:20px; margin-top: 20px;">
                <span>2024-01-01</span>
                <span>ID: 520624c1</span>
            </div>

            <h1 class="title">2023 Year in Review: A Year of Recovery and Resilience</h1>

            <div class="doc-metadata-panel" style="display: grid;">
                <div class="doc-metadata-item"><strong>Classification</strong>UNCLASSIFIED</div>
                <div class="doc-metadata-item"><strong>Conviction</strong>50/100</div>
                <div class="doc-metadata-item"><strong>Sentiment</strong>91/100</div>
                <div class="doc-metadata-item"><strong>Reviewer</strong>Sovereign_AI</div>
            </div>

            <div id="financialChartContainer" style="display:none; margin-bottom: 30px;">
                <canvas id="financialChart"></canvas>
            </div>

            <div id="crisisSimContainer" style="display:none; margin-bottom: 30px; border: 1px solid #cc0000; padding: 20px; background: rgba(50, 0, 0, 0.2);">
                <h3 style="color: #cc0000; margin-top: 0; font-family: 'JetBrains Mono'; border-bottom: 1px solid #cc0000; padding-bottom: 10px; margin-bottom: 20px;">CRISIS SIMULATOR // STRESS TEST</h3>

                <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px; margin-bottom: 20px;">
                    <div class="crisis-btn" onclick="renderCrisis('2008_LEHMAN')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2008 LEHMAN
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('1987_BLACK_MONDAY')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        1987 BLACK MON
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('2000_DOTCOM_BUBBLE')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2000 DOTCOM
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('2020_COVID')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2020 PANDEMIC
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('2022_INFLATION_SHOCK')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2022 INFLATION
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('2025_AI_SHOCK')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2025 AI SHOCK
                    </div>
                </div>

                <div style="height: 300px; position: relative;">
                    <canvas id="crisisChart"></canvas>
                </div>

                <div id="crisisMetrics" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px; font-family: 'JetBrains Mono'; font-size: 0.8rem; color: #ccc;">
                    <div style="border: 1px solid #00f3ff; padding: 10px; background: rgba(0, 243, 255, 0.05);">
                        <div style="color: #00f3ff; border-bottom: 1px solid #00f3ff; margin-bottom: 10px; padding-bottom: 5px; font-weight: bold;">PORTFOLIO PERFORMANCE</div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;"><span>MAX DRAWDOWN:</span> <span id="port_dd" style="color: #fff;">0.00%</span></div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;"><span>VOLATILITY (ANN):</span> <span id="port_vol" style="color: #fff;">0.00%</span></div>
                        <div style="display: flex; justify-content: space-between;"><span>TOTAL RETURN:</span> <span id="port_ret" style="color: #fff;">0.00%</span></div>
                    </div>
                    <div style="border: 1px solid #666; padding: 10px; background: rgba(100, 100, 100, 0.1);">
                        <div style="color: #888; border-bottom: 1px solid #666; margin-bottom: 10px; padding-bottom: 5px; font-weight: bold;">MARKET BENCHMARK</div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;"><span>MAX DRAWDOWN:</span> <span id="mkt_dd" style="color: #ccc;">0.00%</span></div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;"><span>VOLATILITY (ANN):</span> <span id="mkt_vol" style="color: #ccc;">0.00%</span></div>
                        <div style="display: flex; justify-content: space-between;"><span>TOTAL RETURN:</span> <span id="mkt_ret" style="color: #ccc;">0.00%</span></div>
                    </div>
                </div>

                <div style="font-size: 0.7rem; color: #888; margin-top: 15px; font-style: italic;">
                    * Hypothetical performance based on portfolio beta and current risk profile. PAST PERFORMANCE IS NOT INDICATIVE OF FUTURE RESULTS.
                </div>
            </div>

            <div id="document-body">
                <h2>Market Overview</h2><p>2023 proved to be a year of recovery and resilience for the financial markets.  After a challenging 2022, major stock indices rebounded, with the S&P 500 gaining approximately 20%. The technology sector led the way, as investors regained confidence in growth stocks and innovation continued to drive returns.</p>
<h2>Major Themes and Trends</h2><p>Several key themes and trends shaped the market in 2023: <em> <strong>Inflation Moderation:</strong> Inflation gradually moderated throughout the year, as supply chain disruptions eased and central bank policies took effect. </em> <strong>Interest Rate Stabilization:</strong>  While interest rates remained elevated, they stabilized at a level that supported economic growth without fueling excessive inflation. <em> <strong>Geopolitical Resilience:</strong>  Despite ongoing geopolitical tensions, the markets demonstrated resilience, adapting to uncertainties and focusing on economic fundamentals. </em> <strong>Energy Transition:</strong>  The energy transition continued to gain momentum, with increased investment in renewable energy and growing adoption of electric vehicles. <em> <strong>Artificial Intelligence (AI):</strong>  AI emerged as a dominant theme, with breakthroughs in generative AI and large language models capturing investor attention. </em> <strong>Focus on Profitability:</strong>  Investors shifted their focus towards companies with strong profitability and sustainable business models.</p>
<h2>Industry Performance</h2><p>Industry performance was generally positive in 2023: <em> <strong>Technology:</strong>  The technology sector was the top performer, driven by AI advancements and renewed investor confidence. </em> <strong>Healthcare:</strong>  Healthcare also performed well, as innovation in areas like biotechnology and pharmaceuticals continued to attract investment. <em> <strong>Industrials:</strong>  The industrials sector benefited from increased infrastructure spending and supply chain improvements. </em> <strong>Consumer Discretionary:</strong>  Consumer discretionary companies saw a rebound in sales as consumer confidence improved. * <strong>Energy:</strong>  The energy sector's performance was more moderate, as oil prices stabilized and the focus shifted towards renewable energy.</p>
<h2>Top Performers</h2><p>Some of the top-performing companies in 2023 included: <em> <strong>NVIDIA (NVDA):</strong>  A leading AI chipmaker that benefited from the AI boom. </em> <strong>Tesla (TSLA):</strong>  Continued its growth trajectory in the electric vehicle market. <em> <strong>Microsoft (MSFT):</strong>  Showed strong performance across its cloud computing and software businesses. </em> <strong>Alphabet (GOOGL):</strong>  Benefited from growth in its advertising and cloud businesses. * <strong>UnitedHealth Group (UNH):</strong>  A leading healthcare company with a diversified business model.</p>
<h2>Portfolio Construction and Optimization</h2><p>In a recovering market like 2023, portfolio construction and optimization focused on: <em> <strong>Growth Investing:</strong>  Capitalizing on growth opportunities in sectors like technology and healthcare. </em> <strong>Value Investing:</strong>  Continuing to identify undervalued companies with strong fundamentals. <em> <strong>Risk Management:</strong>  Balancing growth opportunities with risk management strategies to protect against potential market downturns. </em> <strong>ESG Considerations:</strong>  Integrating environmental, social, and governance (ESG) factors into investment decisions.</p>
<h2>Looking Ahead</h2><p>2023 demonstrated the resilience of the markets and the power of innovation. As we look ahead, it's crucial to remain adaptable, embrace new technologies, and maintain a balanced investment approach. Adam v15.4 can assist investors in identifying opportunities, managing risks, and achieving their financial goals.</p>

            </div>

            <div class="provenance-log">
                <div class="log-entry">
                    <span>> HASH_CHECK</span>
                    <span style="color:var(--terminal-green);">520624c11f28c253253dac3695a3eaa24a7206b53b86041a719f7412b5e7af70</span>
                </div>
                <div class="log-entry">
                    <span>> SENTIMENT_SCAN</span>
                    <span>91 (DENSITY: 43)</span>
                </div>
                <div class="log-entry">
                    <span>> CONVICTION_LOCK</span>
                    <span>50%</span>
                </div>
                <div class="log-entry">
                    <span>> CRITIQUE_LOG</span>
                    <span>"Agent Sovereign_AI reviewed this intelligence. Verdict: HIGH_CONFIDENCE. Sentiment alignment: 91/100. Cross-reference with knowledge graph completed."</span>
                </div>
            </div>

            <a href="#" class="source-jump-btn" onclick="toggleSource(); return false;" title="View Source JSON">JUMP TO SOURCE</a>

            <div style="margin-top: 40px; border-top: 1px solid #ccc; padding-top: 20px; font-style: italic; color: #666;">
                End of Transmission.
            </div>
        </div>

        <aside class="cyber-sidebar">
            <div class="sidebar-widget">
                <div class="sidebar-title">Intelligence Metadata</div>
                <div class="stat-row"><span>DATE</span> <span class="stat-val">2024-01-01</span></div>
                <div class="stat-row"><span>TYPE</span> <span class="stat-val">MARKET_OUTLOOK</span></div>
                <div class="stat-row"><span>CLASS</span> <span class="stat-val">UNCLASSIFIED</span></div>
                <div class="stat-row"><span>PROVENANCE</span> <span class="stat-val" title="520624c11f28c253253dac3695a3eaa24a7206b53b86041a719f7412b5e7af70">520624c1</span></div>
            </div>

            <div class="sidebar-widget">
                <div class="sidebar-title">Sentiment Analysis</div>
                <div class="stat-row"><span>SCORE</span> <span class="stat-val">91/100</span></div>
                <div class="sentiment-bar">
                    <div class="sentiment-fill" style="width: 91%;"></div>
                </div>
            </div>

            <div class="sidebar-widget">
                <div class="sidebar-title">Detected Entities</div>
                <div class="tag-cloud">
                    <a href="market_mayhem_archive_v24.html?search=AI" class="tag" style="text-decoration:none; border-color:#666;">AI</a><a href="market_mayhem_archive_v24.html?search=Cloud" class="tag" style="text-decoration:none; border-color:#666;">Cloud</a><a href="market_mayhem_archive_v24.html?search=ESG" class="tag" style="text-decoration:none; border-color:#666;">ESG</a><a href="market_mayhem_archive_v24.html?search=EV" class="tag" style="text-decoration:none; border-color:#666;">EV</a><a href="market_mayhem_archive_v24.html?search=Energy" class="tag" style="text-decoration:none; border-color:#666;">Energy</a>
                </div>
            </div>

             <div class="sidebar-widget">
                <div class="sidebar-title">Agent Conviction</div>
                 <div class="stat-row"><span>CONFIDENCE</span> <span class="stat-val">50/100</span></div>
                 <div class="sentiment-bar">
                    <div class="sentiment-fill" style="width: 50%; background: #ffff00;"></div>
                </div>
            </div>

            <div class="sidebar-widget">
                <div class="sidebar-title">Semantic Analysis</div>
                 <div class="stat-row"><span>DENSITY</span> <span class="stat-val">43/100</span></div>
                 <div class="stat-row"><span>PROBABILITY</span> <span class="stat-val">50/100</span></div>
            </div>

             <div class="sidebar-widget" style="border-color: #555;">
                <div class="sidebar-title">Reviewer Agent Log</div>
                 <div style="font-size: 0.75rem; color: #ccc; font-style: italic;">
                    "Agent Sovereign_AI reviewed this intelligence. Verdict: HIGH_CONFIDENCE. Sentiment alignment: 91/100. Cross-reference with knowledge graph completed."
                </div>
                <div class="stat-row" style="margin-top:10px;"><span>QUALITY SCORE</span> <span class="stat-val">100/100</span></div>
            </div>

             <div class="sidebar-widget">
                <div class="sidebar-title">Contributing Agents</div>
                 <div style="display:flex; flex-direction:column; gap:5px;">
                    <div style="font-size:0.75rem; color:#666;">System Core</div>
                </div>
            </div>
        </aside>
    </div>

    <textarea id="hidden-raw-data" style="display:none;">{
  "title": "2023 Year in Review: A Year of Recovery and Resilience",
  "date": "2024-01-01",
  "summary": "2023 proved to be a year of recovery and resilience for the financial markets.  After a challenging 2022, major stock indices rebounded, with the S&P 500 gaining approximately 20%. The technology sect...",
  "type": "MARKET_OUTLOOK",
  "full_body": "<h2>Market Overview</h2><p>2023 proved to be a year of recovery and resilience for the financial markets.  After a challenging 2022, major stock indices rebounded, with the S&P 500 gaining approximately 20%. The technology sector led the way, as investors regained confidence in growth stocks and innovation continued to drive returns.</p>\n<h2>Major Themes and Trends</h2><p>Several key themes and trends shaped the market in 2023: <em> <strong>Inflation Moderation:</strong> Inflation gradually moderated throughout the year, as supply chain disruptions eased and central bank policies took effect. </em> <strong>Interest Rate Stabilization:</strong>  While interest rates remained elevated, they stabilized at a level that supported economic growth without fueling excessive inflation. <em> <strong>Geopolitical Resilience:</strong>  Despite ongoing geopolitical tensions, the markets demonstrated resilience, adapting to uncertainties and focusing on economic fundamentals. </em> <strong>Energy Transition:</strong>  The energy transition continued to gain momentum, with increased investment in renewable energy and growing adoption of electric vehicles. <em> <strong>Artificial Intelligence (AI):</strong>  AI emerged as a dominant theme, with breakthroughs in generative AI and large language models capturing investor attention. </em> <strong>Focus on Profitability:</strong>  Investors shifted their focus towards companies with strong profitability and sustainable business models.</p>\n<h2>Industry Performance</h2><p>Industry performance was generally positive in 2023: <em> <strong>Technology:</strong>  The technology sector was the top performer, driven by AI advancements and renewed investor confidence. </em> <strong>Healthcare:</strong>  Healthcare also performed well, as innovation in areas like biotechnology and pharmaceuticals continued to attract investment. <em> <strong>Industrials:</strong>  The industrials sector benefited from increased infrastructure spending and supply chain improvements. </em> <strong>Consumer Discretionary:</strong>  Consumer discretionary companies saw a rebound in sales as consumer confidence improved. * <strong>Energy:</strong>  The energy sector's performance was more moderate, as oil prices stabilized and the focus shifted towards renewable energy.</p>\n<h2>Top Performers</h2><p>Some of the top-performing companies in 2023 included: <em> <strong>NVIDIA (NVDA):</strong>  A leading AI chipmaker that benefited from the AI boom. </em> <strong>Tesla (TSLA):</strong>  Continued its growth trajectory in the electric vehicle market. <em> <strong>Microsoft (MSFT):</strong>  Showed strong performance across its cloud computing and software businesses. </em> <strong>Alphabet (GOOGL):</strong>  Benefited from growth in its advertising and cloud businesses. * <strong>UnitedHealth Group (UNH):</strong>  A leading healthcare company with a diversified business model.</p>\n<h2>Portfolio Construction and Optimization</h2><p>In a recovering market like 2023, portfolio construction and optimization focused on: <em> <strong>Growth Investing:</strong>  Capitalizing on growth opportunities in sectors like technology and healthcare. </em> <strong>Value Investing:</strong>  Continuing to identify undervalued companies with strong fundamentals. <em> <strong>Risk Management:</strong>  Balancing growth opportunities with risk management strategies to protect against potential market downturns. </em> <strong>ESG Considerations:</strong>  Integrating environmental, social, and governance (ESG) factors into investment decisions.</p>\n<h2>Looking Ahead</h2><p>2023 demonstrated the resilience of the markets and the power of innovation. As we look ahead, it's crucial to remain adaptable, embrace new technologies, and maintain a balanced investment approach. Adam v15.4 can assist investors in identifying opportunities, managing risks, and achieving their financial goals.</p>\n",
  "sentiment_score": 91,
  "entities": {
    "tickers": [],
    "agents": [],
    "sovereigns": [],
    "keywords": [
      "AI",
      "Cloud",
      "ESG",
      "EV",
      "Energy"
    ]
  },
  "provenance_hash": "520624c11f28c253253dac3695a3eaa24a7206b53b86041a719f7412b5e7af70",
  "filename": "2023 Year in Review: A Year of Recovery and Resilience.html",
  "is_sourced": true,
  "metrics_json": "{}",
  "source_priority": 2,
  "conviction": 50,
  "semantic_score": 43,
  "probability": 50,
  "outlook_score": 10,
  "critique": "Agent Sovereign_AI reviewed this intelligence. Verdict: HIGH_CONFIDENCE. Sentiment alignment: 91/100. Cross-reference with knowledge graph completed."
}</textarea>

    <script>
        // Chart Injection Logic
        const metricsData = {};
        const crisisData = {"2008_LEHMAN": {"scenario": "2008_LEHMAN", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30], "market": [100.0, 102.44, 96.9, 95.29, 86.66, 82.87, 78.58, 74.76, 77.87, 76.82, 75.45, 82.48, 89.99, 86.07, 87.83, 81.06, 81.49, 77.13, 74.18, 71.69, 66.33, 57.45, 59.82, 60.39, 58.51, 54.06, 51.91, 47.33, 43.13, 46.67], "portfolio": [100.0, 106.95, 97.94, 100.79, 84.48, 77.17, 71.08, 66.85, 75.55, 73.81, 69.7, 79.75, 91.16, 82.19, 83.2, 77.65, 75.45, 73.14, 68.46, 66.1, 60.0, 47.37, 52.38, 53.74, 51.57, 45.79, 43.36, 34.57, 29.8, 32.77], "metrics": {"market": {"max_drawdown": 57.9, "volatility": 88.79, "total_return": -53.33}, "portfolio": {"max_drawdown": 72.14, "volatility": 150.09, "total_return": -67.23}}}, "1987_BLACK_MONDAY": {"scenario": "1987_BLACK_MONDAY", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20], "market": [100.0, 102.67, 99.17, 105.06, 87.74, 97.26, 110.59, 118.43, 95.79, 55.84, 66.08, 69.39, 68.35, 77.16, 85.86, 78.47, 74.18, 79.93, 90.97, 77.9], "portfolio": [100.0, 105.5, 100.78, 111.71, 88.53, 101.24, 122.91, 135.69, 89.84, 31.39, 40.18, 42.2, 40.3, 49.48, 55.63, 46.95, 43.05, 48.18, 58.63, 47.84], "metrics": {"market": {"max_drawdown": 52.85, "volatility": 230.46, "total_return": -22.1}, "portfolio": {"max_drawdown": 76.87, "volatility": 355.15, "total_return": -52.16}}}, "2000_DOTCOM_BUBBLE": {"scenario": "2000_DOTCOM_BUBBLE", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45], "market": [100.0, 98.21, 90.22, 85.88, 89.59, 88.92, 94.84, 96.77, 96.28, 99.71, 96.63, 109.87, 113.0, 117.08, 124.1, 120.54, 119.19, 119.63, 113.15, 115.54, 112.21, 112.42, 105.72, 105.21, 106.17, 104.22, 107.85, 99.75, 96.94, 97.99, 102.33, 97.8, 94.97, 92.84, 86.84, 89.59, 91.12, 86.58, 88.51, 82.16, 80.59, 78.98, 78.3, 78.75, 70.35], "portfolio": [100.0, 94.79, 84.78, 79.48, 87.18, 84.1, 89.14, 91.38, 90.23, 92.43, 89.65, 103.75, 103.51, 112.35, 121.46, 125.16, 116.02, 116.55, 109.72, 109.99, 105.43, 105.29, 97.0, 98.5, 103.31, 96.91, 99.72, 87.2, 84.27, 84.29, 87.54, 81.48, 78.3, 78.53, 70.56, 72.08, 74.97, 66.92, 69.29, 60.84, 59.33, 57.39, 55.13, 53.84, 44.76], "metrics": {"market": {"max_drawdown": 43.31, "volatility": 71.26, "total_return": -29.65}, "portfolio": {"max_drawdown": 64.24, "volatility": 102.53, "total_return": -55.24}}}, "2020_COVID": {"scenario": "2020_COVID", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40], "market": [100.0, 86.43, 81.22, 74.49, 72.41, 65.42, 62.22, 60.02, 59.38, 57.62, 62.28, 57.0, 58.03, 57.38, 60.91, 58.71, 52.49, 50.63, 48.9, 31.64, 22.87, 25.07, 26.85, 26.05, 31.09, 32.78, 28.03, 26.84, 25.85, 24.93, 26.79, 24.64, 26.18, 23.07, 22.5, 21.87, 21.32, 20.5, 19.98, 19.12], "portfolio": [100.0, 80.11, 72.57, 63.25, 59.28, 50.39, 47.67, 43.43, 42.18, 39.22, 43.85, 38.89, 39.68, 38.51, 41.1, 37.72, 33.54, 30.51, 28.56, 13.99, 8.54, 9.67, 10.9, 10.35, 14.06, 15.07, 11.78, 10.93, 10.21, 9.62, 10.64, 10.0, 10.73, 8.96, 8.91, 8.55, 8.26, 7.5, 7.19, 6.8], "metrics": {"market": {"max_drawdown": 80.88, "volatility": 148.84, "total_return": -80.88}, "portfolio": {"max_drawdown": 93.2, "volatility": 221.48, "total_return": -93.2}}}, "2022_INFLATION_SHOCK": {"scenario": "2022_INFLATION_SHOCK", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60], "market": [100.0, 91.31, 95.93, 96.96, 100.2, 98.98, 97.92, 91.51, 90.52, 86.45, 78.06, 77.93, 71.48, 74.76, 75.85, 75.44, 72.69, 71.34, 69.75, 72.84, 75.06, 71.51, 71.16, 69.87, 66.59, 59.35, 54.76, 53.54, 50.45, 39.97, 46.86, 50.37, 53.17, 51.36, 49.77, 52.11, 55.25, 52.15, 50.51, 51.81, 50.71, 52.7, 51.57, 49.79, 46.77, 46.44, 45.04, 46.01, 47.73, 44.08, 41.7, 40.42, 37.64, 36.08, 35.83, 36.31, 37.56, 37.27, 38.09, 40.2], "portfolio": [100.0, 84.22, 88.98, 90.62, 94.14, 91.72, 93.08, 88.93, 90.44, 87.51, 77.13, 78.87, 69.7, 73.67, 78.07, 75.32, 68.63, 67.55, 65.21, 68.93, 69.7, 63.71, 62.92, 64.75, 60.42, 50.14, 46.61, 43.95, 38.82, 29.69, 38.05, 42.28, 48.41, 45.95, 41.76, 44.98, 48.66, 43.65, 44.91, 46.13, 44.23, 47.29, 47.29, 44.36, 39.88, 38.42, 37.82, 38.52, 40.29, 36.32, 33.82, 32.14, 28.99, 27.06, 27.37, 28.61, 29.44, 29.65, 29.79, 32.78], "metrics": {"market": {"max_drawdown": 64.24, "volatility": 88.32, "total_return": -59.8}, "portfolio": {"max_drawdown": 72.94, "volatility": 131.57, "total_return": -67.22}}}, "2025_AI_SHOCK": {"scenario": "2025_AI_SHOCK", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35], "market": [100.0, 88.0, 88.61, 83.06, 74.36, 63.3, 67.2, 64.97, 66.4, 66.44, 69.29, 63.13, 66.6, 70.99, 69.68, 70.61, 65.45, 55.78, 45.09, 38.52, 34.43, 28.26, 28.94, 22.79, 20.43, 17.06, 15.27, 16.09, 17.04, 18.64, 18.94, 19.73, 22.64, 21.36, 17.43], "portfolio": [100.0, 79.91, 81.19, 70.67, 59.97, 46.23, 49.1, 47.42, 47.88, 47.54, 50.9, 46.14, 50.21, 58.55, 55.62, 56.81, 46.82, 33.41, 23.76, 21.78, 19.11, 14.78, 15.09, 9.95, 8.2, 6.35, 4.97, 5.33, 5.71, 6.57, 6.73, 7.34, 8.79, 8.32, 6.14], "metrics": {"market": {"max_drawdown": 84.73, "volatility": 150.03, "total_return": -82.57}, "portfolio": {"max_drawdown": 95.03, "volatility": 228.28, "total_return": -93.86}}}};

        // --- Metrics Chart ---
        if (metricsData && Object.keys(metricsData).length > 0) {
            const ctx = document.getElementById('financialChart');
            const container = document.getElementById('financialChartContainer');

            // Basic parsing of metrics structure (assuming flat or Year->Val)
            let labels = [];
            let values = [];
            let labelName = "Metric";

            // Try to find a timeseries
            for (const [key, val] of Object.entries(metricsData)) {
                if (typeof val === 'object') {
                    // Likely year -> value
                    labels = Object.keys(val);
                    values = Object.values(val).map(v => parseFloat(v.replace(/[^0-9.-]/g, '')));
                    labelName = key;
                    break;
                }
            }

            if (labels.length > 0) {
                container.style.display = 'block';
                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: labelName,
                            data: values,
                            backgroundColor: 'rgba(204, 0, 0, 0.5)',
                            borderColor: '#cc0000',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { labels: { color: '#ccc' } }
                        },
                        scales: {
                            y: { grid: { color: '#333' }, ticks: { color: '#888' } },
                            x: { grid: { color: '#333' }, ticks: { color: '#888' } }
                        }
                    }
                });
            }
        }

        // --- Crisis Simulation Logic ---
        let crisisChartInstance = null;

        window.renderCrisis = function(scenarioName) {
            if (!crisisData || !crisisData[scenarioName]) return;

            // UI Feedback for Buttons
            document.querySelectorAll('.crisis-btn').forEach(btn => {
                btn.style.borderColor = btn.innerText.includes(scenarioName.split('_')[1]) ? '#cc0000' : '#666';
                btn.style.color = btn.innerText.includes(scenarioName.split('_')[1]) ? '#cc0000' : '#ccc';
            });

            const data = crisisData[scenarioName];

            // Update Metrics Display
            if (data.metrics) {
                const p = data.metrics.portfolio;
                const m = data.metrics.market;

                document.getElementById('port_dd').innerText = p.max_drawdown.toFixed(2) + '%';
                document.getElementById('port_vol').innerText = p.volatility.toFixed(2) + '%';
                document.getElementById('port_ret').innerText = p.total_return.toFixed(2) + '%';

                // Color code return
                document.getElementById('port_ret').style.color = p.total_return >= 0 ? '#00f3ff' : '#ff4444';

                document.getElementById('mkt_dd').innerText = m.max_drawdown.toFixed(2) + '%';
                document.getElementById('mkt_vol').innerText = m.volatility.toFixed(2) + '%';
                document.getElementById('mkt_ret').innerText = m.total_return.toFixed(2) + '%';

                document.getElementById('mkt_ret').style.color = m.total_return >= 0 ? '#ccc' : '#cc0000';
            }

            const ctx = document.getElementById('crisisChart').getContext('2d');

            if (crisisChartInstance) {
                crisisChartInstance.destroy();
            }

            crisisChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: data.labels,
                    datasets: [
                        {
                            label: 'Your Portfolio (Simulated)',
                            data: data.portfolio,
                            borderColor: '#00f3ff',
                            backgroundColor: 'rgba(0, 243, 255, 0.1)',
                            borderWidth: 2,
                            tension: 0.4,
                            pointRadius: 0
                        },
                        {
                            label: 'Market Benchmark',
                            data: data.market,
                            borderColor: '#666',
                            borderDash: [5, 5],
                            borderWidth: 1,
                            pointRadius: 0,
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        mode: 'index',
                        intersect: false,
                    },
                    plugins: {
                        legend: { labels: { color: '#ccc', font: { family: 'JetBrains Mono' } } },
                        title: {
                            display: true,
                            text: 'STRESS TEST SCENARIO: ' + scenarioName.replace(/_/g, ' '),
                            color: '#cc0000',
                            font: { family: 'JetBrains Mono' }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0,0,0,0.8)',
                            titleColor: '#cc0000',
                            bodyColor: '#fff',
                            borderColor: '#333',
                            borderWidth: 1
                        }
                    },
                    scales: {
                        y: {
                            grid: { color: '#333' },
                            ticks: { color: '#888', callback: function(value) { return value + '%'; } }
                        },
                        x: {
                            grid: { color: '#333' },
                            ticks: { display: false }
                        }
                    }
                }
            });
        };

        // Auto-Run Default Crisis if Data Available
        if (crisisData && Object.keys(crisisData).length > 0) {
            document.getElementById('crisisSimContainer').style.display = 'block';

            // Parse URL parameters for ?sim=SCENARIO_NAME
            const urlParams = new URLSearchParams(window.location.search);
            const simParam = urlParams.get('sim');

            // slight delay to ensure Chart.js loaded
            setTimeout(() => {
                if (simParam && crisisData[simParam]) {
                    renderCrisis(simParam);
                    // Scroll to container
                    document.getElementById('crisisSimContainer').scrollIntoView({ behavior: 'smooth' });
                } else {
                    renderCrisis('2008_LEHMAN');
                }
            }, 100);
        }
    </script>
</body>
</html>