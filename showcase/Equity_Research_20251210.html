<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADAM v23.5 :: ðŸ“‘ Equity Research Note: December 10, 2025</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/market_mayhem_tiers.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@300;400;600;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/nav.js" defer></script>
    <script src="js/market_mayhem_viewer.js" defer></script>
</head>
<body class="tier-high">

    <div id="system2-overlay" class="system2-overlay">
        <div class="system2-terminal">
            <div id="sys2-content"></div>
        </div>
    </div>

    <div id="toast-container" class="cyber-toast-container"></div>

    <div id="raw-source-modal" class="raw-source-modal">
        <div class="raw-source-header">
            <span>SOURCE_DATA.JSON</span>
            <span style="cursor:pointer; color:#cc0000;" onclick="toggleSource()">[CLOSE]</span>
        </div>
        <div class="raw-source-content" id="raw-source-content"></div>
    </div>

    <div class="doc-toolbar" style="display: flex;">
        <div class="toolbar-item" onclick="window.location.href='market_mayhem_archive_v24.html'"><strong>FILE</strong></div>
        <div class="toolbar-item" onclick="toggleRedactionMode()">REDACT</div>
        <div class="toolbar-item" onclick="printReport()">PRINT</div>
        <div class="toolbar-item" onclick="shareReport()">SHARE</div>
        <div class="toolbar-item" onclick="downloadReport()">DOWNLOAD</div>
        <div class="toolbar-item" onclick="toggleTheme()">VIEW</div>
        <div class="toolbar-item" onclick="showToast('INSERT: PERMISSION DENIED')">INSERT</div>
        <div class="toolbar-item" onclick="showToast('FORMAT: LOCKED')">FORMAT</div>
        <div class="toolbar-item" onclick="runVerification()" style="color: #0078d7;"><strong>VERIFY</strong></div>
        <div style="flex-grow:1;"></div>
        <div class="toolbar-item" style="color:#666;">ADAM_V26_EDITOR</div>
    </div>

    <div style="max-width: 1400px; margin: 0 auto; padding: 10px 20px; display:flex; justify-content:space-between; align-items:center; display: none;">
        <a href="market_mayhem_archive_v24.html" class="cyber-btn">&larr; RETURN TO ARCHIVE</a>
        <div style="font-family:'JetBrains Mono'; font-size:0.7rem; color:#666;">SECURE CONNECTION ESTABLISHED</div>
    </div>

    <div class="newsletter-wrapper">
        <div class="paper-sheet" id="paper-sheet">

            <div id="top-secret-stamp" class="top-secret-stamp">TOP SECRET</div>

            <div class="doc-header-ui" style="display: flex;">
                <span id="verification-status">CONFIDENTIAL // SYSTEM 2 REVIEW</span>
                <span>015bae6c</span>
            </div>

            <div style="display:flex; justify-content:space-between; font-family:'JetBrains Mono'; font-size:0.8rem; color:#666; margin-bottom:20px; margin-top: 20px;">
                <span>2025-12-10</span>
                <span>ID: 015bae6c</span>
            </div>

            <h1 class="title">ðŸ“‘ Equity Research Note: December 10, 2025</h1>

            <div class="doc-metadata-panel" style="display: grid;">
                <div class="doc-metadata-item"><strong>Classification</strong>UNCLASSIFIED</div>
                <div class="doc-metadata-item"><strong>Conviction</strong>50/100</div>
                <div class="doc-metadata-item"><strong>Sentiment</strong>100/100</div>
                <div class="doc-metadata-item"><strong>Reviewer</strong>Risk_Engine</div>
            </div>

            <div id="financialChartContainer" style="display:none; margin-bottom: 30px;">
                <canvas id="financialChart"></canvas>
            </div>

            <div id="crisisSimContainer" style="display:none; margin-bottom: 30px; border: 1px solid #cc0000; padding: 20px; background: rgba(50, 0, 0, 0.2);">
                <h3 style="color: #cc0000; margin-top: 0; font-family: 'JetBrains Mono'; border-bottom: 1px solid #cc0000; padding-bottom: 10px; margin-bottom: 20px;">CRISIS SIMULATOR // STRESS TEST</h3>

                <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px; margin-bottom: 20px;">
                    <div class="crisis-btn" onclick="renderCrisis('2008_LEHMAN')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2008 LEHMAN
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('1987_BLACK_MONDAY')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        1987 BLACK MON
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('2000_DOTCOM_BUBBLE')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2000 DOTCOM
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('2020_COVID')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2020 PANDEMIC
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('2022_INFLATION_SHOCK')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2022 INFLATION
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('2025_AI_SHOCK')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2025 AI SHOCK
                    </div>
                </div>

                <div style="height: 300px; position: relative;">
                    <canvas id="crisisChart"></canvas>
                </div>

                <div id="crisisMetrics" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px; font-family: 'JetBrains Mono'; font-size: 0.8rem; color: #ccc;">
                    <div style="border: 1px solid #00f3ff; padding: 10px; background: rgba(0, 243, 255, 0.05);">
                        <div style="color: #00f3ff; border-bottom: 1px solid #00f3ff; margin-bottom: 10px; padding-bottom: 5px; font-weight: bold;">PORTFOLIO PERFORMANCE</div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;"><span>MAX DRAWDOWN:</span> <span id="port_dd" style="color: #fff;">0.00%</span></div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;"><span>VOLATILITY (ANN):</span> <span id="port_vol" style="color: #fff;">0.00%</span></div>
                        <div style="display: flex; justify-content: space-between;"><span>TOTAL RETURN:</span> <span id="port_ret" style="color: #fff;">0.00%</span></div>
                    </div>
                    <div style="border: 1px solid #666; padding: 10px; background: rgba(100, 100, 100, 0.1);">
                        <div style="color: #888; border-bottom: 1px solid #666; margin-bottom: 10px; padding-bottom: 5px; font-weight: bold;">MARKET BENCHMARK</div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;"><span>MAX DRAWDOWN:</span> <span id="mkt_dd" style="color: #ccc;">0.00%</span></div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;"><span>VOLATILITY (ANN):</span> <span id="mkt_vol" style="color: #ccc;">0.00%</span></div>
                        <div style="display: flex; justify-content: space-between;"><span>TOTAL RETURN:</span> <span id="mkt_ret" style="color: #ccc;">0.00%</span></div>
                    </div>
                </div>

                <div style="font-size: 0.7rem; color: #888; margin-top: 15px; font-style: italic;">
                    * Hypothetical performance based on portfolio beta and current risk profile. PAST PERFORMANCE IS NOT INDICATIVE OF FUTURE RESULTS.
                </div>
            </div>

            <div id="document-body">
                <strong>Coverage Update</strong>
<h2>Key Metrics</h2>
<strong>AAPL</strong>
<ul>
<li>Price: $277.18</li>
<li>P/E: 37.2</li>
<li>Vol: 31,711,233</li>
</ul>
<strong>AMZN</strong>
<ul>
<li>Price: $227.92</li>
<li>P/E: 32.2</li>
<li>Vol: 23,202,026</li>
</ul>
<strong>GOOGL</strong>
<ul>
<li>Price: $317.08</li>
<li>P/E: 31.3</li>
<li>Vol: 30,125,542</li>
</ul>
<strong>META</strong>
<ul>
<li>Price: $656.96</li>
<li>P/E: 29.1</li>
<li>Vol: 12,937,317</li>
</ul>
<strong>MSFT</strong>
<ul>
<li>Price: $492.02</li>
<li>P/E: 35.0</li>
<li>Vol: 14,081,114</li>
</ul>
<strong>NVDA</strong>
<ul>
<li>Price: $184.97</li>
<li>P/E: 45.9</li>
<li>Vol: 142,114,605</li>
</ul>
<strong>TSLA</strong>
<ul>
<li>Price: $445.17</li>
<li>P/E: 307.0</li>
<li>Vol: 60,868,108</li>
</ul>
<h2>Analyst Commentary</h2>
<p>Recent news flow suggests increased volatility in the tech sector.</p>
<ul>
<li>  <strong>AAPL:</strong> What Trump's Nvidia China sales approval means for the Mag 7</li>
</ul>
<ul>
<li>  <strong>NVDA:</strong> OpenAI CEO joins Jimmy Fallon following Nvidia CEO's Joe Rogan chat</li>
</ul>
<ul>
<li>  <strong>TSLA:</strong> Stock market today: Dow, S&P 500, Nasdaq futures waver with Fed rate decision on deck</li>
</ul>
<ul>
<li>  <strong>MSFT:</strong> What Trump's Nvidia China sales approval means for the Mag 7</li>
</ul>
<ul>
<li>  <strong>GOOGL:</strong> Stock market today: Dow, S&P 500, Nasdaq futures waver with Fed rate decision on deck</li>
</ul>
<ul>
<li>  <strong>AMZN:</strong> Oracle set to report earnings as Wall Street looks for cracks in the AI bubble</li>
</ul>
<ul>
<li>  <strong>META:</strong> Slack's CEO is joining OpenAI to find the money to pay for all those data centers</li>
</ul>
<h2>Recommendation</h2>
<strong>NEUTRAL</strong> on broad tech indices. <strong>BULLISH</strong> on sovereign silicon plays.
<p>---
<em>Generated by Adam v23.5</em></p>

            </div>

            <div class="provenance-log">
                <div class="log-entry">
                    <span>> HASH_CHECK</span>
                    <span style="color:var(--terminal-green);">015bae6c227655b5a671caf5709b70c6c8c8726b6c9545f0ecc088bc51adcb5e</span>
                </div>
                <div class="log-entry">
                    <span>> SENTIMENT_SCAN</span>
                    <span>100 (DENSITY: 62)</span>
                </div>
                <div class="log-entry">
                    <span>> CONVICTION_LOCK</span>
                    <span>50%</span>
                </div>
                <div class="log-entry">
                    <span>> CRITIQUE_LOG</span>
                    <span>"Agent Risk_Engine reviewed this intelligence. Verdict: REVIEW_REQUIRED. Sentiment alignment: 100/100. Cross-reference with knowledge graph completed."</span>
                </div>
            </div>

            <a href="#" class="source-jump-btn" onclick="toggleSource(); return false;" title="View Source JSON">JUMP TO SOURCE</a>

            <div style="margin-top: 40px; border-top: 1px solid #ccc; padding-top: 20px; font-style: italic; color: #666;">
                End of Transmission.
            </div>
        </div>

        <aside class="cyber-sidebar">
            <div class="sidebar-widget">
                <div class="sidebar-title">Intelligence Metadata</div>
                <div class="stat-row"><span>DATE</span> <span class="stat-val">2025-12-10</span></div>
                <div class="stat-row"><span>TYPE</span> <span class="stat-val">NEWSLETTER</span></div>
                <div class="stat-row"><span>CLASS</span> <span class="stat-val">UNCLASSIFIED</span></div>
                <div class="stat-row"><span>PROVENANCE</span> <span class="stat-val" title="015bae6c227655b5a671caf5709b70c6c8c8726b6c9545f0ecc088bc51adcb5e">015bae6c</span></div>
            </div>

            <div class="sidebar-widget">
                <div class="sidebar-title">Sentiment Analysis</div>
                <div class="stat-row"><span>SCORE</span> <span class="stat-val">100/100</span></div>
                <div class="sentiment-bar">
                    <div class="sentiment-fill" style="width: 100%;"></div>
                </div>
            </div>

            <div class="sidebar-widget">
                <div class="sidebar-title">Detected Entities</div>
                <div class="tag-cloud">
                    <a href="market_mayhem_archive_v24.html?search=CN_PBOC" class="tag" style="text-decoration:none;">CN_PBOC</a><a href="market_mayhem_archive_v24.html?search=US_FED" class="tag" style="text-decoration:none;">US_FED</a><a href="market_mayhem_archive_v24.html?search=AI" class="tag" style="text-decoration:none; border-color:#666;">AI</a><a href="market_mayhem_archive_v24.html?search=Tech" class="tag" style="text-decoration:none; border-color:#666;">Tech</a><a href="market_mayhem_archive_v24.html?search=Volatility" class="tag" style="text-decoration:none; border-color:#666;">Volatility</a>
                </div>
            </div>

             <div class="sidebar-widget">
                <div class="sidebar-title">Agent Conviction</div>
                 <div class="stat-row"><span>CONFIDENCE</span> <span class="stat-val">50/100</span></div>
                 <div class="sentiment-bar">
                    <div class="sentiment-fill" style="width: 50%; background: #ffff00;"></div>
                </div>
            </div>

            <div class="sidebar-widget">
                <div class="sidebar-title">Semantic Analysis</div>
                 <div class="stat-row"><span>DENSITY</span> <span class="stat-val">62/100</span></div>
                 <div class="stat-row"><span>PROBABILITY</span> <span class="stat-val">50/100</span></div>
            </div>

             <div class="sidebar-widget" style="border-color: #555;">
                <div class="sidebar-title">Reviewer Agent Log</div>
                 <div style="font-size: 0.75rem; color: #ccc; font-style: italic;">
                    "Agent Risk_Engine reviewed this intelligence. Verdict: REVIEW_REQUIRED. Sentiment alignment: 100/100. Cross-reference with knowledge graph completed."
                </div>
                <div class="stat-row" style="margin-top:10px;"><span>QUALITY SCORE</span> <span class="stat-val">100/100</span></div>
            </div>

             <div class="sidebar-widget">
                <div class="sidebar-title">Contributing Agents</div>
                 <div style="display:flex; flex-direction:column; gap:5px;">
                    <div style="font-size:0.75rem; color:#666;">System Core</div>
                </div>
            </div>
        </aside>
    </div>

    <textarea id="hidden-raw-data" style="display:none;">{
  "title": "\ud83d\udcd1 Equity Research Note: December 10, 2025",
  "date": "2025-12-10",
  "summary": "Market analysis and strategic insights.",
  "type": "NEWSLETTER",
  "full_body": "<strong>Coverage Update</strong>\n<h2>Key Metrics</h2>\n<strong>AAPL</strong>\n<ul>\n<li>Price: $277.18</li>\n<li>P/E: 37.2</li>\n<li>Vol: 31,711,233</li>\n</ul>\n<strong>AMZN</strong>\n<ul>\n<li>Price: $227.92</li>\n<li>P/E: 32.2</li>\n<li>Vol: 23,202,026</li>\n</ul>\n<strong>GOOGL</strong>\n<ul>\n<li>Price: $317.08</li>\n<li>P/E: 31.3</li>\n<li>Vol: 30,125,542</li>\n</ul>\n<strong>META</strong>\n<ul>\n<li>Price: $656.96</li>\n<li>P/E: 29.1</li>\n<li>Vol: 12,937,317</li>\n</ul>\n<strong>MSFT</strong>\n<ul>\n<li>Price: $492.02</li>\n<li>P/E: 35.0</li>\n<li>Vol: 14,081,114</li>\n</ul>\n<strong>NVDA</strong>\n<ul>\n<li>Price: $184.97</li>\n<li>P/E: 45.9</li>\n<li>Vol: 142,114,605</li>\n</ul>\n<strong>TSLA</strong>\n<ul>\n<li>Price: $445.17</li>\n<li>P/E: 307.0</li>\n<li>Vol: 60,868,108</li>\n</ul>\n<h2>Analyst Commentary</h2>\n<p>Recent news flow suggests increased volatility in the tech sector.</p>\n<ul>\n<li>  <strong>AAPL:</strong> What Trump's Nvidia China sales approval means for the Mag 7</li>\n</ul>\n<ul>\n<li>  <strong>NVDA:</strong> OpenAI CEO joins Jimmy Fallon following Nvidia CEO's Joe Rogan chat</li>\n</ul>\n<ul>\n<li>  <strong>TSLA:</strong> Stock market today: Dow, S&P 500, Nasdaq futures waver with Fed rate decision on deck</li>\n</ul>\n<ul>\n<li>  <strong>MSFT:</strong> What Trump's Nvidia China sales approval means for the Mag 7</li>\n</ul>\n<ul>\n<li>  <strong>GOOGL:</strong> Stock market today: Dow, S&P 500, Nasdaq futures waver with Fed rate decision on deck</li>\n</ul>\n<ul>\n<li>  <strong>AMZN:</strong> Oracle set to report earnings as Wall Street looks for cracks in the AI bubble</li>\n</ul>\n<ul>\n<li>  <strong>META:</strong> Slack's CEO is joining OpenAI to find the money to pay for all those data centers</li>\n</ul>\n<h2>Recommendation</h2>\n<strong>NEUTRAL</strong> on broad tech indices. <strong>BULLISH</strong> on sovereign silicon plays.\n<p>---\n<em>Generated by Adam v23.5</em></p>\n",
  "sentiment_score": 100,
  "entities": {
    "tickers": [],
    "agents": [],
    "sovereigns": [
      "CN_PBOC",
      "US_FED"
    ],
    "keywords": [
      "AI",
      "Tech",
      "Volatility"
    ]
  },
  "provenance_hash": "015bae6c227655b5a671caf5709b70c6c8c8726b6c9545f0ecc088bc51adcb5e",
  "filename": "Equity_Research_20251210.html",
  "is_sourced": true,
  "metrics_json": "{}",
  "source_priority": 2,
  "conviction": 50,
  "critique": "Agent Risk_Engine reviewed this intelligence. Verdict: REVIEW_REQUIRED. Sentiment alignment: 100/100. Cross-reference with knowledge graph completed.",
  "quality": 100,
  "semantic_score": 62,
  "probability": 50,
  "outlook_score": 10
}</textarea>

    <script>
        // Chart Injection Logic
        const metricsData = {};
        const crisisData = {"2008_LEHMAN": {"scenario": "2008_LEHMAN", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30], "market": [100.0, 110.23, 107.66, 110.55, 101.81, 104.06, 99.4, 90.8, 77.54, 76.71, 77.27, 70.06, 63.35, 61.74, 34.34, 30.61, 29.89, 30.24, 28.82, 29.77, 26.98, 28.66, 28.29, 24.7, 26.18, 26.26, 25.27, 27.38, 25.23, 25.22], "portfolio": [100.0, 114.77, 106.39, 109.05, 100.71, 107.71, 101.19, 91.55, 72.22, 68.55, 67.89, 58.74, 48.66, 46.46, 14.43, 11.21, 10.87, 11.35, 10.11, 10.42, 9.27, 9.62, 9.57, 7.75, 8.62, 8.83, 8.58, 9.33, 8.12, 7.83], "metrics": {"market": {"max_drawdown": 77.66, "volatility": 156.24, "total_return": -74.78}, "portfolio": {"max_drawdown": 93.25, "volatility": 238.36, "total_return": -92.17}}}, "1987_BLACK_MONDAY": {"scenario": "1987_BLACK_MONDAY", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20], "market": [100.0, 89.69, 86.94, 86.32, 89.23, 94.8, 106.86, 106.16, 94.37, 67.72, 63.43, 55.39, 69.25, 54.91, 53.37, 58.15, 49.5, 51.37, 52.2, 47.87], "portfolio": [100.0, 80.85, 74.52, 71.62, 73.38, 77.45, 91.27, 92.22, 76.74, 41.33, 36.31, 30.68, 44.0, 30.47, 28.15, 32.35, 24.55, 25.79, 25.19, 21.47], "metrics": {"market": {"max_drawdown": 55.2, "volatility": 190.04, "total_return": -52.13}, "portfolio": {"max_drawdown": 78.53, "volatility": 302.39, "total_return": -78.53}}}, "2000_DOTCOM_BUBBLE": {"scenario": "2000_DOTCOM_BUBBLE", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45], "market": [100.0, 96.99, 91.57, 88.46, 85.33, 80.08, 75.41, 72.93, 74.57, 65.14, 67.09, 65.52, 64.29, 66.75, 62.62, 61.85, 62.73, 57.28, 54.0, 60.15, 61.52, 67.28, 67.34, 70.2, 69.22, 67.33, 65.04, 63.45, 63.6, 63.93, 70.41, 68.83, 68.28, 69.56, 66.89, 67.68, 67.28, 66.41, 64.54, 61.5, 60.65, 61.88, 61.06, 58.51, 57.49], "portfolio": [100.0, 93.79, 85.36, 81.18, 74.82, 66.12, 59.08, 56.34, 58.78, 52.73, 59.11, 57.33, 57.57, 61.0, 55.98, 51.96, 53.32, 48.23, 45.07, 52.63, 53.32, 61.55, 58.84, 62.95, 58.35, 54.63, 52.54, 51.2, 50.61, 48.18, 55.15, 52.82, 52.37, 54.15, 49.7, 51.24, 50.2, 50.56, 48.35, 44.23, 42.1, 44.9, 45.04, 42.14, 41.74], "metrics": {"market": {"max_drawdown": 46.0, "volatility": 71.51, "total_return": -42.51}, "portfolio": {"max_drawdown": 58.26, "volatility": 111.52, "total_return": -58.26}}}, "2020_COVID": {"scenario": "2020_COVID", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40], "market": [100.0, 94.97, 95.97, 94.59, 87.63, 90.78, 83.87, 82.44, 88.68, 93.54, 92.44, 95.8, 92.78, 95.41, 89.42, 83.03, 89.61, 85.13, 78.95, 74.79, 89.53, 86.83, 63.86, 71.59, 63.27, 58.92, 50.9, 53.23, 54.45, 49.48, 47.11, 48.37, 44.56, 40.84, 41.4, 40.03, 36.78, 34.65, 37.27, 38.5], "portfolio": [100.0, 90.46, 94.92, 90.44, 77.75, 84.47, 72.39, 71.23, 80.38, 85.84, 84.39, 85.6, 78.73, 82.31, 72.96, 64.82, 70.0, 66.34, 59.64, 59.2, 80.96, 84.79, 56.34, 67.07, 52.46, 48.65, 38.35, 40.85, 42.29, 35.67, 32.19, 33.72, 29.1, 24.9, 24.52, 23.29, 19.81, 17.68, 19.34, 20.47], "metrics": {"market": {"max_drawdown": 65.35, "volatility": 125.23, "total_return": -61.5}, "portfolio": {"max_drawdown": 82.32, "volatility": 198.67, "total_return": -79.53}}}, "2022_INFLATION_SHOCK": {"scenario": "2022_INFLATION_SHOCK", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60], "market": [100.0, 97.14, 96.29, 95.24, 95.86, 96.37, 99.65, 104.94, 108.8, 107.87, 109.11, 107.17, 108.08, 108.65, 106.6, 103.98, 98.25, 92.06, 87.54, 91.49, 90.84, 84.72, 83.32, 83.44, 85.67, 90.87, 86.7, 88.6, 89.82, 80.11, 83.96, 83.72, 80.8, 79.21, 78.64, 71.34, 72.17, 70.23, 67.79, 70.07, 70.79, 65.52, 65.64, 66.44, 65.68, 61.84, 58.45, 57.49, 56.91, 55.68, 56.2, 55.5, 54.47, 53.63, 50.94, 50.34, 54.0, 52.96, 51.92, 51.87], "portfolio": [100.0, 95.79, 92.86, 93.56, 94.36, 93.4, 94.24, 102.68, 105.69, 104.57, 104.38, 102.06, 103.42, 109.06, 104.89, 104.75, 94.25, 82.96, 75.91, 78.96, 81.19, 72.97, 73.78, 74.28, 72.15, 78.12, 72.19, 73.05, 74.46, 60.93, 68.96, 70.67, 65.68, 61.9, 62.07, 56.26, 57.48, 53.81, 50.73, 51.94, 51.54, 46.07, 45.95, 46.32, 46.22, 44.56, 41.43, 39.79, 38.76, 38.48, 39.32, 38.35, 36.68, 36.82, 34.13, 33.12, 35.13, 33.95, 33.02, 33.52], "metrics": {"market": {"max_drawdown": 53.86, "volatility": 56.7, "total_return": -48.13}, "portfolio": {"max_drawdown": 69.72, "volatility": 85.24, "total_return": -66.48}}}, "2025_AI_SHOCK": {"scenario": "2025_AI_SHOCK", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35], "market": [100.0, 105.76, 109.59, 102.91, 92.58, 101.96, 108.5, 126.97, 125.3, 112.42, 108.67, 101.21, 96.86, 82.49, 77.49, 76.7, 75.95, 77.62, 72.3, 66.27, 60.84, 54.06, 53.34, 39.37, 36.21, 36.35, 28.56, 29.54, 27.61, 26.12, 27.32, 26.59, 27.06, 26.26, 26.11], "portfolio": [100.0, 109.06, 115.48, 107.22, 96.46, 110.84, 124.57, 156.96, 157.94, 132.29, 120.78, 102.16, 93.6, 68.72, 66.89, 69.71, 72.27, 74.3, 67.51, 60.39, 49.44, 41.01, 39.79, 26.52, 22.22, 22.18, 14.19, 14.85, 13.46, 12.59, 13.65, 13.78, 14.1, 13.86, 14.0], "metrics": {"market": {"max_drawdown": 79.44, "volatility": 130.27, "total_return": -73.89}, "portfolio": {"max_drawdown": 92.03, "volatility": 205.57, "total_return": -86.0}}}};

        // --- Metrics Chart ---
        if (metricsData && Object.keys(metricsData).length > 0) {
            const ctx = document.getElementById('financialChart');
            const container = document.getElementById('financialChartContainer');

            // Basic parsing of metrics structure (assuming flat or Year->Val)
            let labels = [];
            let values = [];
            let labelName = "Metric";

            // Try to find a timeseries
            for (const [key, val] of Object.entries(metricsData)) {
                if (typeof val === 'object') {
                    // Likely year -> value
                    labels = Object.keys(val);
                    values = Object.values(val).map(v => parseFloat(v.replace(/[^0-9.-]/g, '')));
                    labelName = key;
                    break;
                }
            }

            if (labels.length > 0) {
                container.style.display = 'block';
                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: labelName,
                            data: values,
                            backgroundColor: 'rgba(204, 0, 0, 0.5)',
                            borderColor: '#cc0000',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { labels: { color: '#ccc' } }
                        },
                        scales: {
                            y: { grid: { color: '#333' }, ticks: { color: '#888' } },
                            x: { grid: { color: '#333' }, ticks: { color: '#888' } }
                        }
                    }
                });
            }
        }

        // --- Crisis Simulation Logic ---
        let crisisChartInstance = null;

        window.renderCrisis = function(scenarioName) {
            if (!crisisData || !crisisData[scenarioName]) return;

            // UI Feedback for Buttons
            document.querySelectorAll('.crisis-btn').forEach(btn => {
                btn.style.borderColor = btn.innerText.includes(scenarioName.split('_')[1]) ? '#cc0000' : '#666';
                btn.style.color = btn.innerText.includes(scenarioName.split('_')[1]) ? '#cc0000' : '#ccc';
            });

            const data = crisisData[scenarioName];

            // Update Metrics Display
            if (data.metrics) {
                const p = data.metrics.portfolio;
                const m = data.metrics.market;

                document.getElementById('port_dd').innerText = p.max_drawdown.toFixed(2) + '%';
                document.getElementById('port_vol').innerText = p.volatility.toFixed(2) + '%';
                document.getElementById('port_ret').innerText = p.total_return.toFixed(2) + '%';

                // Color code return
                document.getElementById('port_ret').style.color = p.total_return >= 0 ? '#00f3ff' : '#ff4444';

                document.getElementById('mkt_dd').innerText = m.max_drawdown.toFixed(2) + '%';
                document.getElementById('mkt_vol').innerText = m.volatility.toFixed(2) + '%';
                document.getElementById('mkt_ret').innerText = m.total_return.toFixed(2) + '%';

                document.getElementById('mkt_ret').style.color = m.total_return >= 0 ? '#ccc' : '#cc0000';
            }

            const ctx = document.getElementById('crisisChart').getContext('2d');

            if (crisisChartInstance) {
                crisisChartInstance.destroy();
            }

            crisisChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: data.labels,
                    datasets: [
                        {
                            label: 'Your Portfolio (Simulated)',
                            data: data.portfolio,
                            borderColor: '#00f3ff',
                            backgroundColor: 'rgba(0, 243, 255, 0.1)',
                            borderWidth: 2,
                            tension: 0.4,
                            pointRadius: 0
                        },
                        {
                            label: 'Market Benchmark',
                            data: data.market,
                            borderColor: '#666',
                            borderDash: [5, 5],
                            borderWidth: 1,
                            pointRadius: 0,
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        mode: 'index',
                        intersect: false,
                    },
                    plugins: {
                        legend: { labels: { color: '#ccc', font: { family: 'JetBrains Mono' } } },
                        title: {
                            display: true,
                            text: 'STRESS TEST SCENARIO: ' + scenarioName.replace(/_/g, ' '),
                            color: '#cc0000',
                            font: { family: 'JetBrains Mono' }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0,0,0,0.8)',
                            titleColor: '#cc0000',
                            bodyColor: '#fff',
                            borderColor: '#333',
                            borderWidth: 1
                        }
                    },
                    scales: {
                        y: {
                            grid: { color: '#333' },
                            ticks: { color: '#888', callback: function(value) { return value + '%'; } }
                        },
                        x: {
                            grid: { color: '#333' },
                            ticks: { display: false }
                        }
                    }
                }
            });
        };

        // Auto-Run Default Crisis if Data Available
        if (crisisData && Object.keys(crisisData).length > 0) {
            document.getElementById('crisisSimContainer').style.display = 'block';

            // Parse URL parameters for ?sim=SCENARIO_NAME
            const urlParams = new URLSearchParams(window.location.search);
            const simParam = urlParams.get('sim');

            // slight delay to ensure Chart.js loaded
            setTimeout(() => {
                if (simParam && crisisData[simParam]) {
                    renderCrisis(simParam);
                    // Scroll to container
                    document.getElementById('crisisSimContainer').scrollIntoView({ behavior: 'smooth' });
                } else {
                    renderCrisis('2008_LEHMAN');
                }
            }, 100);
        }
    </script>
</body>
</html>