<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADAM v23.5 :: üå©Ô∏è Market Mayhem: December 09, 2025</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/market_mayhem_tiers.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@300;400;600;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/nav.js" defer></script>
    <script src="js/market_mayhem_viewer.js" defer></script>
</head>
<body class="tier-high">

    <div id="system2-overlay" class="system2-overlay">
        <div class="system2-terminal">
            <div id="sys2-content"></div>
        </div>
    </div>

    <div id="toast-container" class="cyber-toast-container"></div>

    <div id="raw-source-modal" class="raw-source-modal">
        <div class="raw-source-header">
            <span>SOURCE_DATA.JSON</span>
            <span style="cursor:pointer; color:#cc0000;" onclick="toggleSource()">[CLOSE]</span>
        </div>
        <div class="raw-source-content" id="raw-source-content"></div>
    </div>

    <div class="doc-toolbar" style="display: flex;">
        <div class="toolbar-item" onclick="window.location.href='market_mayhem_archive_v24.html'"><strong>FILE</strong></div>
        <div class="toolbar-item" onclick="toggleRedactionMode()">REDACT</div>
        <div class="toolbar-item" onclick="printReport()">PRINT</div>
        <div class="toolbar-item" onclick="shareReport()">SHARE</div>
        <div class="toolbar-item" onclick="downloadReport()">DOWNLOAD</div>
        <div class="toolbar-item" onclick="toggleTheme()">VIEW</div>
        <div class="toolbar-item" onclick="showToast('INSERT: PERMISSION DENIED')">INSERT</div>
        <div class="toolbar-item" onclick="showToast('FORMAT: LOCKED')">FORMAT</div>
        <div class="toolbar-item" onclick="runVerification()" style="color: #0078d7;"><strong>VERIFY</strong></div>
        <div style="flex-grow:1;"></div>
        <div class="toolbar-item" style="color:#666;">ADAM_V26_EDITOR</div>
    </div>

    <div style="max-width: 1400px; margin: 0 auto; padding: 10px 20px; display:flex; justify-content:space-between; align-items:center; display: none;">
        <a href="market_mayhem_archive_v24.html" class="cyber-btn">&larr; RETURN TO ARCHIVE</a>
        <div style="font-family:'JetBrains Mono'; font-size:0.7rem; color:#666;">SECURE CONNECTION ESTABLISHED</div>
    </div>

    <div class="newsletter-wrapper">
        <div class="paper-sheet" id="paper-sheet">

            <div id="top-secret-stamp" class="top-secret-stamp">TOP SECRET</div>

            <div class="doc-header-ui" style="display: flex;">
                <span id="verification-status">CONFIDENTIAL // SYSTEM 2 REVIEW</span>
                <span>51c36dc0</span>
            </div>

            <div style="display:flex; justify-content:space-between; font-family:'JetBrains Mono'; font-size:0.8rem; color:#666; margin-bottom:20px; margin-top: 20px;">
                <span>2025-12-09</span>
                <span>ID: 51c36dc0</span>
            </div>

            <h1 class="title">üå©Ô∏è Market Mayhem: December 09, 2025</h1>

            <div class="doc-metadata-panel" style="display: grid;">
                <div class="doc-metadata-item"><strong>Classification</strong>UNCLASSIFIED</div>
                <div class="doc-metadata-item"><strong>Conviction</strong>50/100</div>
                <div class="doc-metadata-item"><strong>Sentiment</strong>50/100</div>
                <div class="doc-metadata-item"><strong>Reviewer</strong>Overseer</div>
            </div>

            <div id="financialChartContainer" style="display:none; margin-bottom: 30px;">
                <canvas id="financialChart"></canvas>
            </div>

            <div id="crisisSimContainer" style="display:none; margin-bottom: 30px; border: 1px solid #cc0000; padding: 20px; background: rgba(50, 0, 0, 0.2);">
                <h3 style="color: #cc0000; margin-top: 0; font-family: 'JetBrains Mono'; border-bottom: 1px solid #cc0000; padding-bottom: 10px; margin-bottom: 20px;">CRISIS SIMULATOR // STRESS TEST</h3>

                <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px; margin-bottom: 20px;">
                    <div class="crisis-btn" onclick="renderCrisis('2008_LEHMAN')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2008 LEHMAN
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('1987_BLACK_MONDAY')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        1987 BLACK MON
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('2000_DOTCOM_BUBBLE')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2000 DOTCOM
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('2020_COVID')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2020 PANDEMIC
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('2022_INFLATION_SHOCK')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2022 INFLATION
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('2025_AI_SHOCK')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2025 AI SHOCK
                    </div>
                </div>

                <div style="height: 300px; position: relative;">
                    <canvas id="crisisChart"></canvas>
                </div>

                <div id="crisisMetrics" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px; font-family: 'JetBrains Mono'; font-size: 0.8rem; color: #ccc;">
                    <div style="border: 1px solid #00f3ff; padding: 10px; background: rgba(0, 243, 255, 0.05);">
                        <div style="color: #00f3ff; border-bottom: 1px solid #00f3ff; margin-bottom: 10px; padding-bottom: 5px; font-weight: bold;">PORTFOLIO PERFORMANCE</div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;"><span>MAX DRAWDOWN:</span> <span id="port_dd" style="color: #fff;">0.00%</span></div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;"><span>VOLATILITY (ANN):</span> <span id="port_vol" style="color: #fff;">0.00%</span></div>
                        <div style="display: flex; justify-content: space-between;"><span>TOTAL RETURN:</span> <span id="port_ret" style="color: #fff;">0.00%</span></div>
                    </div>
                    <div style="border: 1px solid #666; padding: 10px; background: rgba(100, 100, 100, 0.1);">
                        <div style="color: #888; border-bottom: 1px solid #666; margin-bottom: 10px; padding-bottom: 5px; font-weight: bold;">MARKET BENCHMARK</div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;"><span>MAX DRAWDOWN:</span> <span id="mkt_dd" style="color: #ccc;">0.00%</span></div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;"><span>VOLATILITY (ANN):</span> <span id="mkt_vol" style="color: #ccc;">0.00%</span></div>
                        <div style="display: flex; justify-content: space-between;"><span>TOTAL RETURN:</span> <span id="mkt_ret" style="color: #ccc;">0.00%</span></div>
                    </div>
                </div>

                <div style="font-size: 0.7rem; color: #888; margin-top: 15px; font-style: italic;">
                    * Hypothetical performance based on portfolio beta and current risk profile. PAST PERFORMANCE IS NOT INDICATIVE OF FUTURE RESULTS.
                </div>
            </div>

            <div id="document-body">
                <strong>"The Calm Before the Quantum Storm?"</strong>
<p>Welcome to <em>Market Mayhem</em>, your autonomous briefing on the chaos of capital.</p>
<h2>üìä Market Pulse</h2>
<h3>AAPL</h3>
<ul>
<li><strong>Price:</strong> $277.89</li>
<li><strong>P/E:</strong> 37.2x</li>
<li><strong>Market Cap:</strong> $4,123,996,192,768</li>
</ul>
<h3>AMZN</h3>
<ul>
<li><strong>Price:</strong> $226.89</li>
<li><strong>P/E:</strong> 32.1x</li>
<li><strong>Market Cap:</strong> $2,425,503,088,640</li>
</ul>
<h3>GOOGL</h3>
<ul>
<li><strong>Price:</strong> $313.72</li>
<li><strong>P/E:</strong> 31.0x</li>
<li><strong>Market Cap:</strong> $3,799,814,766,592</li>
</ul>
<h3>META</h3>
<ul>
<li><strong>Price:</strong> $666.80</li>
<li><strong>P/E:</strong> 29.5x</li>
<li><strong>Market Cap:</strong> $1,680,687,759,360</li>
</ul>
<h3>MSFT</h3>
<ul>
<li><strong>Price:</strong> $491.02</li>
<li><strong>P/E:</strong> 34.9x</li>
<li><strong>Market Cap:</strong> $3,649,833,271,296</li>
</ul>
<h3>NVDA</h3>
<ul>
<li><strong>Price:</strong> $185.55</li>
<li><strong>P/E:</strong> 46.0x</li>
<li><strong>Market Cap:</strong> $4,517,586,272,256</li>
</ul>
<h3>TSLA</h3>
<ul>
<li><strong>Price:</strong> $439.58</li>
<li><strong>P/E:</strong> 301.1x</li>
<li><strong>Market Cap:</strong> $1,461,963,587,584</li>
</ul>
<h2>ü§ñ Adam's Take</h2>
<em>Autonomous synthesis based on HDKG analysis:</em>
<p>> The market is showing signs of high valuation multiples in the tech sector.
> P/E ratios for NVDA and TSLA suggest priced-in perfection.
> CAUTION: Yield curve dynamics are not yet integrated into this specific snapshot.</p>
<p>---
<em>Generated by Adam v23.5 Autonomous Financial Analyst</em></p>

            </div>

            <div class="provenance-log">
                <div class="log-entry">
                    <span>> HASH_CHECK</span>
                    <span style="color:var(--terminal-green);">51c36dc06f06165d29148af8ba68140fc6db5f64955ef24cdc90f716df36ac49</span>
                </div>
                <div class="log-entry">
                    <span>> SENTIMENT_SCAN</span>
                    <span>50 (DENSITY: 70)</span>
                </div>
                <div class="log-entry">
                    <span>> CONVICTION_LOCK</span>
                    <span>50%</span>
                </div>
                <div class="log-entry">
                    <span>> CRITIQUE_LOG</span>
                    <span>"Agent Overseer reviewed this intelligence. Verdict: VALIDATED. Sentiment alignment: 50/100. Cross-reference with knowledge graph completed."</span>
                </div>
            </div>

            <a href="#" class="source-jump-btn" onclick="toggleSource(); return false;" title="View Source JSON">JUMP TO SOURCE</a>

            <div style="margin-top: 40px; border-top: 1px solid #ccc; padding-top: 20px; font-style: italic; color: #666;">
                End of Transmission.
            </div>
        </div>

        <aside class="cyber-sidebar">
            <div class="sidebar-widget">
                <div class="sidebar-title">Intelligence Metadata</div>
                <div class="stat-row"><span>DATE</span> <span class="stat-val">2025-12-09</span></div>
                <div class="stat-row"><span>TYPE</span> <span class="stat-val">NEWSLETTER</span></div>
                <div class="stat-row"><span>CLASS</span> <span class="stat-val">UNCLASSIFIED</span></div>
                <div class="stat-row"><span>PROVENANCE</span> <span class="stat-val" title="51c36dc06f06165d29148af8ba68140fc6db5f64955ef24cdc90f716df36ac49">51c36dc0</span></div>
            </div>

            <div class="sidebar-widget">
                <div class="sidebar-title">Sentiment Analysis</div>
                <div class="stat-row"><span>SCORE</span> <span class="stat-val">50/100</span></div>
                <div class="sentiment-bar">
                    <div class="sentiment-fill" style="width: 50%;"></div>
                </div>
            </div>

            <div class="sidebar-widget">
                <div class="sidebar-title">Detected Entities</div>
                <div class="tag-cloud">
                    <a href="market_mayhem_archive_v24.html?search=Tech" class="tag" style="text-decoration:none; border-color:#666;">Tech</a>
                </div>
            </div>

             <div class="sidebar-widget">
                <div class="sidebar-title">Agent Conviction</div>
                 <div class="stat-row"><span>CONFIDENCE</span> <span class="stat-val">50/100</span></div>
                 <div class="sentiment-bar">
                    <div class="sentiment-fill" style="width: 50%; background: #ffff00;"></div>
                </div>
            </div>

            <div class="sidebar-widget">
                <div class="sidebar-title">Semantic Analysis</div>
                 <div class="stat-row"><span>DENSITY</span> <span class="stat-val">70/100</span></div>
                 <div class="stat-row"><span>PROBABILITY</span> <span class="stat-val">50/100</span></div>
            </div>

             <div class="sidebar-widget" style="border-color: #555;">
                <div class="sidebar-title">Reviewer Agent Log</div>
                 <div style="font-size: 0.75rem; color: #ccc; font-style: italic;">
                    "Agent Overseer reviewed this intelligence. Verdict: VALIDATED. Sentiment alignment: 50/100. Cross-reference with knowledge graph completed."
                </div>
                <div class="stat-row" style="margin-top:10px;"><span>QUALITY SCORE</span> <span class="stat-val">100/100</span></div>
            </div>

             <div class="sidebar-widget">
                <div class="sidebar-title">Contributing Agents</div>
                 <div style="display:flex; flex-direction:column; gap:5px;">
                    <div style="font-size:0.75rem; color:#666;">System Core</div>
                </div>
            </div>
        </aside>
    </div>

    <textarea id="hidden-raw-data" style="display:none;">{
  "title": "\ud83c\udf29\ufe0f Market Mayhem: December 09, 2025",
  "date": "2025-12-09",
  "summary": "Market analysis and strategic insights.",
  "type": "NEWSLETTER",
  "full_body": "<strong>\"The Calm Before the Quantum Storm?\"</strong>\n<p>Welcome to <em>Market Mayhem</em>, your autonomous briefing on the chaos of capital.</p>\n<h2>\ud83d\udcca Market Pulse</h2>\n<h3>AAPL</h3>\n<ul>\n<li><strong>Price:</strong> $277.89</li>\n<li><strong>P/E:</strong> 37.2x</li>\n<li><strong>Market Cap:</strong> $4,123,996,192,768</li>\n</ul>\n<h3>AMZN</h3>\n<ul>\n<li><strong>Price:</strong> $226.89</li>\n<li><strong>P/E:</strong> 32.1x</li>\n<li><strong>Market Cap:</strong> $2,425,503,088,640</li>\n</ul>\n<h3>GOOGL</h3>\n<ul>\n<li><strong>Price:</strong> $313.72</li>\n<li><strong>P/E:</strong> 31.0x</li>\n<li><strong>Market Cap:</strong> $3,799,814,766,592</li>\n</ul>\n<h3>META</h3>\n<ul>\n<li><strong>Price:</strong> $666.80</li>\n<li><strong>P/E:</strong> 29.5x</li>\n<li><strong>Market Cap:</strong> $1,680,687,759,360</li>\n</ul>\n<h3>MSFT</h3>\n<ul>\n<li><strong>Price:</strong> $491.02</li>\n<li><strong>P/E:</strong> 34.9x</li>\n<li><strong>Market Cap:</strong> $3,649,833,271,296</li>\n</ul>\n<h3>NVDA</h3>\n<ul>\n<li><strong>Price:</strong> $185.55</li>\n<li><strong>P/E:</strong> 46.0x</li>\n<li><strong>Market Cap:</strong> $4,517,586,272,256</li>\n</ul>\n<h3>TSLA</h3>\n<ul>\n<li><strong>Price:</strong> $439.58</li>\n<li><strong>P/E:</strong> 301.1x</li>\n<li><strong>Market Cap:</strong> $1,461,963,587,584</li>\n</ul>\n<h2>\ud83e\udd16 Adam's Take</h2>\n<em>Autonomous synthesis based on HDKG analysis:</em>\n<p>> The market is showing signs of high valuation multiples in the tech sector.\n> P/E ratios for NVDA and TSLA suggest priced-in perfection.\n> CAUTION: Yield curve dynamics are not yet integrated into this specific snapshot.</p>\n<p>---\n<em>Generated by Adam v23.5 Autonomous Financial Analyst</em></p>\n",
  "sentiment_score": 50,
  "entities": {
    "tickers": [],
    "agents": [],
    "sovereigns": [],
    "keywords": [
      "Tech"
    ]
  },
  "provenance_hash": "51c36dc06f06165d29148af8ba68140fc6db5f64955ef24cdc90f716df36ac49",
  "filename": "Market_Mayhem_20251209.html",
  "is_sourced": true,
  "metrics_json": "{}",
  "source_priority": 2,
  "conviction": 50,
  "critique": "Agent Overseer reviewed this intelligence. Verdict: VALIDATED. Sentiment alignment: 50/100. Cross-reference with knowledge graph completed.",
  "quality": 100,
  "semantic_score": 70,
  "probability": 50,
  "outlook_score": 10
}</textarea>

    <script>
        // Chart Injection Logic
        const metricsData = {};
        const crisisData = {"2008_LEHMAN": {"scenario": "2008_LEHMAN", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30], "market": [100.0, 95.35, 83.76, 72.21, 73.51, 70.98, 62.91, 63.71, 65.79, 65.14, 61.05, 60.39, 60.03, 51.76, 32.76, 32.81, 29.17, 28.79, 28.43, 30.22, 31.63, 31.08, 28.91, 30.01, 29.59, 30.39, 32.31, 35.38, 36.17, 34.7], "portfolio": [100.0, 97.27, 83.45, 71.19, 70.84, 68.81, 60.59, 64.64, 65.51, 63.52, 59.65, 57.91, 57.38, 48.94, 30.78, 28.5, 28.96, 28.29, 30.15, 32.02, 33.57, 30.54, 27.33, 27.95, 27.06, 28.29, 30.01, 31.35, 31.66, 30.71], "metrics": {"market": {"max_drawdown": 71.57, "volatility": 139.11, "total_return": -65.3}, "portfolio": {"max_drawdown": 72.94, "volatility": 143.78, "total_return": -69.29}}}, "1987_BLACK_MONDAY": {"scenario": "1987_BLACK_MONDAY", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20], "market": [100.0, 100.92, 105.53, 108.67, 104.63, 87.11, 85.6, 98.62, 84.43, 101.97, 106.16, 98.49, 62.97, 74.19, 87.3, 85.17, 78.77, 67.59, 62.04, 62.32], "portfolio": [100.0, 100.58, 110.0, 114.38, 112.56, 92.02, 88.43, 99.81, 88.4, 103.21, 109.17, 101.35, 65.65, 81.08, 95.67, 93.58, 87.84, 71.09, 65.52, 65.42], "metrics": {"market": {"max_drawdown": 42.91, "volatility": 215.09, "total_return": -37.68}, "portfolio": {"max_drawdown": 42.8, "volatility": 220.77, "total_return": -34.58}}}, "2000_DOTCOM_BUBBLE": {"scenario": "2000_DOTCOM_BUBBLE", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45], "market": [100.0, 96.62, 92.35, 92.05, 100.64, 100.19, 95.81, 101.28, 101.89, 101.82, 104.51, 101.97, 100.54, 91.89, 82.36, 85.34, 89.73, 87.64, 85.99, 90.73, 84.93, 88.44, 85.39, 83.39, 82.26, 78.45, 75.94, 79.97, 79.71, 78.97, 82.05, 81.37, 81.8, 76.49, 71.72, 70.0, 70.03, 62.34, 61.31, 60.75, 63.93, 64.51, 67.4, 66.37, 63.84], "portfolio": [100.0, 97.25, 92.28, 91.6, 96.35, 95.54, 86.91, 93.17, 90.16, 98.57, 96.65, 89.08, 84.0, 77.15, 70.81, 73.17, 77.88, 72.27, 74.93, 79.7, 75.22, 77.77, 78.01, 73.96, 74.05, 72.89, 68.14, 69.92, 69.44, 66.84, 67.78, 68.28, 68.12, 63.51, 57.39, 55.86, 56.17, 51.22, 47.53, 47.22, 50.3, 51.0, 53.08, 53.49, 51.34], "metrics": {"market": {"max_drawdown": 41.87, "volatility": 69.32, "total_return": -36.16}, "portfolio": {"max_drawdown": 52.78, "volatility": 79.09, "total_return": -48.66}}}, "2020_COVID": {"scenario": "2020_COVID", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40], "market": [100.0, 97.42, 100.28, 96.29, 94.68, 92.66, 93.36, 99.83, 95.64, 107.25, 113.2, 118.68, 116.39, 112.67, 108.64, 116.84, 112.7, 125.55, 115.83, 97.23, 88.59, 105.58, 119.73, 131.6, 135.2, 143.08, 164.27, 160.06, 172.84, 152.04, 146.28, 138.64, 133.73, 140.49, 123.22, 117.93, 121.57, 123.75, 114.93, 115.97], "portfolio": [100.0, 96.81, 102.24, 98.23, 94.39, 91.65, 88.97, 94.83, 93.94, 105.39, 106.4, 110.82, 109.2, 103.64, 103.81, 110.62, 110.35, 119.63, 108.84, 84.43, 74.59, 91.02, 105.03, 110.81, 116.36, 124.36, 142.89, 139.45, 149.58, 130.32, 123.33, 112.11, 106.14, 111.24, 100.46, 97.41, 103.06, 106.15, 97.56, 96.54], "metrics": {"market": {"max_drawdown": 33.5, "volatility": 123.14, "total_return": 15.97}, "portfolio": {"max_drawdown": 37.65, "volatility": 134.65, "total_return": -3.46}}}, "2022_INFLATION_SHOCK": {"scenario": "2022_INFLATION_SHOCK", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60], "market": [100.0, 97.16, 96.83, 91.12, 92.15, 92.7, 90.15, 89.47, 93.14, 88.08, 94.0, 91.45, 88.55, 91.85, 87.74, 86.75, 90.65, 85.16, 89.14, 87.04, 80.72, 75.44, 74.49, 69.74, 69.58, 75.31, 70.69, 67.3, 63.04, 58.12, 52.65, 54.48, 51.21, 47.54, 46.92, 47.93, 48.43, 46.28, 45.15, 45.52, 45.82, 43.57, 42.39, 42.02, 41.43, 41.18, 41.97, 42.48, 43.64, 41.91, 41.97, 42.5, 41.96, 42.75, 41.65, 38.86, 37.04, 36.67, 36.96, 37.04], "portfolio": [100.0, 97.55, 94.4, 89.64, 89.11, 87.69, 84.76, 82.64, 82.81, 79.16, 84.59, 83.12, 80.33, 83.21, 79.17, 79.89, 86.84, 81.12, 81.97, 81.35, 77.0, 71.39, 70.57, 68.63, 68.47, 74.14, 69.63, 65.19, 63.31, 54.66, 48.79, 49.18, 44.03, 39.97, 38.95, 39.2, 38.05, 37.71, 36.8, 37.97, 37.76, 37.36, 36.99, 37.55, 36.77, 36.18, 37.05, 38.24, 39.79, 38.93, 38.36, 36.84, 36.45, 38.5, 38.66, 36.31, 35.41, 35.98, 35.35, 36.29], "metrics": {"market": {"max_drawdown": 63.33, "volatility": 60.79, "total_return": -62.96}, "portfolio": {"max_drawdown": 64.65, "volatility": 67.86, "total_return": -63.71}}}, "2025_AI_SHOCK": {"scenario": "2025_AI_SHOCK", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35], "market": [100.0, 97.87, 81.22, 66.23, 68.59, 71.51, 61.22, 55.75, 58.03, 47.46, 51.07, 41.31, 43.02, 44.46, 33.98, 34.75, 35.43, 32.2, 33.72, 26.36, 30.98, 28.42, 32.03, 34.56, 27.99, 28.76, 27.71, 24.81, 23.57, 21.14, 22.11, 25.98, 23.97, 25.62, 22.81], "portfolio": [100.0, 96.0, 78.12, 60.6, 63.22, 63.99, 51.76, 46.44, 47.37, 38.33, 42.16, 33.78, 35.44, 37.83, 30.49, 31.62, 31.69, 30.17, 32.49, 25.77, 29.57, 28.33, 29.66, 31.97, 25.85, 25.79, 25.26, 23.3, 22.44, 20.27, 20.94, 25.55, 23.38, 24.6, 22.38], "metrics": {"market": {"max_drawdown": 78.86, "volatility": 177.18, "total_return": -77.19}, "portfolio": {"max_drawdown": 79.73, "volatility": 177.9, "total_return": -77.62}}}};

        // --- Metrics Chart ---
        if (metricsData && Object.keys(metricsData).length > 0) {
            const ctx = document.getElementById('financialChart');
            const container = document.getElementById('financialChartContainer');

            // Basic parsing of metrics structure (assuming flat or Year->Val)
            let labels = [];
            let values = [];
            let labelName = "Metric";

            // Try to find a timeseries
            for (const [key, val] of Object.entries(metricsData)) {
                if (typeof val === 'object') {
                    // Likely year -> value
                    labels = Object.keys(val);
                    values = Object.values(val).map(v => parseFloat(v.replace(/[^0-9.-]/g, '')));
                    labelName = key;
                    break;
                }
            }

            if (labels.length > 0) {
                container.style.display = 'block';
                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: labelName,
                            data: values,
                            backgroundColor: 'rgba(204, 0, 0, 0.5)',
                            borderColor: '#cc0000',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { labels: { color: '#ccc' } }
                        },
                        scales: {
                            y: { grid: { color: '#333' }, ticks: { color: '#888' } },
                            x: { grid: { color: '#333' }, ticks: { color: '#888' } }
                        }
                    }
                });
            }
        }

        // --- Crisis Simulation Logic ---
        let crisisChartInstance = null;

        window.renderCrisis = function(scenarioName) {
            if (!crisisData || !crisisData[scenarioName]) return;

            // UI Feedback for Buttons
            document.querySelectorAll('.crisis-btn').forEach(btn => {
                btn.style.borderColor = btn.innerText.includes(scenarioName.split('_')[1]) ? '#cc0000' : '#666';
                btn.style.color = btn.innerText.includes(scenarioName.split('_')[1]) ? '#cc0000' : '#ccc';
            });

            const data = crisisData[scenarioName];

            // Update Metrics Display
            if (data.metrics) {
                const p = data.metrics.portfolio;
                const m = data.metrics.market;

                document.getElementById('port_dd').innerText = p.max_drawdown.toFixed(2) + '%';
                document.getElementById('port_vol').innerText = p.volatility.toFixed(2) + '%';
                document.getElementById('port_ret').innerText = p.total_return.toFixed(2) + '%';

                // Color code return
                document.getElementById('port_ret').style.color = p.total_return >= 0 ? '#00f3ff' : '#ff4444';

                document.getElementById('mkt_dd').innerText = m.max_drawdown.toFixed(2) + '%';
                document.getElementById('mkt_vol').innerText = m.volatility.toFixed(2) + '%';
                document.getElementById('mkt_ret').innerText = m.total_return.toFixed(2) + '%';

                document.getElementById('mkt_ret').style.color = m.total_return >= 0 ? '#ccc' : '#cc0000';
            }

            const ctx = document.getElementById('crisisChart').getContext('2d');

            if (crisisChartInstance) {
                crisisChartInstance.destroy();
            }

            crisisChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: data.labels,
                    datasets: [
                        {
                            label: 'Your Portfolio (Simulated)',
                            data: data.portfolio,
                            borderColor: '#00f3ff',
                            backgroundColor: 'rgba(0, 243, 255, 0.1)',
                            borderWidth: 2,
                            tension: 0.4,
                            pointRadius: 0
                        },
                        {
                            label: 'Market Benchmark',
                            data: data.market,
                            borderColor: '#666',
                            borderDash: [5, 5],
                            borderWidth: 1,
                            pointRadius: 0,
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        mode: 'index',
                        intersect: false,
                    },
                    plugins: {
                        legend: { labels: { color: '#ccc', font: { family: 'JetBrains Mono' } } },
                        title: {
                            display: true,
                            text: 'STRESS TEST SCENARIO: ' + scenarioName.replace(/_/g, ' '),
                            color: '#cc0000',
                            font: { family: 'JetBrains Mono' }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0,0,0,0.8)',
                            titleColor: '#cc0000',
                            bodyColor: '#fff',
                            borderColor: '#333',
                            borderWidth: 1
                        }
                    },
                    scales: {
                        y: {
                            grid: { color: '#333' },
                            ticks: { color: '#888', callback: function(value) { return value + '%'; } }
                        },
                        x: {
                            grid: { color: '#333' },
                            ticks: { display: false }
                        }
                    }
                }
            });
        };

        // Auto-Run Default Crisis if Data Available
        if (crisisData && Object.keys(crisisData).length > 0) {
            document.getElementById('crisisSimContainer').style.display = 'block';

            // Parse URL parameters for ?sim=SCENARIO_NAME
            const urlParams = new URLSearchParams(window.location.search);
            const simParam = urlParams.get('sim');

            // slight delay to ensure Chart.js loaded
            setTimeout(() => {
                if (simParam && crisisData[simParam]) {
                    renderCrisis(simParam);
                    // Scroll to container
                    document.getElementById('crisisSimContainer').scrollIntoView({ behavior: 'smooth' });
                } else {
                    renderCrisis('2008_LEHMAN');
                }
            }, 100);
        }
    </script>
</body>
</html>