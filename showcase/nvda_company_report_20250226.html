<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADAM v23.5 :: Nvidia Corporation (NVDA) Report</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/market_mayhem_tiers.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@300;400;600;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/nav.js" defer></script>
    <script src="js/market_mayhem_viewer.js" defer></script>
</head>
<body class="tier-high">

    <div id="system2-overlay" class="system2-overlay">
        <div class="system2-terminal">
            <div id="sys2-content"></div>
        </div>
    </div>

    <div id="toast-container" class="cyber-toast-container"></div>

    <div id="raw-source-modal" class="raw-source-modal">
        <div class="raw-source-header">
            <span>SOURCE_DATA.JSON</span>
            <span style="cursor:pointer; color:#cc0000;" onclick="toggleSource()">[CLOSE]</span>
        </div>
        <div class="raw-source-content" id="raw-source-content"></div>
    </div>

    <div class="doc-toolbar" style="display: flex;">
        <div class="toolbar-item" onclick="window.location.href='market_mayhem_archive_v24.html'"><strong>FILE</strong></div>
        <div class="toolbar-item" onclick="toggleRedactionMode()">REDACT</div>
        <div class="toolbar-item" onclick="printReport()">PRINT</div>
        <div class="toolbar-item" onclick="shareReport()">SHARE</div>
        <div class="toolbar-item" onclick="downloadReport()">DOWNLOAD</div>
        <div class="toolbar-item" onclick="toggleTheme()">VIEW</div>
        <div class="toolbar-item" onclick="showToast('INSERT: PERMISSION DENIED')">INSERT</div>
        <div class="toolbar-item" onclick="showToast('FORMAT: LOCKED')">FORMAT</div>
        <div class="toolbar-item" onclick="runVerification()" style="color: #0078d7;"><strong>VERIFY</strong></div>
        <div style="flex-grow:1;"></div>
        <div class="toolbar-item" style="color:#666;">ADAM_V26_EDITOR</div>
    </div>

    <div style="max-width: 1400px; margin: 0 auto; padding: 10px 20px; display:flex; justify-content:space-between; align-items:center; display: none;">
        <a href="market_mayhem_archive_v24.html" class="cyber-btn">&larr; RETURN TO ARCHIVE</a>
        <div style="font-family:'JetBrains Mono'; font-size:0.7rem; color:#666;">SECURE CONNECTION ESTABLISHED</div>
    </div>

    <div class="newsletter-wrapper">
        <div class="paper-sheet" id="paper-sheet">

            <div id="top-secret-stamp" class="top-secret-stamp">TOP SECRET</div>

            <div class="doc-header-ui" style="display: flex;">
                <span id="verification-status">CONFIDENTIAL // SYSTEM 2 REVIEW</span>
                <span>3e02ebc0</span>
            </div>

            <div style="display:flex; justify-content:space-between; font-family:'JetBrains Mono'; font-size:0.8rem; color:#666; margin-bottom:20px; margin-top: 20px;">
                <span>2025-02-26</span>
                <span>ID: 3e02ebc0</span>
            </div>

            <h1 class="title">Nvidia Corporation (NVDA) Report</h1>

            <div class="doc-metadata-panel" style="display: grid;">
                <div class="doc-metadata-item"><strong>Classification</strong>UNCLASSIFIED</div>
                <div class="doc-metadata-item"><strong>Conviction</strong>0/100</div>
                <div class="doc-metadata-item"><strong>Sentiment</strong>100/100</div>
                <div class="doc-metadata-item"><strong>Reviewer</strong>Overseer</div>
            </div>

            <div id="financialChartContainer" style="display:none; margin-bottom: 30px;">
                <canvas id="financialChart"></canvas>
            </div>

            <div id="crisisSimContainer" style="display:none; margin-bottom: 30px; border: 1px solid #cc0000; padding: 20px; background: rgba(50, 0, 0, 0.2);">
                <h3 style="color: #cc0000; margin-top: 0; font-family: 'JetBrains Mono'; border-bottom: 1px solid #cc0000; padding-bottom: 10px; margin-bottom: 20px;">CRISIS SIMULATOR // STRESS TEST</h3>

                <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px; margin-bottom: 20px;">
                    <div class="crisis-btn" onclick="renderCrisis('2008_LEHMAN')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2008 LEHMAN
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('1987_BLACK_MONDAY')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        1987 BLACK MON
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('2000_DOTCOM_BUBBLE')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2000 DOTCOM
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('2020_COVID')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2020 PANDEMIC
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('2022_INFLATION_SHOCK')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2022 INFLATION
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('2025_AI_SHOCK')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2025 AI SHOCK
                    </div>
                </div>

                <div style="height: 300px; position: relative;">
                    <canvas id="crisisChart"></canvas>
                </div>

                <div id="crisisMetrics" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px; font-family: 'JetBrains Mono'; font-size: 0.8rem; color: #ccc;">
                    <div style="border: 1px solid #00f3ff; padding: 10px; background: rgba(0, 243, 255, 0.05);">
                        <div style="color: #00f3ff; border-bottom: 1px solid #00f3ff; margin-bottom: 10px; padding-bottom: 5px; font-weight: bold;">PORTFOLIO PERFORMANCE</div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;"><span>MAX DRAWDOWN:</span> <span id="port_dd" style="color: #fff;">0.00%</span></div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;"><span>VOLATILITY (ANN):</span> <span id="port_vol" style="color: #fff;">0.00%</span></div>
                        <div style="display: flex; justify-content: space-between;"><span>TOTAL RETURN:</span> <span id="port_ret" style="color: #fff;">0.00%</span></div>
                    </div>
                    <div style="border: 1px solid #666; padding: 10px; background: rgba(100, 100, 100, 0.1);">
                        <div style="color: #888; border-bottom: 1px solid #666; margin-bottom: 10px; padding-bottom: 5px; font-weight: bold;">MARKET BENCHMARK</div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;"><span>MAX DRAWDOWN:</span> <span id="mkt_dd" style="color: #ccc;">0.00%</span></div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;"><span>VOLATILITY (ANN):</span> <span id="mkt_vol" style="color: #ccc;">0.00%</span></div>
                        <div style="display: flex; justify-content: space-between;"><span>TOTAL RETURN:</span> <span id="mkt_ret" style="color: #ccc;">0.00%</span></div>
                    </div>
                </div>

                <div style="font-size: 0.7rem; color: #888; margin-top: 15px; font-style: italic;">
                    * Hypothetical performance based on portfolio beta and current risk profile. PAST PERFORMANCE IS NOT INDICATIVE OF FUTURE RESULTS.
                </div>
            </div>

            <div id="document-body">
                <h2>Executive Summary</h2><p>Nvidia's Q4 FY25 results were exceptional, exceeding expectations.  However, considering potential headwinds and incorporating a moderate shock in the out years, we revise our price target to $315 while maintaining a "Strong Buy" rating.</p><h2>Q4 Fy25 Highlights</h2><ul><li>Record quarterly revenue of $39.3 billion, up 78% year-over-year.</li><li>Record data center revenue of $35.6 billion, up 93% year-over-year.</li><li>Strong demand for Blackwell architecture, with $11 billion in revenue in its first quarter.</li><li>Gaming revenue down year-over-year due to supply constraints, but expected to rebound with new GeForce RTX 50 series launch.</li><li>Automotive revenue up 103% year-over-year, driven by self-driving platforms.</li></ul><h2>Fy25 Highlights</h2><ul><li>Record full-year revenue of $130.5 billion, up 114% year-over-year.</li><li>Data center revenue for FY25 was $115.2 billion, up 142% year-over-year.</li><li>Gaming revenue up 9% year-over-year, driven by GeForce RTX 40 series.</li><li>Professional Visualization revenue up 21% year-over-year.</li><li>Automotive revenue up 55% year-over-year.</li></ul><h2>Key Growth Drivers</h2><ul><li>Continued strong demand for AI and HPC solutions.</li><li>Rapid adoption of Blackwell architecture in data centers.</li><li>Expanding use of AI in gaming, professional visualization, and automotive.</li><li>Growth of cloud gaming and the metaverse.</li><li>Increasing adoption of autonomous driving technology.</li></ul><h2>Challenges</h2><ul><li>Maintaining technological leadership in a competitive landscape.</li><li>Managing supply chain constraints and geopolitical risks.</li><li>Addressing environmental concerns related to energy consumption.</li></ul><h2>Financial Performance</h2><h3>Revenue Growth</h3><p>Exceeded expectations in Q4 FY25 and FY25.</p><h3>Profitability</h3><p>Strong margins, but potential pressure from R&D and competition.</p><h3>Balance Sheet</h3><p>Healthy with ample liquidity.</p><h2>Valuation</h2><h3>Model</h3><p>DCF and comparable company analysis</p><h3>Justification</h3><p>The updated DCF model incorporates the strong Q4 results, revised growth expectations, and potential shocks in the out years.  Comparable company analysis supports the premium valuation given Nvidia's growth prospects and market leadership.</p><h2>Dcf Details</h2><h3>Revenue Growth</h3><ul><li><strong>year:</strong> FY26, <strong>growth:</strong> 25%</li><li><strong>year:</strong> FY27, <strong>growth:</strong> 20%</li><li><strong>year:</strong> FY28-FY29, <strong>growth:</strong> 18%</li><li><strong>year:</strong> FY30-FY31, <strong>growth:</strong> 15%</li><li><strong>year:</strong> FY32-FY34, <strong>growth:</strong> 10%</li><li><strong>year:</strong> Terminal, <strong>growth:</strong> 3%</li></ul><h3>Gross Margin</h3><p>Gradually declining from 73% in FY25 to 68% in the terminal year.</p><h3>Operating Expenses</h3><p>Growing slower than revenue, but with detailed analysis of R&D.</p><h3>Tax Rate</h3><p>17%</p><h3>Discount Rate Wacc</h3><p>11%</p><h3>Terminal Multiple</h3><p>14x</p><h2>Trading Levels</h2><h3>Equity</h3><h4>Outlook</h4><p>Very Positive</p><h4>Price Target</h4><p>315</p><h4>Potential Upside</h4><p>150%</p>
            </div>

            <div class="provenance-log">
                <div class="log-entry">
                    <span>> HASH_CHECK</span>
                    <span style="color:var(--terminal-green);">3e02ebc0a6de0c8c5124063f546b5f0e52fe46c73f4837e13903899e33f2d383</span>
                </div>
                <div class="log-entry">
                    <span>> SENTIMENT_SCAN</span>
                    <span>100 (DENSITY: 36)</span>
                </div>
                <div class="log-entry">
                    <span>> CONVICTION_LOCK</span>
                    <span>0%</span>
                </div>
                <div class="log-entry">
                    <span>> CRITIQUE_LOG</span>
                    <span>"Agent Overseer reviewed this intelligence. Verdict: VALIDATED. Sentiment alignment: 100/100. Cross-reference with knowledge graph completed."</span>
                </div>
            </div>

            <a href="#" class="source-jump-btn" onclick="toggleSource(); return false;" title="View Source JSON">JUMP TO SOURCE</a>

            <div style="margin-top: 40px; border-top: 1px solid #ccc; padding-top: 20px; font-style: italic; color: #666;">
                End of Transmission.
            </div>
        </div>

        <aside class="cyber-sidebar">
            <div class="sidebar-widget">
                <div class="sidebar-title">Intelligence Metadata</div>
                <div class="stat-row"><span>DATE</span> <span class="stat-val">2025-02-26</span></div>
                <div class="stat-row"><span>TYPE</span> <span class="stat-val">COMPANY_REPORT</span></div>
                <div class="stat-row"><span>CLASS</span> <span class="stat-val">UNCLASSIFIED</span></div>
                <div class="stat-row"><span>PROVENANCE</span> <span class="stat-val" title="3e02ebc0a6de0c8c5124063f546b5f0e52fe46c73f4837e13903899e33f2d383">3e02ebc0</span></div>
            </div>

            <div class="sidebar-widget">
                <div class="sidebar-title">Sentiment Analysis</div>
                <div class="stat-row"><span>SCORE</span> <span class="stat-val">100/100</span></div>
                <div class="sentiment-bar">
                    <div class="sentiment-fill" style="width: 100%;"></div>
                </div>
            </div>

            <div class="sidebar-widget">
                <div class="sidebar-title">Detected Entities</div>
                <div class="tag-cloud">
                    <a href="market_mayhem_archive_v24.html?search=AI" class="tag" style="text-decoration:none; border-color:#666;">AI</a><a href="market_mayhem_archive_v24.html?search=Cloud" class="tag" style="text-decoration:none; border-color:#666;">Cloud</a><a href="market_mayhem_archive_v24.html?search=EV" class="tag" style="text-decoration:none; border-color:#666;">EV</a><a href="market_mayhem_archive_v24.html?search=Energy" class="tag" style="text-decoration:none; border-color:#666;">Energy</a><a href="market_mayhem_archive_v24.html?search=Growth" class="tag" style="text-decoration:none; border-color:#666;">Growth</a>
                </div>
            </div>

             <div class="sidebar-widget">
                <div class="sidebar-title">Agent Conviction</div>
                 <div class="stat-row"><span>CONFIDENCE</span> <span class="stat-val">0/100</span></div>
                 <div class="sentiment-bar">
                    <div class="sentiment-fill" style="width: 0%; background: #ff0000;"></div>
                </div>
            </div>

            <div class="sidebar-widget">
                <div class="sidebar-title">Semantic Analysis</div>
                 <div class="stat-row"><span>DENSITY</span> <span class="stat-val">36/100</span></div>
                 <div class="stat-row"><span>PROBABILITY</span> <span class="stat-val">0/100</span></div>
            </div>

             <div class="sidebar-widget" style="border-color: #555;">
                <div class="sidebar-title">Reviewer Agent Log</div>
                 <div style="font-size: 0.75rem; color: #ccc; font-style: italic;">
                    "Agent Overseer reviewed this intelligence. Verdict: VALIDATED. Sentiment alignment: 100/100. Cross-reference with knowledge graph completed."
                </div>
                <div class="stat-row" style="margin-top:10px;"><span>QUALITY SCORE</span> <span class="stat-val">100/100</span></div>
            </div>

             <div class="sidebar-widget">
                <div class="sidebar-title">Contributing Agents</div>
                 <div style="display:flex; flex-direction:column; gap:5px;">
                    <div style="font-size:0.75rem; color:#666;">System Core</div>
                </div>
            </div>
        </aside>
    </div>

    <textarea id="hidden-raw-data" style="display:none;">{
  "title": "Nvidia Corporation (NVDA) Report",
  "date": "2025-02-26",
  "summary": "Nvidia's Q4 FY25 results were exceptional, exceeding expectations.  However, considering potential headwinds and incorporating a moderate shock in the out years, we revise our price target to $315 while maintaining a \"Strong Buy\" rating.",
  "type": "COMPANY_REPORT",
  "full_body": "<h2>Executive Summary</h2><p>Nvidia's Q4 FY25 results were exceptional, exceeding expectations.  However, considering potential headwinds and incorporating a moderate shock in the out years, we revise our price target to $315 while maintaining a \"Strong Buy\" rating.</p><h2>Q4 Fy25 Highlights</h2><ul><li>Record quarterly revenue of $39.3 billion, up 78% year-over-year.</li><li>Record data center revenue of $35.6 billion, up 93% year-over-year.</li><li>Strong demand for Blackwell architecture, with $11 billion in revenue in its first quarter.</li><li>Gaming revenue down year-over-year due to supply constraints, but expected to rebound with new GeForce RTX 50 series launch.</li><li>Automotive revenue up 103% year-over-year, driven by self-driving platforms.</li></ul><h2>Fy25 Highlights</h2><ul><li>Record full-year revenue of $130.5 billion, up 114% year-over-year.</li><li>Data center revenue for FY25 was $115.2 billion, up 142% year-over-year.</li><li>Gaming revenue up 9% year-over-year, driven by GeForce RTX 40 series.</li><li>Professional Visualization revenue up 21% year-over-year.</li><li>Automotive revenue up 55% year-over-year.</li></ul><h2>Key Growth Drivers</h2><ul><li>Continued strong demand for AI and HPC solutions.</li><li>Rapid adoption of Blackwell architecture in data centers.</li><li>Expanding use of AI in gaming, professional visualization, and automotive.</li><li>Growth of cloud gaming and the metaverse.</li><li>Increasing adoption of autonomous driving technology.</li></ul><h2>Challenges</h2><ul><li>Maintaining technological leadership in a competitive landscape.</li><li>Managing supply chain constraints and geopolitical risks.</li><li>Addressing environmental concerns related to energy consumption.</li></ul><h2>Financial Performance</h2><h3>Revenue Growth</h3><p>Exceeded expectations in Q4 FY25 and FY25.</p><h3>Profitability</h3><p>Strong margins, but potential pressure from R&D and competition.</p><h3>Balance Sheet</h3><p>Healthy with ample liquidity.</p><h2>Valuation</h2><h3>Model</h3><p>DCF and comparable company analysis</p><h3>Justification</h3><p>The updated DCF model incorporates the strong Q4 results, revised growth expectations, and potential shocks in the out years.  Comparable company analysis supports the premium valuation given Nvidia's growth prospects and market leadership.</p><h2>Dcf Details</h2><h3>Revenue Growth</h3><ul><li><strong>year:</strong> FY26, <strong>growth:</strong> 25%</li><li><strong>year:</strong> FY27, <strong>growth:</strong> 20%</li><li><strong>year:</strong> FY28-FY29, <strong>growth:</strong> 18%</li><li><strong>year:</strong> FY30-FY31, <strong>growth:</strong> 15%</li><li><strong>year:</strong> FY32-FY34, <strong>growth:</strong> 10%</li><li><strong>year:</strong> Terminal, <strong>growth:</strong> 3%</li></ul><h3>Gross Margin</h3><p>Gradually declining from 73% in FY25 to 68% in the terminal year.</p><h3>Operating Expenses</h3><p>Growing slower than revenue, but with detailed analysis of R&D.</p><h3>Tax Rate</h3><p>17%</p><h3>Discount Rate Wacc</h3><p>11%</p><h3>Terminal Multiple</h3><p>14x</p><h2>Trading Levels</h2><h3>Equity</h3><h4>Outlook</h4><p>Very Positive</p><h4>Price Target</h4><p>315</p><h4>Potential Upside</h4><p>150%</p>",
  "sentiment_score": 100,
  "entities": {
    "tickers": [],
    "agents": [],
    "sovereigns": [],
    "keywords": [
      "AI",
      "Cloud",
      "EV",
      "Energy",
      "Growth"
    ]
  },
  "provenance_hash": "3e02ebc0a6de0c8c5124063f546b5f0e52fe46c73f4837e13903899e33f2d383",
  "filename": "nvda_company_report_20250226.html",
  "is_sourced": true,
  "metrics_json": "{}",
  "source_priority": 2,
  "conviction": 0,
  "semantic_score": 36,
  "probability": 0,
  "outlook_score": 20,
  "critique": "Agent Overseer reviewed this intelligence. Verdict: VALIDATED. Sentiment alignment: 100/100. Cross-reference with knowledge graph completed."
}</textarea>

    <script>
        // Chart Injection Logic
        const metricsData = {};
        const crisisData = {"2008_LEHMAN": {"scenario": "2008_LEHMAN", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30], "market": [100.0, 95.11, 99.94, 100.83, 95.65, 81.18, 81.65, 78.97, 77.49, 83.5, 73.62, 68.4, 64.39, 58.28, 31.85, 35.63, 31.93, 35.04, 32.38, 26.91, 31.24, 35.84, 38.93, 38.47, 38.22, 41.68, 44.73, 42.44, 39.86, 38.9], "portfolio": [100.0, 93.18, 99.42, 100.3, 93.89, 72.12, 70.84, 67.89, 67.05, 75.52, 63.66, 56.04, 51.32, 42.82, 17.18, 21.14, 19.34, 22.66, 20.85, 15.2, 18.11, 22.51, 24.65, 24.86, 24.96, 29.06, 32.5, 30.45, 27.31, 27.19], "metrics": {"market": {"max_drawdown": 73.31, "volatility": 187.2, "total_return": -61.1}, "portfolio": {"max_drawdown": 84.85, "volatility": 268.33, "total_return": -72.81}}}, "1987_BLACK_MONDAY": {"scenario": "1987_BLACK_MONDAY", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20], "market": [100.0, 113.96, 113.36, 104.25, 114.27, 102.78, 89.76, 92.18, 106.81, 48.11, 66.34, 63.28, 58.79, 56.69, 69.39, 59.55, 50.82, 55.52, 68.81, 72.71], "portfolio": [100.0, 119.75, 122.95, 104.81, 119.96, 99.07, 78.48, 81.57, 96.96, 16.88, 25.61, 23.22, 19.57, 18.72, 25.78, 19.92, 15.45, 17.55, 23.41, 24.67], "metrics": {"market": {"max_drawdown": 57.9, "volatility": 305.04, "total_return": -27.29}, "portfolio": {"max_drawdown": 87.43, "volatility": 454.09, "total_return": -75.33}}}, "2000_DOTCOM_BUBBLE": {"scenario": "2000_DOTCOM_BUBBLE", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45], "market": [100.0, 103.56, 102.33, 99.27, 89.27, 84.41, 85.03, 81.68, 85.69, 54.12, 52.97, 42.55, 38.15, 35.57, 35.93, 35.73, 35.63, 34.16, 32.88, 35.98, 37.16, 33.03, 31.62, 29.4, 29.7, 32.34, 28.62, 26.27, 24.17, 22.59, 21.42, 20.61, 22.03, 22.15, 21.59, 21.48, 20.92, 20.44, 20.67, 21.58, 21.6, 22.2, 21.08, 22.32, 21.83], "portfolio": [100.0, 109.22, 109.61, 106.04, 89.25, 83.17, 84.82, 75.66, 80.44, 33.86, 30.87, 24.24, 19.8, 18.18, 18.3, 18.23, 17.96, 16.9, 15.83, 18.24, 19.42, 15.53, 14.84, 13.19, 13.5, 15.6, 12.6, 11.09, 10.03, 9.51, 8.63, 8.4, 9.28, 9.32, 8.87, 8.91, 8.53, 8.25, 8.54, 9.06, 9.08, 9.52, 8.85, 9.68, 8.82], "metrics": {"market": {"max_drawdown": 80.26, "volatility": 121.94, "total_return": -78.17}, "portfolio": {"max_drawdown": 92.47, "volatility": 190.18, "total_return": -91.18}}}, "2020_COVID": {"scenario": "2020_COVID", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40], "market": [100.0, 104.67, 103.39, 107.58, 96.73, 101.42, 92.69, 100.82, 109.55, 111.42, 105.44, 86.67, 91.81, 98.7, 91.68, 87.07, 81.53, 78.45, 83.3, 104.96, 100.84, 99.12, 90.26, 91.64, 85.15, 69.52, 71.87, 58.05, 60.11, 54.53, 54.56, 64.09, 66.27, 60.22, 57.49, 55.44, 56.71, 53.27, 49.76, 48.51], "portfolio": [100.0, 108.11, 105.09, 111.93, 94.64, 97.16, 82.0, 94.96, 110.94, 106.48, 96.91, 68.32, 72.28, 81.15, 74.23, 68.71, 61.76, 57.93, 66.78, 100.62, 97.83, 97.07, 81.91, 83.75, 71.95, 50.7, 53.63, 34.75, 36.16, 32.97, 32.94, 41.05, 43.29, 39.2, 38.36, 36.53, 38.55, 34.88, 30.88, 30.53], "metrics": {"market": {"max_drawdown": 56.46, "volatility": 141.24, "total_return": -51.49}, "portfolio": {"max_drawdown": 72.72, "volatility": 240.17, "total_return": -69.47}}}, "2022_INFLATION_SHOCK": {"scenario": "2022_INFLATION_SHOCK", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60], "market": [100.0, 95.14, 93.67, 91.24, 89.62, 90.57, 93.66, 85.57, 85.71, 86.1, 91.93, 90.7, 95.9, 95.32, 94.58, 94.4, 93.34, 91.64, 92.09, 92.87, 96.88, 98.26, 100.33, 103.26, 103.8, 111.99, 102.41, 97.78, 91.85, 79.72, 85.21, 94.77, 96.4, 103.22, 108.75, 113.36, 102.52, 109.84, 110.3, 112.85, 112.61, 114.77, 112.66, 113.01, 115.75, 119.12, 121.44, 130.45, 135.34, 135.76, 133.18, 135.49, 136.81, 137.25, 133.14, 127.83, 127.39, 124.86, 125.67, 123.35], "portfolio": [100.0, 96.28, 91.05, 89.17, 86.71, 89.69, 91.18, 77.46, 77.06, 74.51, 78.95, 77.6, 84.7, 85.39, 85.31, 84.65, 84.96, 81.83, 82.85, 81.18, 87.51, 87.17, 90.38, 96.09, 98.12, 110.13, 98.44, 93.49, 87.33, 67.81, 74.94, 88.2, 87.41, 96.86, 105.35, 108.5, 93.74, 103.57, 104.8, 102.18, 98.55, 104.38, 99.37, 98.47, 97.79, 102.17, 104.99, 113.86, 121.75, 122.7, 120.52, 121.83, 124.93, 125.35, 120.48, 111.01, 110.51, 106.27, 107.24, 108.02], "metrics": {"market": {"max_drawdown": 28.82, "volatility": 70.24, "total_return": 23.35}, "portfolio": {"max_drawdown": 38.43, "volatility": 106.3, "total_return": 8.02}}}, "2025_AI_SHOCK": {"scenario": "2025_AI_SHOCK", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35], "market": [100.0, 113.45, 104.82, 95.2, 91.41, 76.63, 76.59, 83.28, 77.87, 76.48, 72.48, 77.45, 69.96, 59.35, 54.13, 57.03, 58.35, 61.65, 64.12, 63.4, 58.42, 45.14, 35.74, 39.21, 40.24, 43.63, 38.46, 31.69, 29.79, 32.04, 34.11, 30.5, 23.25, 21.32, 20.65], "portfolio": [100.0, 122.23, 108.01, 90.61, 86.99, 68.14, 68.6, 76.96, 69.32, 67.29, 61.77, 66.64, 58.12, 43.8, 39.05, 42.88, 44.39, 47.93, 49.47, 53.28, 46.83, 31.27, 21.84, 24.53, 24.84, 27.65, 22.44, 16.23, 14.7, 16.21, 17.59, 14.49, 9.1, 7.93, 7.42], "metrics": {"market": {"max_drawdown": 81.8, "volatility": 155.34, "total_return": -79.35}, "portfolio": {"max_drawdown": 93.93, "volatility": 233.09, "total_return": -92.58}}}};

        // --- Metrics Chart ---
        if (metricsData && Object.keys(metricsData).length > 0) {
            const ctx = document.getElementById('financialChart');
            const container = document.getElementById('financialChartContainer');

            // Basic parsing of metrics structure (assuming flat or Year->Val)
            let labels = [];
            let values = [];
            let labelName = "Metric";

            // Try to find a timeseries
            for (const [key, val] of Object.entries(metricsData)) {
                if (typeof val === 'object') {
                    // Likely year -> value
                    labels = Object.keys(val);
                    values = Object.values(val).map(v => parseFloat(v.replace(/[^0-9.-]/g, '')));
                    labelName = key;
                    break;
                }
            }

            if (labels.length > 0) {
                container.style.display = 'block';
                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: labelName,
                            data: values,
                            backgroundColor: 'rgba(204, 0, 0, 0.5)',
                            borderColor: '#cc0000',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { labels: { color: '#ccc' } }
                        },
                        scales: {
                            y: { grid: { color: '#333' }, ticks: { color: '#888' } },
                            x: { grid: { color: '#333' }, ticks: { color: '#888' } }
                        }
                    }
                });
            }
        }

        // --- Crisis Simulation Logic ---
        let crisisChartInstance = null;

        window.renderCrisis = function(scenarioName) {
            if (!crisisData || !crisisData[scenarioName]) return;

            // UI Feedback for Buttons
            document.querySelectorAll('.crisis-btn').forEach(btn => {
                btn.style.borderColor = btn.innerText.includes(scenarioName.split('_')[1]) ? '#cc0000' : '#666';
                btn.style.color = btn.innerText.includes(scenarioName.split('_')[1]) ? '#cc0000' : '#ccc';
            });

            const data = crisisData[scenarioName];

            // Update Metrics Display
            if (data.metrics) {
                const p = data.metrics.portfolio;
                const m = data.metrics.market;

                document.getElementById('port_dd').innerText = p.max_drawdown.toFixed(2) + '%';
                document.getElementById('port_vol').innerText = p.volatility.toFixed(2) + '%';
                document.getElementById('port_ret').innerText = p.total_return.toFixed(2) + '%';

                // Color code return
                document.getElementById('port_ret').style.color = p.total_return >= 0 ? '#00f3ff' : '#ff4444';

                document.getElementById('mkt_dd').innerText = m.max_drawdown.toFixed(2) + '%';
                document.getElementById('mkt_vol').innerText = m.volatility.toFixed(2) + '%';
                document.getElementById('mkt_ret').innerText = m.total_return.toFixed(2) + '%';

                document.getElementById('mkt_ret').style.color = m.total_return >= 0 ? '#ccc' : '#cc0000';
            }

            const ctx = document.getElementById('crisisChart').getContext('2d');

            if (crisisChartInstance) {
                crisisChartInstance.destroy();
            }

            crisisChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: data.labels,
                    datasets: [
                        {
                            label: 'Your Portfolio (Simulated)',
                            data: data.portfolio,
                            borderColor: '#00f3ff',
                            backgroundColor: 'rgba(0, 243, 255, 0.1)',
                            borderWidth: 2,
                            tension: 0.4,
                            pointRadius: 0
                        },
                        {
                            label: 'Market Benchmark',
                            data: data.market,
                            borderColor: '#666',
                            borderDash: [5, 5],
                            borderWidth: 1,
                            pointRadius: 0,
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        mode: 'index',
                        intersect: false,
                    },
                    plugins: {
                        legend: { labels: { color: '#ccc', font: { family: 'JetBrains Mono' } } },
                        title: {
                            display: true,
                            text: 'STRESS TEST SCENARIO: ' + scenarioName.replace(/_/g, ' '),
                            color: '#cc0000',
                            font: { family: 'JetBrains Mono' }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0,0,0,0.8)',
                            titleColor: '#cc0000',
                            bodyColor: '#fff',
                            borderColor: '#333',
                            borderWidth: 1
                        }
                    },
                    scales: {
                        y: {
                            grid: { color: '#333' },
                            ticks: { color: '#888', callback: function(value) { return value + '%'; } }
                        },
                        x: {
                            grid: { color: '#333' },
                            ticks: { display: false }
                        }
                    }
                }
            });
        };

        // Auto-Run Default Crisis if Data Available
        if (crisisData && Object.keys(crisisData).length > 0) {
            document.getElementById('crisisSimContainer').style.display = 'block';

            // Parse URL parameters for ?sim=SCENARIO_NAME
            const urlParams = new URLSearchParams(window.location.search);
            const simParam = urlParams.get('sim');

            // slight delay to ensure Chart.js loaded
            setTimeout(() => {
                if (simParam && crisisData[simParam]) {
                    renderCrisis(simParam);
                    // Scroll to container
                    document.getElementById('crisisSimContainer').scrollIntoView({ behavior: 'smooth' });
                } else {
                    renderCrisis('2008_LEHMAN');
                }
            }, 100);
        }
    </script>
</body>
</html>