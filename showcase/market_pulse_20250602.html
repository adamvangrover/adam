<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADAM v23.5 :: MARKET PULSE // 2025-06-02</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/market_mayhem_tiers.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@300;400;600;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/nav.js" defer></script>
    <script src="js/market_mayhem_viewer.js" defer></script>
</head>
<body class="tier-high">

    <!-- System 2 Verification Overlay -->
    <div id="system2-overlay" class="system2-overlay">
        <div class="system2-terminal">
            <div id="sys2-content"></div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="cyber-toast-container"></div>

    <!-- Raw Source Modal -->
    <div id="raw-source-modal" class="raw-source-modal">
        <div class="raw-source-header">
            <span>SOURCE_DATA.JSON</span>
            <span style="cursor:pointer; color:#cc0000;" onclick="toggleSource()">[CLOSE]</span>
        </div>
        <div class="raw-source-content" id="raw-source-content"></div>
    </div>

    <!-- Virtual Toolbar for High Tier -->
    <div class="doc-toolbar" style="display: flex;">
        <div class="toolbar-item" onclick="window.location.href='market_mayhem_archive_v24.html'"><strong>FILE</strong></div>
        <div class="toolbar-item" onclick="toggleRedactionMode()">REDACT</div>
        <div class="toolbar-item" onclick="printReport()">PRINT</div>
        <div class="toolbar-item" onclick="shareReport()">SHARE</div>
        <div class="toolbar-item" onclick="downloadReport()">DOWNLOAD</div>
        <div class="toolbar-item" onclick="toggleTheme()">VIEW</div>
        <div class="toolbar-item" onclick="showToast('INSERT: PERMISSION DENIED')">INSERT</div>
        <div class="toolbar-item" onclick="showToast('FORMAT: LOCKED')">FORMAT</div>
        <div class="toolbar-item" onclick="runVerification()" style="color: #0078d7;"><strong>VERIFY</strong></div>
        <div style="flex-grow:1;"></div>
        <div class="toolbar-item" style="color:#666;">ADAM_V26_EDITOR</div>
    </div>

    <div style="max-width: 1400px; margin: 0 auto; padding: 10px 20px; display:flex; justify-content:space-between; align-items:center; display: none;">
        <a href="market_mayhem_archive_v24.html" class="cyber-btn">&larr; RETURN TO ARCHIVE</a>
        <div style="font-family:'JetBrains Mono'; font-size:0.7rem; color:#666;">SECURE CONNECTION ESTABLISHED</div>
    </div>

    <div class="newsletter-wrapper">
        <div class="paper-sheet" id="paper-sheet">

            <!-- Top Secret Stamp -->
            <div id="top-secret-stamp" class="top-secret-stamp">TOP SECRET</div>

            <!-- High Tier Header UI -->
            <div class="doc-header-ui" style="display: flex;">
                <span id="verification-status">CONFIDENTIAL // SYSTEM 2 REVIEW</span>
                <span>5d0f27e8</span>
            </div>

            <div style="display:flex; justify-content:space-between; font-family:'JetBrains Mono'; font-size:0.8rem; color:#666; margin-bottom:20px; margin-top: 20px;">
                <span>2025-06-02</span>
                <span>ID: 5d0f27e8</span>
            </div>

            <h1 class="title">MARKET PULSE // 2025-06-02</h1>

            <!-- Metadata Panel for High Tier (Embedded in Doc) -->
            <div class="doc-metadata-panel" style="display: grid;">
                <div class="doc-metadata-item"><strong>Classification</strong>UNCLASSIFIED</div>
                <div class="doc-metadata-item"><strong>Conviction</strong>50/100</div>
                <div class="doc-metadata-item"><strong>Sentiment</strong>50/100</div>
                <div class="doc-metadata-item"><strong>Reviewer</strong>Overseer</div>
            </div>

            <div id="financialChartContainer" style="display:none; margin-bottom: 30px;">
                <canvas id="financialChart"></canvas>
            </div>

            <!-- Crisis Simulator (High Tier Only) -->
            <div id="crisisSimContainer" style="display:none; margin-bottom: 30px; border: 1px solid #cc0000; padding: 20px; background: rgba(50, 0, 0, 0.2);">
                <h3 style="color: #cc0000; margin-top: 0; font-family: 'JetBrains Mono'; border-bottom: 1px solid #cc0000; padding-bottom: 10px; margin-bottom: 20px;">CRISIS SIMULATOR // STRESS TEST</h3>

                <div style="display:grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-bottom: 20px;">
                    <div class="crisis-btn" onclick="renderCrisis('2008_LEHMAN')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2008 LEHMAN
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('1987_BLACK_MONDAY')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        1987 BLACK MON
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('2020_COVID')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2020 PANDEMIC
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('2000_DOTCOM')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2000 DOTCOM
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('2022_INFLATION')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2022 INFLATION
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('2025_AI_SHOCK')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2025 AI SHOCK
                    </div>
                </div>

                <div style="height: 300px; position: relative;">
                    <canvas id="crisisChart"></canvas>
                </div>
                <div style="font-size: 0.7rem; color: #888; margin-top: 15px; font-style: italic;">
                    * Hypothetical performance based on portfolio beta and current risk profile. PAST PERFORMANCE IS NOT INDICATIVE OF FUTURE RESULTS.
                </div>
            </div>

            <div id="document-body">
                <strong>Status:</strong> ONLINE
<strong>Clearance:</strong> PUBLIC
<strong>Tone:</strong> CYBER-MINIMALIST
<p>---</p>
<h2>< SYSTEM_OVERVIEW ></h2>
<p>The "Summer Doldrums" have arrived early. Trading volumes are thinning as the S&P 500 consolidates near highs (5,500). The narrative has shifted from "Inflation Fear" to "Growth Scare" following softer-than-expected ISM Manufacturing data (48.2).</p>
<h2>< NODES_IN_FOCUS ></h2>
<ul>
<li>  <strong>SECTOR: ENERGY (XLE)</strong></li>
<li>  <strong>Signal:</strong> -2.1% WTD.</li>
<li>  <strong>Thesis:</strong> Demand destruction fears in China are capping crude prices despite OPEC+ cuts. Tactical short opportunity.</li>
<li>  <strong>Conviction:</strong> MEDIUM.</li>
</ul>
<ul>
<li>  <strong>TECH: SOFTWARE (IGV)</strong></li>
<li>  <strong>Signal:</strong> +3.5% WTD.</li>
<li>  <strong>Thesis:</strong> "Platform Consolidation" is the theme. CIOs are cutting vendors but spending more with winners (CRWD, PANW, NOW).</li>
<li>  <strong>Conviction:</strong> HIGH.</li>
</ul>
<ul>
<li>  <strong>MACRO: EUROZONE (EUR/USD)</strong></li>
<li>  <strong>Signal:</strong> 1.0850.</li>
<li>  <strong>Thesis:</strong> ECB cuts rates ahead of the Fed (Divergence Trade). Short EUR against USD remains a carry-positive play.</li>
<li>  <strong>Conviction:</strong> MEDIUM.</li>
</ul>
<h2>< DATA_STREAM ></h2>
<p>| METRIC | VALUE | DELTA (MoM) |
| :--- | :--- | :--- |
| <strong>US Unemployment</strong> | 4.1% | +0.2% |
| <strong>VIX Index</strong> | 12.8 | -0.5 |
| <strong>Bitcoin</strong> | $94,500 | +3.2% |
| <strong>Copper</strong> | $4.45/lb | -1.5% |</p>
<h2>< SYNTHESIS ></h2>
<p>Liquidity is plentiful, but breadth is narrowing. The market is becoming a "Stock Picker's Paradise" where dispersion between winners (high quality, cash flow) and losers (unprofitable tech) is extreme. Avoid "Story Stocks" with no near-term earnings.</p>
<p>> "Volatility is the price of admission. Liquidity is the exit door."</p>
<strong>END_TRANSMISSION</strong>

            </div>

            <!-- Provenance Log (All Tiers) -->
            <div class="provenance-log">
                <div class="log-entry">
                    <span>> HASH_CHECK</span>
                    <span style="color:var(--terminal-green);">5d0f27e8757373a8cf6b4122c6ff3b8726fa16d9944279bc26309c8593f37479</span>
                </div>
                <div class="log-entry">
                    <span>> SENTIMENT_SCAN</span>
                    <span>50 (DENSITY: 75)</span>
                </div>
                <div class="log-entry">
                    <span>> CONVICTION_LOCK</span>
                    <span>50%</span>
                </div>
                <div class="log-entry">
                    <span>> CRITIQUE_LOG</span>
                    <span>"Agent Overseer reviewed this intelligence. Verdict: VALIDATED. Sentiment alignment: 50/100. Cross-reference with knowledge graph completed."</span>
                </div>
            </div>

            <a href="#" class="source-jump-btn" onclick="toggleSource(); return false;" title="View Source JSON">JUMP TO SOURCE</a>

            <div style="margin-top: 40px; border-top: 1px solid #ccc; padding-top: 20px; font-style: italic; color: #666;">
                End of Transmission.
            </div>
        </div>

        <aside class="cyber-sidebar">
            <div class="sidebar-widget">
                <div class="sidebar-title">Intelligence Metadata</div>
                <div class="stat-row"><span>DATE</span> <span class="stat-val">2025-06-02</span></div>
                <div class="stat-row"><span>TYPE</span> <span class="stat-val">NEWSLETTER</span></div>
                <div class="stat-row"><span>CLASS</span> <span class="stat-val">UNCLASSIFIED</span></div>
                <div class="stat-row"><span>PROVENANCE</span> <span class="stat-val" title="5d0f27e8757373a8cf6b4122c6ff3b8726fa16d9944279bc26309c8593f37479">5d0f27e8</span></div>
            </div>

            <div class="sidebar-widget">
                <div class="sidebar-title">Sentiment Analysis</div>
                <div class="stat-row"><span>SCORE</span> <span class="stat-val">50/100</span></div>
                <div class="sentiment-bar">
                    <div class="sentiment-fill" style="width: 50%;"></div>
                </div>
            </div>

            <div class="sidebar-widget">
                <div class="sidebar-title">Detected Entities</div>
                <div class="tag-cloud">
                    <a href="market_mayhem_archive_v24.html?search=CN_PBOC" class="tag" style="text-decoration:none;">CN_PBOC</a><a href="market_mayhem_archive_v24.html?search=EU_ECB" class="tag" style="text-decoration:none;">EU_ECB</a><a href="market_mayhem_archive_v24.html?search=US_FED" class="tag" style="text-decoration:none;">US_FED</a><a href="market_mayhem_archive_v24.html?search=AI" class="tag" style="text-decoration:none; border-color:#666;">AI</a><a href="market_mayhem_archive_v24.html?search=Bitcoin" class="tag" style="text-decoration:none; border-color:#666;">Bitcoin</a><a href="market_mayhem_archive_v24.html?search=Energy" class="tag" style="text-decoration:none; border-color:#666;">Energy</a><a href="market_mayhem_archive_v24.html?search=Growth" class="tag" style="text-decoration:none; border-color:#666;">Growth</a><a href="market_mayhem_archive_v24.html?search=Inflation" class="tag" style="text-decoration:none; border-color:#666;">Inflation</a>
                </div>
            </div>

             <div class="sidebar-widget">
                <div class="sidebar-title">Agent Conviction</div>
                 <div class="stat-row"><span>CONFIDENCE</span> <span class="stat-val">50/100</span></div>
                 <div class="sentiment-bar">
                    <div class="sentiment-fill" style="width: 50%; background: #ffff00;"></div>
                </div>
            </div>

            <div class="sidebar-widget">
                <div class="sidebar-title">Semantic Analysis</div>
                 <div class="stat-row"><span>DENSITY</span> <span class="stat-val">75/100</span></div>
                 <div class="stat-row"><span>PROBABILITY</span> <span class="stat-val">50/100</span></div>
            </div>

             <div class="sidebar-widget" style="border-color: #555;">
                <div class="sidebar-title">Reviewer Agent Log</div>
                 <div style="font-size: 0.75rem; color: #ccc; font-style: italic;">
                    "Agent Overseer reviewed this intelligence. Verdict: VALIDATED. Sentiment alignment: 50/100. Cross-reference with knowledge graph completed."
                </div>
                <div class="stat-row" style="margin-top:10px;"><span>QUALITY SCORE</span> <span class="stat-val">100/100</span></div>
            </div>

             <div class="sidebar-widget">
                <div class="sidebar-title">Contributing Agents</div>
                 <div style="display:flex; flex-direction:column; gap:5px;">
                    <div style="font-size:0.75rem; color:#666;">System Core</div>
                </div>
            </div>
        </aside>
    </div>

    <!-- Hidden Raw Data -->
    <textarea id="hidden-raw-data" style="display:none;">{
  "title": "MARKET PULSE // 2025-06-02",
  "date": "2025-06-02",
  "summary": "Market analysis and strategic insights.",
  "type": "NEWSLETTER",
  "full_body": "<strong>Status:</strong> ONLINE\n<strong>Clearance:</strong> PUBLIC\n<strong>Tone:</strong> CYBER-MINIMALIST\n<p>---</p>\n<h2>< SYSTEM_OVERVIEW ></h2>\n<p>The \"Summer Doldrums\" have arrived early. Trading volumes are thinning as the S&P 500 consolidates near highs (5,500). The narrative has shifted from \"Inflation Fear\" to \"Growth Scare\" following softer-than-expected ISM Manufacturing data (48.2).</p>\n<h2>< NODES_IN_FOCUS ></h2>\n<ul>\n<li>  <strong>SECTOR: ENERGY (XLE)</strong></li>\n<li>  <strong>Signal:</strong> -2.1% WTD.</li>\n<li>  <strong>Thesis:</strong> Demand destruction fears in China are capping crude prices despite OPEC+ cuts. Tactical short opportunity.</li>\n<li>  <strong>Conviction:</strong> MEDIUM.</li>\n</ul>\n<ul>\n<li>  <strong>TECH: SOFTWARE (IGV)</strong></li>\n<li>  <strong>Signal:</strong> +3.5% WTD.</li>\n<li>  <strong>Thesis:</strong> \"Platform Consolidation\" is the theme. CIOs are cutting vendors but spending more with winners (CRWD, PANW, NOW).</li>\n<li>  <strong>Conviction:</strong> HIGH.</li>\n</ul>\n<ul>\n<li>  <strong>MACRO: EUROZONE (EUR/USD)</strong></li>\n<li>  <strong>Signal:</strong> 1.0850.</li>\n<li>  <strong>Thesis:</strong> ECB cuts rates ahead of the Fed (Divergence Trade). Short EUR against USD remains a carry-positive play.</li>\n<li>  <strong>Conviction:</strong> MEDIUM.</li>\n</ul>\n<h2>< DATA_STREAM ></h2>\n<p>| METRIC | VALUE | DELTA (MoM) |\n| :--- | :--- | :--- |\n| <strong>US Unemployment</strong> | 4.1% | +0.2% |\n| <strong>VIX Index</strong> | 12.8 | -0.5 |\n| <strong>Bitcoin</strong> | $94,500 | +3.2% |\n| <strong>Copper</strong> | $4.45/lb | -1.5% |</p>\n<h2>< SYNTHESIS ></h2>\n<p>Liquidity is plentiful, but breadth is narrowing. The market is becoming a \"Stock Picker's Paradise\" where dispersion between winners (high quality, cash flow) and losers (unprofitable tech) is extreme. Avoid \"Story Stocks\" with no near-term earnings.</p>\n<p>> \"Volatility is the price of admission. Liquidity is the exit door.\"</p>\n<strong>END_TRANSMISSION</strong>\n",
  "sentiment_score": 50,
  "entities": {
    "tickers": [],
    "agents": [],
    "sovereigns": [
      "CN_PBOC",
      "EU_ECB",
      "US_FED"
    ],
    "keywords": [
      "AI",
      "Bitcoin",
      "Energy",
      "Growth",
      "Inflation"
    ]
  },
  "provenance_hash": "5d0f27e8757373a8cf6b4122c6ff3b8726fa16d9944279bc26309c8593f37479",
  "filename": "market_pulse_20250602.html",
  "is_sourced": true,
  "metrics_json": "{}",
  "source_priority": 2,
  "conviction": 50,
  "critique": "Agent Overseer reviewed this intelligence. Verdict: VALIDATED. Sentiment alignment: 50/100. Cross-reference with knowledge graph completed.",
  "quality": 100,
  "semantic_score": 75,
  "probability": 50
}</textarea>

    <script>
        // Chart Injection Logic
        const metricsData = {};
        const crisisData = {"2008_LEHMAN": {"scenario": "2008_LEHMAN", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30], "market": [100.0, 98.7, 96.29, 95.68, 101.48, 106.24, 106.84, 101.63, 101.34, 93.7, 91.0, 95.04, 94.72, 94.62, 75.03, 69.08, 78.45, 77.98, 85.82, 71.36, 72.38, 68.05, 66.81, 64.77, 62.1, 69.02, 64.93, 65.83, 59.61, 60.75], "portfolio": [100.0, 101.21, 101.49, 99.8, 105.99, 114.99, 116.42, 110.11, 112.06, 100.64, 98.28, 105.96, 106.73, 108.22, 93.22, 81.16, 86.44, 90.14, 94.86, 77.37, 76.32, 72.25, 72.02, 69.25, 68.18, 77.32, 67.74, 68.06, 62.38, 63.16]}, "1987_BLACK_MONDAY": {"scenario": "1987_BLACK_MONDAY", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20], "market": [100.0, 101.01, 113.95, 101.76, 97.94, 111.7, 118.5, 146.27, 144.02, 89.23, 73.53, 57.95, 69.17, 69.99, 85.16, 72.24, 73.53, 74.18, 69.67, 65.52], "portfolio": [100.0, 99.41, 108.95, 94.71, 94.0, 103.61, 108.78, 134.41, 133.31, 84.96, 68.98, 57.18, 67.11, 70.0, 85.79, 76.8, 79.67, 78.74, 75.66, 70.4]}, "2020_COVID": {"scenario": "2020_COVID", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40], "market": [100.0, 87.97, 82.1, 83.26, 80.36, 65.53, 74.94, 74.0, 65.38, 64.99, 65.04, 65.06, 71.42, 70.32, 67.09, 73.48, 72.22, 66.08, 64.33, 54.42, 39.94, 37.93, 32.47, 27.23, 28.43, 29.19, 31.85, 33.42, 32.2, 31.38, 31.74, 30.26, 31.08, 33.65, 37.83, 35.44, 36.94, 37.27, 34.86, 36.1], "portfolio": [100.0, 87.37, 83.58, 83.62, 79.79, 65.6, 72.39, 71.26, 61.13, 58.53, 58.93, 58.91, 63.28, 57.5, 54.82, 61.9, 60.0, 57.16, 61.36, 49.2, 36.57, 30.79, 27.56, 23.4, 24.87, 26.22, 29.29, 30.38, 29.26, 27.41, 26.54, 24.93, 26.08, 27.62, 31.11, 29.19, 31.3, 30.22, 28.42, 29.85]}, "2000_DOTCOM": {"scenario": "2000_DOTCOM", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60], "market": [100.0, 101.37, 103.85, 112.83, 114.96, 112.32, 110.43, 110.12, 106.88, 103.53, 111.97, 112.86, 119.55, 121.14, 110.77, 115.75, 124.8, 126.42, 130.99, 132.9, 144.9, 155.65, 158.83, 183.42, 167.86, 161.31, 158.16, 151.13, 141.87, 133.64, 158.75, 178.05, 185.89, 181.89, 150.18, 171.36, 175.39, 180.32, 177.18, 169.06, 149.63, 148.09, 143.51, 134.27, 114.37, 112.59, 114.96, 115.04, 115.92, 121.92, 124.34, 129.43, 124.81, 124.13, 119.44, 125.94, 125.03, 122.48, 117.12, 114.7], "portfolio": [100.0, 99.56, 102.06, 110.19, 111.27, 109.56, 105.34, 105.79, 102.62, 98.79, 108.16, 114.86, 120.21, 118.54, 105.1, 112.02, 125.14, 122.75, 133.01, 132.76, 150.46, 165.94, 164.65, 187.91, 169.89, 163.82, 156.34, 152.12, 139.22, 138.51, 163.58, 186.84, 193.33, 204.37, 174.82, 192.46, 201.51, 209.52, 202.54, 192.67, 173.39, 169.21, 167.8, 157.72, 131.16, 127.24, 130.59, 128.59, 131.28, 134.79, 131.48, 135.35, 131.48, 127.85, 125.13, 127.48, 122.47, 119.17, 115.46, 111.09]}, "2022_INFLATION": {"scenario": "2022_INFLATION", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50], "market": [100.0, 99.69, 107.59, 104.73, 106.61, 104.86, 102.92, 103.01, 106.07, 101.44, 97.85, 103.33, 107.13, 110.56, 117.4, 117.11, 112.34, 112.99, 115.13, 112.43, 111.2, 104.96, 105.28, 109.6, 93.55, 98.07, 92.66, 84.4, 83.48, 80.18, 80.42, 78.13, 83.21, 83.42, 87.96, 82.61, 80.54, 81.07, 81.72, 83.76, 86.32, 84.76, 87.0, 85.74, 83.48, 84.91, 81.64, 82.56, 81.64, 79.87], "portfolio": [100.0, 103.42, 111.91, 109.31, 108.96, 108.7, 101.18, 99.9, 100.43, 97.75, 95.09, 95.06, 98.22, 99.46, 105.16, 102.08, 99.9, 103.21, 105.65, 107.19, 105.01, 100.44, 101.15, 104.05, 88.82, 92.48, 80.36, 73.04, 72.84, 68.89, 67.73, 63.37, 67.98, 68.31, 72.51, 69.68, 68.12, 68.55, 70.88, 72.15, 74.98, 72.86, 75.39, 73.0, 72.31, 76.73, 73.74, 73.44, 72.07, 72.32]}, "2025_AI_SHOCK": {"scenario": "2025_AI_SHOCK", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35], "market": [100.0, 96.05, 95.72, 91.92, 91.04, 92.95, 78.43, 67.8, 65.59, 60.8, 49.33, 57.09, 50.11, 44.66, 40.65, 36.43, 26.99, 25.66, 16.16, 14.65, 14.53, 12.72, 15.75, 16.29, 16.71, 18.8, 18.26, 18.32, 18.06, 18.24, 15.55, 15.4, 14.61, 13.37, 12.66], "portfolio": [100.0, 93.13, 90.14, 87.35, 88.21, 91.32, 77.05, 66.27, 63.53, 59.8, 48.48, 55.24, 48.78, 43.15, 39.81, 36.77, 27.85, 29.05, 16.12, 12.9, 12.5, 11.63, 14.78, 14.34, 15.0, 16.44, 15.48, 15.4, 14.89, 15.08, 12.49, 12.29, 11.82, 11.07, 10.48]}};

        // --- Metrics Chart ---
        if (metricsData && Object.keys(metricsData).length > 0) {
            const ctx = document.getElementById('financialChart');
            const container = document.getElementById('financialChartContainer');

            // Basic parsing of metrics structure (assuming flat or Year->Val)
            let labels = [];
            let values = [];
            let labelName = "Metric";

            // Try to find a timeseries
            for (const [key, val] of Object.entries(metricsData)) {
                if (typeof val === 'object') {
                    // Likely year -> value
                    labels = Object.keys(val);
                    values = Object.values(val).map(v => parseFloat(v.replace(/[^0-9.-]/g, '')));
                    labelName = key;
                    break;
                }
            }

            if (labels.length > 0) {
                container.style.display = 'block';
                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: labelName,
                            data: values,
                            backgroundColor: 'rgba(204, 0, 0, 0.5)',
                            borderColor: '#cc0000',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { labels: { color: '#ccc' } }
                        },
                        scales: {
                            y: { grid: { color: '#333' }, ticks: { color: '#888' } },
                            x: { grid: { color: '#333' }, ticks: { color: '#888' } }
                        }
                    }
                });
            }
        }

        // --- Crisis Simulation Logic ---
        let crisisChartInstance = null;

        window.renderCrisis = function(scenarioName) {
            if (!crisisData || !crisisData[scenarioName]) return;

            // UI Feedback for Buttons
            document.querySelectorAll('.crisis-btn').forEach(btn => {
                btn.style.borderColor = btn.innerText.includes(scenarioName.split('_')[1]) ? '#cc0000' : '#666';
                btn.style.color = btn.innerText.includes(scenarioName.split('_')[1]) ? '#cc0000' : '#ccc';
            });

            const data = crisisData[scenarioName];
            const ctx = document.getElementById('crisisChart').getContext('2d');

            if (crisisChartInstance) {
                crisisChartInstance.destroy();
            }

            crisisChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: data.labels,
                    datasets: [
                        {
                            label: 'Your Portfolio (Simulated)',
                            data: data.portfolio,
                            borderColor: '#00f3ff',
                            backgroundColor: 'rgba(0, 243, 255, 0.1)',
                            borderWidth: 2,
                            tension: 0.4,
                            pointRadius: 0
                        },
                        {
                            label: 'Market Benchmark',
                            data: data.market,
                            borderColor: '#666',
                            borderDash: [5, 5],
                            borderWidth: 1,
                            pointRadius: 0,
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        mode: 'index',
                        intersect: false,
                    },
                    plugins: {
                        legend: { labels: { color: '#ccc', font: { family: 'JetBrains Mono' } } },
                        title: {
                            display: true,
                            text: 'STRESS TEST SCENARIO: ' + scenarioName.replace(/_/g, ' '),
                            color: '#cc0000',
                            font: { family: 'JetBrains Mono' }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0,0,0,0.8)',
                            titleColor: '#cc0000',
                            bodyColor: '#fff',
                            borderColor: '#333',
                            borderWidth: 1
                        }
                    },
                    scales: {
                        y: {
                            grid: { color: '#333' },
                            ticks: { color: '#888', callback: function(value) { return value + '%'; } }
                        },
                        x: {
                            grid: { color: '#333' },
                            ticks: { display: false }
                        }
                    }
                }
            });
        };

        // Auto-Run Default Crisis if Data Available
        if (crisisData && Object.keys(crisisData).length > 0) {
            document.getElementById('crisisSimContainer').style.display = 'block';
            // slight delay to ensure Chart.js loaded
            setTimeout(() => renderCrisis('2008_LEHMAN'), 100);
        }
    </script>
</body>
</html>
