<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADAM | Crisis Simulation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://unpkg.com/lucide@latest"></script>

    <style>
        :root {
            --bg-dark: #0f0505;
            --panel-glass: rgba(30, 10, 10, 0.7);
            --alert-red: #ff3333;
            --alert-orange: #ff9933;
            --grid-line: rgba(255, 51, 51, 0.05);
        }

        body {
            background-color: var(--bg-dark);
            color: #e2e8f0;
            font-family: 'Courier New', Courier, monospace;
            background-image:
                linear-gradient(var(--grid-line) 1px, transparent 1px),
                linear-gradient(90deg, var(--grid-line) 1px, transparent 1px);
            background-size: 20px 20px;
            overflow: hidden;
        }

        .glass-panel {
            background: var(--panel-glass);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 51, 51, 0.2);
            box-shadow: 0 0 20px rgba(255, 0, 0, 0.05);
        }

        .alert-text {
            text-shadow: 0 0 5px var(--alert-red);
            animation: pulse 2s infinite;
        }

        @keyframes pulse { 0% { opacity: 0.8; } 50% { opacity: 1; } 100% { opacity: 0.8; } }

        select, button {
            background: rgba(0,0,0,0.5); border: 1px solid #552222; color: #ffcccc;
            font-family: inherit; font-size: 0.75rem; padding: 4px;
        }
        select:focus { outline: none; border-color: var(--alert-red); }

        .impact-bar {
            height: 8px; background: #331111; border-radius: 4px; overflow: hidden;
        }
        .impact-fill {
            height: 100%; background: linear-gradient(90deg, #ff9933, #ff3333);
            width: 0%; transition: width 1s ease-out;
        }

        .scenario-card {
            border: 1px solid #441111; padding: 10px; margin-bottom: 8px; cursor: pointer;
            transition: all 0.2s; background: rgba(0,0,0,0.3);
        }
        .scenario-card:hover, .scenario-card.active {
            border-color: var(--alert-red); background: rgba(255, 50, 50, 0.1);
        }
    </style>
</head>
<body class="h-screen flex flex-col p-4 text-xs">

    <div class="flex justify-between items-center mb-4 border-b border-red-900/50 pb-2">
        <h1 class="text-lg font-bold text-red-500 tracking-widest flex items-center alert-text">
            <i data-lucide="siren" class="w-5 h-5 mr-2"></i>
            CRISIS SIMULATOR (WAR-GAME MODE)
        </h1>
        <div class="flex gap-2">
             <button onclick="runSimulation()" class="px-3 py-1 bg-red-900/40 hover:bg-red-600 border border-red-500 text-white rounded font-bold flex items-center gap-1">
                <i data-lucide="play-circle" class="w-3 h-3"></i> EXECUTE SCENARIO
            </button>
        </div>
    </div>

    <div class="grid grid-cols-12 gap-4 flex-grow overflow-hidden">

        <!-- Scenario Selection -->
        <aside class="col-span-3 flex flex-col gap-3">
            <div class="glass-panel p-3 rounded h-full flex flex-col">
                <div class="text-[10px] text-red-400 mb-3 uppercase font-bold">Scenario Library</div>

                <div class="scenario-card active" onclick="selectScenario(this, 'Geopolitical Conflict')" data-desc="Escalation in Eastern Europe causes energy shock.">
                    <div class="font-bold text-red-300">Geopolitical Conflict</div>
                    <div class="text-[9px] text-gray-400 mt-1">Severity: HIGH | Prob: 15%</div>
                </div>

                <div class="scenario-card" onclick="selectScenario(this, 'Global Liquidity Freeze')" data-desc="Central banks synchronize tightening, causing credit crunch.">
                    <div class="font-bold text-orange-300">Global Liquidity Freeze</div>
                    <div class="text-[9px] text-gray-400 mt-1">Severity: CRITICAL | Prob: 5%</div>
                </div>

                <div class="scenario-card" onclick="selectScenario(this, 'Cyber Infrastructure Attack')" data-desc="Coordinated attack on SWIFT and major exchanges.">
                    <div class="font-bold text-yellow-300">Cyber Infra Attack</div>
                    <div class="text-[9px] text-gray-400 mt-1">Severity: EXTINCTION | Prob: 2%</div>
                </div>

                <div class="scenario-card" onclick="selectScenario(this, 'Pandemic Resurgence')" data-desc="New variant evades immunity, lockdowns return.">
                    <div class="font-bold text-purple-300">Pandemic Resurgence</div>
                    <div class="text-[9px] text-gray-400 mt-1">Severity: MEDIUM | Prob: 10%</div>
                </div>

                <div class="mt-4 p-2 border border-dashed border-red-900 text-[10px] text-gray-500">
                    <div class="font-bold text-red-500 mb-1">SELECTED INTEL:</div>
                    <p id="scenario-desc">Escalation in Eastern Europe causes energy shock.</p>
                </div>
            </div>
        </aside>

        <!-- Main Dashboard -->
        <main class="col-span-9 flex flex-col gap-4">
             <!-- Top Row: Impact Metrics -->
             <div class="grid grid-cols-3 gap-4 h-1/3">
                 <div class="glass-panel p-3 rounded flex flex-col justify-center items-center">
                     <div class="text-gray-400 text-[10px] uppercase">Est. Global GDP Loss</div>
                     <div class="text-2xl text-red-500 font-bold mt-2" id="loss-gdp">-2.4%</div>
                 </div>
                 <div class="glass-panel p-3 rounded flex flex-col justify-center items-center">
                     <div class="text-gray-400 text-[10px] uppercase">Market Drawdown (S&P)</div>
                     <div class="text-2xl text-orange-500 font-bold mt-2" id="loss-sp">-18.7%</div>
                 </div>
                 <div class="glass-panel p-3 rounded flex flex-col justify-center items-center">
                     <div class="text-gray-400 text-[10px] uppercase">Credit Spread Widening</div>
                     <div class="text-2xl text-yellow-500 font-bold mt-2" id="loss-credit">+450 bps</div>
                 </div>
             </div>

             <!-- Sector Impact -->
             <div class="glass-panel p-4 rounded flex-grow flex gap-4">
                <div class="w-1/2 flex flex-col">
                    <div class="text-[10px] text-red-400 mb-4 uppercase font-bold">Sector Vulnerability Heatmap</div>
                    <div class="space-y-4 overflow-y-auto pr-2">
                        <div>
                            <div class="flex justify-between text-[10px] mb-1"><span>Energy</span><span class="text-red-400" id="imp-energy">Critical</span></div>
                            <div class="impact-bar"><div class="impact-fill" style="width: 90%"></div></div>
                        </div>
                        <div>
                            <div class="flex justify-between text-[10px] mb-1"><span>Technology</span><span class="text-orange-400" id="imp-tech">High</span></div>
                            <div class="impact-bar"><div class="impact-fill" style="width: 65%"></div></div>
                        </div>
                        <div>
                            <div class="flex justify-between text-[10px] mb-1"><span>Financials</span><span class="text-red-500" id="imp-fin">Severe</span></div>
                            <div class="impact-bar"><div class="impact-fill" style="width: 85%"></div></div>
                        </div>
                        <div>
                            <div class="flex justify-between text-[10px] mb-1"><span>Healthcare</span><span class="text-green-400" id="imp-health">Low</span></div>
                            <div class="impact-bar"><div class="impact-fill" style="width: 20%; background: #225522;"></div></div>
                        </div>
                        <div>
                            <div class="flex justify-between text-[10px] mb-1"><span>Industrials</span><span class="text-yellow-400" id="imp-ind">Moderate</span></div>
                            <div class="impact-bar"><div class="impact-fill" style="width: 50%"></div></div>
                        </div>
                    </div>
                </div>
                <div class="w-1/2 flex flex-col relative">
                     <div class="text-[10px] text-red-400 mb-2 uppercase font-bold">Contagion Network</div>
                     <div class="flex-grow border border-red-900/30 rounded bg-black/20 flex items-center justify-center">
                         <canvas id="contagion-chart"></canvas>
                     </div>
                </div>
             </div>
        </main>
    </div>

    <script>
        lucide.createIcons();
        let netChart = null;

        function selectScenario(el, title) {
            document.querySelectorAll('.scenario-card').forEach(c => c.classList.remove('active'));
            el.classList.add('active');
            document.getElementById('scenario-desc').innerText = el.getAttribute('data-desc');
        }

        function runSimulation() {
            // Randomize metrics based on "simulation"
            const gdp = (Math.random() * 5 + 1).toFixed(1);
            const sp = (Math.random() * 30 + 10).toFixed(1);
            const bps = Math.floor(Math.random() * 400 + 200);

            document.getElementById('loss-gdp').innerText = `-${gdp}%`;
            document.getElementById('loss-sp').innerText = `-${sp}%`;
            document.getElementById('loss-credit').innerText = `+${bps} bps`;

            // Randomize bars
            const bars = document.querySelectorAll('.impact-fill');
            bars.forEach(b => {
                b.style.width = Math.floor(Math.random() * 100) + '%';
            });

            renderNetwork();
        }

        function renderNetwork() {
            const ctx = document.getElementById('contagion-chart').getContext('2d');
            if(netChart) netChart.destroy();

            // Mock network data
            const nodes = Array.from({length: 15}, (_,i) => ({
                x: Math.random() * 100,
                y: Math.random() * 100,
                r: Math.random() * 5 + 2
            }));

            netChart = new Chart(ctx, {
                type: 'bubble',
                data: {
                    datasets: [{
                        label: 'Contagion Nodes',
                        data: nodes,
                        backgroundColor: 'rgba(255, 51, 51, 0.6)',
                        borderColor: '#ff3333'
                    }]
                },
                options: {
                    responsive: true, maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        x: { display: false },
                        y: { display: false }
                    },
                    animation: {
                        duration: 2000,
                        easing: 'easeOutQuart'
                    }
                }
            });
        }

        window.onload = function() {
            lucide.createIcons();
            runSimulation();
        };
    </script>
</body>
</html>
