<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADAM v23.5 :: 2024 Year in Review: Navigating Uncertainty and Transition</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/market_mayhem_tiers.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@300;400;600;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/nav.js" defer></script>
    <script src="js/market_mayhem_viewer.js" defer></script>
</head>
<body class="tier-high">

    <div id="system2-overlay" class="system2-overlay">
        <div class="system2-terminal">
            <div id="sys2-content"></div>
        </div>
    </div>

    <div id="toast-container" class="cyber-toast-container"></div>

    <div id="raw-source-modal" class="raw-source-modal">
        <div class="raw-source-header">
            <span>SOURCE_DATA.JSON</span>
            <span style="cursor:pointer; color:#cc0000;" onclick="toggleSource()">[CLOSE]</span>
        </div>
        <div class="raw-source-content" id="raw-source-content"></div>
    </div>

    <div class="doc-toolbar" style="display: flex;">
        <div class="toolbar-item" onclick="window.location.href='market_mayhem_archive_v24.html'"><strong>FILE</strong></div>
        <div class="toolbar-item" onclick="toggleRedactionMode()">REDACT</div>
        <div class="toolbar-item" onclick="printReport()">PRINT</div>
        <div class="toolbar-item" onclick="shareReport()">SHARE</div>
        <div class="toolbar-item" onclick="downloadReport()">DOWNLOAD</div>
        <div class="toolbar-item" onclick="toggleTheme()">VIEW</div>
        <div class="toolbar-item" onclick="showToast('INSERT: PERMISSION DENIED')">INSERT</div>
        <div class="toolbar-item" onclick="showToast('FORMAT: LOCKED')">FORMAT</div>
        <div class="toolbar-item" onclick="runVerification()" style="color: #0078d7;"><strong>VERIFY</strong></div>
        <div style="flex-grow:1;"></div>
        <div class="toolbar-item" style="color:#666;">ADAM_V26_EDITOR</div>
    </div>

    <div style="max-width: 1400px; margin: 0 auto; padding: 10px 20px; display:flex; justify-content:space-between; align-items:center; display: none;">
        <a href="market_mayhem_archive_v24.html" class="cyber-btn">&larr; RETURN TO ARCHIVE</a>
        <div style="font-family:'JetBrains Mono'; font-size:0.7rem; color:#666;">SECURE CONNECTION ESTABLISHED</div>
    </div>

    <div class="newsletter-wrapper">
        <div class="paper-sheet" id="paper-sheet">

            <div id="top-secret-stamp" class="top-secret-stamp">TOP SECRET</div>

            <div class="doc-header-ui" style="display: flex;">
                <span id="verification-status">CONFIDENTIAL // SYSTEM 2 REVIEW</span>
                <span>1ea6fdf2</span>
            </div>

            <div style="display:flex; justify-content:space-between; font-family:'JetBrains Mono'; font-size:0.8rem; color:#666; margin-bottom:20px; margin-top: 20px;">
                <span>2025-01-01</span>
                <span>ID: 1ea6fdf2</span>
            </div>

            <h1 class="title">2024 Year in Review: Navigating Uncertainty and Transition</h1>

            <div class="doc-metadata-panel" style="display: grid;">
                <div class="doc-metadata-item"><strong>Classification</strong>UNCLASSIFIED</div>
                <div class="doc-metadata-item"><strong>Conviction</strong>16/100</div>
                <div class="doc-metadata-item"><strong>Sentiment</strong>82/100</div>
                <div class="doc-metadata-item"><strong>Reviewer</strong>Sovereign_AI</div>
            </div>

            <div id="financialChartContainer" style="display:none; margin-bottom: 30px;">
                <canvas id="financialChart"></canvas>
            </div>

            <div id="crisisSimContainer" style="display:none; margin-bottom: 30px; border: 1px solid #cc0000; padding: 20px; background: rgba(50, 0, 0, 0.2);">
                <h3 style="color: #cc0000; margin-top: 0; font-family: 'JetBrains Mono'; border-bottom: 1px solid #cc0000; padding-bottom: 10px; margin-bottom: 20px;">CRISIS SIMULATOR // STRESS TEST</h3>

                <div style="display:grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 10px; margin-bottom: 20px;">
                    <div class="crisis-btn" onclick="renderCrisis('2008_LEHMAN')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2008 LEHMAN
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('1987_BLACK_MONDAY')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        1987 BLACK MON
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('2000_DOTCOM_BUBBLE')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2000 DOTCOM
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('2020_COVID')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2020 PANDEMIC
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('2022_INFLATION_SHOCK')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2022 INFLATION
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('2025_AI_SHOCK')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2025 AI SHOCK
                    </div>
                </div>

                <div style="height: 300px; position: relative;">
                    <canvas id="crisisChart"></canvas>
                </div>

                <div id="crisisMetrics" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px; font-family: 'JetBrains Mono'; font-size: 0.8rem; color: #ccc;">
                    <div style="border: 1px solid #00f3ff; padding: 10px; background: rgba(0, 243, 255, 0.05);">
                        <div style="color: #00f3ff; border-bottom: 1px solid #00f3ff; margin-bottom: 10px; padding-bottom: 5px; font-weight: bold;">PORTFOLIO PERFORMANCE</div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;"><span>MAX DRAWDOWN:</span> <span id="port_dd" style="color: #fff;">0.00%</span></div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;"><span>VOLATILITY (ANN):</span> <span id="port_vol" style="color: #fff;">0.00%</span></div>
                        <div style="display: flex; justify-content: space-between;"><span>TOTAL RETURN:</span> <span id="port_ret" style="color: #fff;">0.00%</span></div>
                    </div>
                    <div style="border: 1px solid #666; padding: 10px; background: rgba(100, 100, 100, 0.1);">
                        <div style="color: #888; border-bottom: 1px solid #666; margin-bottom: 10px; padding-bottom: 5px; font-weight: bold;">MARKET BENCHMARK</div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;"><span>MAX DRAWDOWN:</span> <span id="mkt_dd" style="color: #ccc;">0.00%</span></div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 5px;"><span>VOLATILITY (ANN):</span> <span id="mkt_vol" style="color: #ccc;">0.00%</span></div>
                        <div style="display: flex; justify-content: space-between;"><span>TOTAL RETURN:</span> <span id="mkt_ret" style="color: #ccc;">0.00%</span></div>
                    </div>
                </div>

                <div style="font-size: 0.7rem; color: #888; margin-top: 15px; font-style: italic;">
                    * Hypothetical performance based on portfolio beta and current risk profile. PAST PERFORMANCE IS NOT INDICATIVE OF FUTURE RESULTS.
                </div>
            </div>

            <div id="document-body">
                <h2>Market Overview</h2><p>2024 was a year of uncertainty and transition for the financial markets. After a strong recovery in 2023, market volatility increased as investors grappled with mixed economic signals, geopolitical risks, and the ongoing energy transition. Major stock indices experienced moderate gains, with the S&P 500 ending the year up approximately 5%.</p>
<h2>Major Themes and Trends</h2><p>Several key themes and trends shaped the market in 2024: <em> <strong>Economic Slowdown:</strong>  Global economic growth slowed as central banks continued to tighten monetary policies to combat persistent inflation. </em> <strong>Inflation Persistence:</strong>  Inflation proved to be more persistent than initially anticipated, raising concerns about stagflation and potential recessionary pressures. <em> <strong>Geopolitical Volatility:</strong>  Geopolitical tensions remained elevated, with ongoing conflicts and trade disputes contributing to market uncertainty. </em> <strong>Energy Transition Challenges:</strong>  The energy transition faced challenges, including supply chain bottlenecks, infrastructure limitations, and regulatory hurdles. <em> <strong>AI Regulation:</strong>  Governments and regulatory bodies began to grapple with the implications of AI, leading to increased scrutiny and potential regulatory changes. </em> <strong>Market Bifurcation:</strong>  The market experienced a bifurcation, with some sectors and companies performing well while others struggled to adapt to the changing environment.</p>
<h2>Industry Performance</h2><p>Industry performance was mixed in 2024: <em> <strong>Healthcare:</strong>  The healthcare sector continued to show resilience, driven by innovation and demographic trends. </em> <strong>Consumer Staples:</strong>  Consumer staples companies maintained stable performance, benefiting from consistent demand for essential goods. <em> <strong>Energy:</strong>  The energy sector experienced volatility, with renewable energy companies outperforming traditional fossil fuel companies. </em> <strong>Technology:</strong>  The technology sector's performance was mixed, with some companies benefiting from AI advancements while others faced regulatory headwinds. * <strong>Financials:</strong>  The financials sector faced challenges due to rising interest rates and potential credit risks.</p>
<h2>Top Performers</h2><p>Some of the top-performing companies in 2024 included: <em> <strong>Johnson & Johnson (JNJ):</strong>  A diversified healthcare company with a strong track record. </em> <strong>Procter & Gamble (PG):</strong>  A consumer staples giant with a broad portfolio of brands. <em> <strong>Enphase Energy (ENPH):</strong>  A leading provider of solar microinverter systems. </em> <strong>Salesforce (CRM):</strong>  A cloud-based software company that continued to expand its market share. * <strong>Visa (V):</strong>  A global payments technology company that benefited from increased digital transactions.</p>
<h2>Portfolio Construction and Optimization</h2><p>In a year of uncertainty and transition like 2024, portfolio construction and optimization required a more nuanced approach: <em> <strong>Balancing Growth and Value:</strong>  Combining growth investments in promising sectors with value investments in undervalued companies. </em> <strong>Active Management:</strong>  Actively managing the portfolio to adapt to changing market conditions and opportunities. <em> <strong>Risk Mitigation:</strong>  Implementing risk mitigation strategies to protect against potential downturns and volatility. </em> <strong>Alternative Investments:</strong>  Considering alternative investments, such as private equity or real estate, to diversify the portfolio.</p>
<h2>Looking Ahead</h2><p>2024 highlighted the importance of adaptability and resilience in navigating uncertain markets. As we move forward, investors should focus on long-term trends, such as the energy transition, AI development, and demographic shifts. Adam v15.4 can assist investors in understanding these trends, managing risks, and making informed investment decisions.</p>

            </div>

            <div class="provenance-log">
                <div class="log-entry">
                    <span>> HASH_CHECK</span>
                    <span style="color:var(--terminal-green);">1ea6fdf2d79417e86ec1bc8886869a5a61e1a99d8bdbf760e1b26c2e84dd08b4</span>
                </div>
                <div class="log-entry">
                    <span>> SENTIMENT_SCAN</span>
                    <span>82 (DENSITY: 42)</span>
                </div>
                <div class="log-entry">
                    <span>> CONVICTION_LOCK</span>
                    <span>16%</span>
                </div>
                <div class="log-entry">
                    <span>> CRITIQUE_LOG</span>
                    <span>"Agent Sovereign_AI reviewed this intelligence. Verdict: HIGH_CONFIDENCE. Sentiment alignment: 82/100. Cross-reference with knowledge graph completed."</span>
                </div>
            </div>

            <a href="#" class="source-jump-btn" onclick="toggleSource(); return false;" title="View Source JSON">JUMP TO SOURCE</a>

            <div style="margin-top: 40px; border-top: 1px solid #ccc; padding-top: 20px; font-style: italic; color: #666;">
                End of Transmission.
            </div>
        </div>

        <aside class="cyber-sidebar">
            <div class="sidebar-widget">
                <div class="sidebar-title">Intelligence Metadata</div>
                <div class="stat-row"><span>DATE</span> <span class="stat-val">2025-01-01</span></div>
                <div class="stat-row"><span>TYPE</span> <span class="stat-val">MARKET_OUTLOOK</span></div>
                <div class="stat-row"><span>CLASS</span> <span class="stat-val">UNCLASSIFIED</span></div>
                <div class="stat-row"><span>PROVENANCE</span> <span class="stat-val" title="1ea6fdf2d79417e86ec1bc8886869a5a61e1a99d8bdbf760e1b26c2e84dd08b4">1ea6fdf2</span></div>
            </div>

            <div class="sidebar-widget">
                <div class="sidebar-title">Sentiment Analysis</div>
                <div class="stat-row"><span>SCORE</span> <span class="stat-val">82/100</span></div>
                <div class="sentiment-bar">
                    <div class="sentiment-fill" style="width: 82%;"></div>
                </div>
            </div>

            <div class="sidebar-widget">
                <div class="sidebar-title">Detected Entities</div>
                <div class="tag-cloud">
                    <a href="market_mayhem_archive_v24.html?search=AI" class="tag" style="text-decoration:none; border-color:#666;">AI</a><a href="market_mayhem_archive_v24.html?search=Banks" class="tag" style="text-decoration:none; border-color:#666;">Banks</a><a href="market_mayhem_archive_v24.html?search=Cloud" class="tag" style="text-decoration:none; border-color:#666;">Cloud</a><a href="market_mayhem_archive_v24.html?search=EV" class="tag" style="text-decoration:none; border-color:#666;">EV</a><a href="market_mayhem_archive_v24.html?search=Energy" class="tag" style="text-decoration:none; border-color:#666;">Energy</a>
                </div>
            </div>

             <div class="sidebar-widget">
                <div class="sidebar-title">Agent Conviction</div>
                 <div class="stat-row"><span>CONFIDENCE</span> <span class="stat-val">16/100</span></div>
                 <div class="sentiment-bar">
                    <div class="sentiment-fill" style="width: 16%; background: #ff0000;"></div>
                </div>
            </div>

            <div class="sidebar-widget">
                <div class="sidebar-title">Semantic Analysis</div>
                 <div class="stat-row"><span>DENSITY</span> <span class="stat-val">42/100</span></div>
                 <div class="stat-row"><span>PROBABILITY</span> <span class="stat-val">36/100</span></div>
            </div>

             <div class="sidebar-widget" style="border-color: #555;">
                <div class="sidebar-title">Reviewer Agent Log</div>
                 <div style="font-size: 0.75rem; color: #ccc; font-style: italic;">
                    "Agent Sovereign_AI reviewed this intelligence. Verdict: HIGH_CONFIDENCE. Sentiment alignment: 82/100. Cross-reference with knowledge graph completed."
                </div>
                <div class="stat-row" style="margin-top:10px;"><span>QUALITY SCORE</span> <span class="stat-val">100/100</span></div>
            </div>

             <div class="sidebar-widget">
                <div class="sidebar-title">Contributing Agents</div>
                 <div style="display:flex; flex-direction:column; gap:5px;">
                    <div style="font-size:0.75rem; color:#666;">System Core</div>
                </div>
            </div>
        </aside>
    </div>

    <textarea id="hidden-raw-data" style="display:none;">{
  "title": "2024 Year in Review: Navigating Uncertainty and Transition",
  "date": "2025-01-01",
  "summary": "2024 was a year of uncertainty and transition for the financial markets. After a strong recovery in 2023, market volatility increased as investors grappled with mixed economic signals, geopolitical ri...",
  "type": "MARKET_OUTLOOK",
  "full_body": "<h2>Market Overview</h2><p>2024 was a year of uncertainty and transition for the financial markets. After a strong recovery in 2023, market volatility increased as investors grappled with mixed economic signals, geopolitical risks, and the ongoing energy transition. Major stock indices experienced moderate gains, with the S&P 500 ending the year up approximately 5%.</p>\n<h2>Major Themes and Trends</h2><p>Several key themes and trends shaped the market in 2024: <em> <strong>Economic Slowdown:</strong>  Global economic growth slowed as central banks continued to tighten monetary policies to combat persistent inflation. </em> <strong>Inflation Persistence:</strong>  Inflation proved to be more persistent than initially anticipated, raising concerns about stagflation and potential recessionary pressures. <em> <strong>Geopolitical Volatility:</strong>  Geopolitical tensions remained elevated, with ongoing conflicts and trade disputes contributing to market uncertainty. </em> <strong>Energy Transition Challenges:</strong>  The energy transition faced challenges, including supply chain bottlenecks, infrastructure limitations, and regulatory hurdles. <em> <strong>AI Regulation:</strong>  Governments and regulatory bodies began to grapple with the implications of AI, leading to increased scrutiny and potential regulatory changes. </em> <strong>Market Bifurcation:</strong>  The market experienced a bifurcation, with some sectors and companies performing well while others struggled to adapt to the changing environment.</p>\n<h2>Industry Performance</h2><p>Industry performance was mixed in 2024: <em> <strong>Healthcare:</strong>  The healthcare sector continued to show resilience, driven by innovation and demographic trends. </em> <strong>Consumer Staples:</strong>  Consumer staples companies maintained stable performance, benefiting from consistent demand for essential goods. <em> <strong>Energy:</strong>  The energy sector experienced volatility, with renewable energy companies outperforming traditional fossil fuel companies. </em> <strong>Technology:</strong>  The technology sector's performance was mixed, with some companies benefiting from AI advancements while others faced regulatory headwinds. * <strong>Financials:</strong>  The financials sector faced challenges due to rising interest rates and potential credit risks.</p>\n<h2>Top Performers</h2><p>Some of the top-performing companies in 2024 included: <em> <strong>Johnson & Johnson (JNJ):</strong>  A diversified healthcare company with a strong track record. </em> <strong>Procter & Gamble (PG):</strong>  A consumer staples giant with a broad portfolio of brands. <em> <strong>Enphase Energy (ENPH):</strong>  A leading provider of solar microinverter systems. </em> <strong>Salesforce (CRM):</strong>  A cloud-based software company that continued to expand its market share. * <strong>Visa (V):</strong>  A global payments technology company that benefited from increased digital transactions.</p>\n<h2>Portfolio Construction and Optimization</h2><p>In a year of uncertainty and transition like 2024, portfolio construction and optimization required a more nuanced approach: <em> <strong>Balancing Growth and Value:</strong>  Combining growth investments in promising sectors with value investments in undervalued companies. </em> <strong>Active Management:</strong>  Actively managing the portfolio to adapt to changing market conditions and opportunities. <em> <strong>Risk Mitigation:</strong>  Implementing risk mitigation strategies to protect against potential downturns and volatility. </em> <strong>Alternative Investments:</strong>  Considering alternative investments, such as private equity or real estate, to diversify the portfolio.</p>\n<h2>Looking Ahead</h2><p>2024 highlighted the importance of adaptability and resilience in navigating uncertain markets. As we move forward, investors should focus on long-term trends, such as the energy transition, AI development, and demographic shifts. Adam v15.4 can assist investors in understanding these trends, managing risks, and making informed investment decisions.</p>\n",
  "sentiment_score": 82,
  "entities": {
    "tickers": [],
    "agents": [],
    "sovereigns": [],
    "keywords": [
      "AI",
      "Banks",
      "Cloud",
      "EV",
      "Energy"
    ]
  },
  "provenance_hash": "1ea6fdf2d79417e86ec1bc8886869a5a61e1a99d8bdbf760e1b26c2e84dd08b4",
  "filename": "2024 Year in Review: Navigating Uncertainty and Transition.html",
  "is_sourced": true,
  "metrics_json": "{}",
  "source_priority": 2,
  "conviction": 16,
  "semantic_score": 42,
  "probability": 36,
  "outlook_score": 10,
  "critique": "Agent Sovereign_AI reviewed this intelligence. Verdict: HIGH_CONFIDENCE. Sentiment alignment: 82/100. Cross-reference with knowledge graph completed."
}</textarea>

    <script>
        // Chart Injection Logic
        const metricsData = {};
        const crisisData = {"2008_LEHMAN": {"scenario": "2008_LEHMAN", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30], "market": [100.0, 103.35, 117.1, 116.25, 113.62, 123.09, 107.41, 103.62, 112.98, 110.22, 108.71, 100.4, 89.92, 83.36, 41.31, 42.49, 48.21, 47.93, 48.8, 45.58, 48.63, 46.29, 47.71, 51.58, 51.44, 51.9, 49.5, 54.44, 53.95, 55.54], "portfolio": [100.0, 104.79, 123.53, 118.41, 119.28, 132.7, 107.08, 103.26, 117.05, 109.97, 111.95, 100.24, 81.01, 68.82, 12.92, 13.46, 15.85, 15.08, 15.44, 15.41, 16.46, 14.86, 15.38, 16.93, 16.9, 17.05, 15.58, 17.02, 17.06, 18.55], "metrics": {"market": {"max_drawdown": 66.44, "volatility": 180.92, "total_return": -44.46}, "portfolio": {"max_drawdown": 90.26, "volatility": 280.93, "total_return": -81.45}}}, "1987_BLACK_MONDAY": {"scenario": "1987_BLACK_MONDAY", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20], "market": [100.0, 86.29, 80.52, 83.78, 85.08, 91.84, 86.42, 84.24, 76.3, 24.77, 19.35, 16.09, 14.25, 13.14, 11.85, 12.24, 13.15, 12.89, 12.43, 12.44], "portfolio": [100.0, 78.13, 71.82, 76.69, 80.33, 90.32, 82.67, 76.92, 66.1, -5.84, -3.99, -2.75, -2.17, -1.87, -1.65, -1.75, -2.01, -1.93, -1.72, -1.68], "metrics": {"market": {"max_drawdown": 88.15, "volatility": 254.37, "total_return": -87.56}, "portfolio": {"max_drawdown": 105.84, "volatility": 411.72, "total_return": -101.68}}}, "2000_DOTCOM_BUBBLE": {"scenario": "2000_DOTCOM_BUBBLE", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45], "market": [100.0, 101.46, 95.84, 92.86, 90.51, 89.09, 87.73, 78.6, 79.66, 66.94, 73.24, 81.91, 69.07, 72.17, 63.02, 60.69, 69.08, 75.6, 74.15, 69.09, 73.04, 77.45, 77.58, 80.57, 77.77, 74.84, 77.13, 71.62, 66.9, 64.04, 62.24, 58.82, 58.2, 62.63, 59.19, 57.09, 58.1, 58.72, 63.56, 58.76, 58.16, 57.18, 59.19, 61.31, 60.3], "portfolio": [100.0, 105.33, 93.44, 85.32, 85.5, 81.4, 81.55, 66.63, 68.4, 59.46, 64.11, 72.16, 54.44, 60.31, 49.06, 47.18, 57.29, 62.32, 62.41, 55.87, 60.97, 65.84, 68.3, 71.39, 67.39, 64.37, 66.22, 60.8, 53.92, 52.34, 51.5, 48.08, 48.07, 55.55, 51.87, 50.89, 52.49, 52.7, 58.84, 49.96, 48.76, 46.38, 49.63, 52.6, 50.97], "metrics": {"market": {"max_drawdown": 43.73, "volatility": 104.7, "total_return": -39.7}, "portfolio": {"max_drawdown": 55.97, "volatility": 150.28, "total_return": -49.03}}}, "2020_COVID": {"scenario": "2020_COVID", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40], "market": [100.0, 99.63, 85.09, 92.62, 83.05, 77.97, 77.34, 67.96, 64.86, 69.27, 60.71, 69.01, 62.73, 49.21, 52.95, 65.26, 66.23, 69.74, 62.55, 61.73, 37.88, 29.31, 30.86, 30.56, 28.42, 34.15, 35.73, 31.81, 36.29, 35.7, 37.11, 34.27, 33.92, 32.79, 29.57, 26.88, 26.07, 28.03, 27.28, 28.65], "portfolio": [100.0, 100.62, 80.64, 91.89, 75.88, 69.27, 71.86, 55.67, 54.69, 57.73, 44.88, 53.35, 47.29, 33.78, 38.98, 51.91, 53.51, 56.94, 47.0, 48.08, 23.17, 13.91, 12.95, 12.29, 10.96, 14.34, 15.76, 13.9, 16.87, 16.16, 16.96, 15.03, 14.33, 13.02, 11.2, 9.65, 9.08, 10.25, 9.66, 10.12], "metrics": {"market": {"max_drawdown": 73.93, "volatility": 184.02, "total_return": -71.35}, "portfolio": {"max_drawdown": 90.98, "volatility": 271.66, "total_return": -89.88}}}, "2022_INFLATION_SHOCK": {"scenario": "2022_INFLATION_SHOCK", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60], "market": [100.0, 98.8, 98.21, 92.42, 92.93, 94.16, 95.02, 95.56, 95.53, 93.16, 90.19, 88.76, 90.47, 91.96, 87.09, 84.93, 89.03, 91.51, 89.0, 90.25, 85.12, 86.97, 89.19, 92.7, 92.12, 88.2, 86.69, 85.76, 82.99, 86.71, 87.0, 83.34, 75.16, 78.88, 76.12, 75.1, 78.28, 78.71, 76.31, 72.27, 68.34, 69.44, 69.39, 65.97, 62.23, 62.4, 61.62, 61.92, 63.36, 62.98, 61.89, 59.61, 62.72, 61.17, 63.02, 62.38, 61.13, 61.24, 62.05, 59.56], "portfolio": [100.0, 96.15, 99.17, 91.03, 96.36, 96.07, 101.59, 99.25, 102.44, 93.99, 90.19, 87.27, 87.57, 92.9, 88.13, 83.92, 90.86, 93.54, 89.92, 92.5, 89.1, 88.2, 95.35, 102.31, 103.88, 103.03, 99.16, 98.18, 90.91, 95.85, 91.56, 84.48, 68.67, 73.32, 69.63, 68.19, 72.09, 75.41, 70.23, 62.56, 59.04, 62.36, 62.73, 57.98, 50.42, 50.71, 49.43, 49.16, 50.64, 49.63, 48.06, 46.13, 49.17, 46.03, 47.58, 47.59, 45.98, 46.49, 47.39, 44.98], "metrics": {"market": {"max_drawdown": 40.44, "volatility": 50.56, "total_return": -40.44}, "portfolio": {"max_drawdown": 56.7, "volatility": 87.94, "total_return": -55.02}}}, "2025_AI_SHOCK": {"scenario": "2025_AI_SHOCK", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35], "market": [100.0, 108.96, 90.94, 75.21, 61.64, 65.35, 69.36, 72.6, 78.26, 89.11, 83.45, 73.82, 70.39, 79.49, 79.08, 76.43, 72.08, 73.87, 77.85, 88.37, 114.44, 105.74, 112.71, 123.34, 108.58, 103.4, 106.04, 95.01, 93.95, 88.94, 105.13, 104.97, 101.28, 90.78, 90.23], "portfolio": [100.0, 115.23, 86.66, 62.45, 47.22, 52.31, 57.21, 60.68, 68.71, 83.63, 75.08, 63.13, 59.74, 71.79, 72.21, 72.18, 65.5, 73.1, 82.42, 104.38, 149.24, 128.31, 143.79, 164.7, 136.48, 126.89, 132.43, 108.09, 109.42, 96.76, 124.41, 126.53, 121.7, 108.93, 106.3], "metrics": {"market": {"max_drawdown": 43.43, "volatility": 167.2, "total_return": -9.77}, "portfolio": {"max_drawdown": 59.02, "volatility": 259.79, "total_return": 6.3}}}};

        // --- Metrics Chart ---
        if (metricsData && Object.keys(metricsData).length > 0) {
            const ctx = document.getElementById('financialChart');
            const container = document.getElementById('financialChartContainer');

            // Basic parsing of metrics structure (assuming flat or Year->Val)
            let labels = [];
            let values = [];
            let labelName = "Metric";

            // Try to find a timeseries
            for (const [key, val] of Object.entries(metricsData)) {
                if (typeof val === 'object') {
                    // Likely year -> value
                    labels = Object.keys(val);
                    values = Object.values(val).map(v => parseFloat(v.replace(/[^0-9.-]/g, '')));
                    labelName = key;
                    break;
                }
            }

            if (labels.length > 0) {
                container.style.display = 'block';
                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: labelName,
                            data: values,
                            backgroundColor: 'rgba(204, 0, 0, 0.5)',
                            borderColor: '#cc0000',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { labels: { color: '#ccc' } }
                        },
                        scales: {
                            y: { grid: { color: '#333' }, ticks: { color: '#888' } },
                            x: { grid: { color: '#333' }, ticks: { color: '#888' } }
                        }
                    }
                });
            }
        }

        // --- Crisis Simulation Logic ---
        let crisisChartInstance = null;

        window.renderCrisis = function(scenarioName) {
            if (!crisisData || !crisisData[scenarioName]) return;

            // UI Feedback for Buttons
            document.querySelectorAll('.crisis-btn').forEach(btn => {
                btn.style.borderColor = btn.innerText.includes(scenarioName.split('_')[1]) ? '#cc0000' : '#666';
                btn.style.color = btn.innerText.includes(scenarioName.split('_')[1]) ? '#cc0000' : '#ccc';
            });

            const data = crisisData[scenarioName];

            // Update Metrics Display
            if (data.metrics) {
                const p = data.metrics.portfolio;
                const m = data.metrics.market;

                document.getElementById('port_dd').innerText = p.max_drawdown.toFixed(2) + '%';
                document.getElementById('port_vol').innerText = p.volatility.toFixed(2) + '%';
                document.getElementById('port_ret').innerText = p.total_return.toFixed(2) + '%';

                // Color code return
                document.getElementById('port_ret').style.color = p.total_return >= 0 ? '#00f3ff' : '#ff4444';

                document.getElementById('mkt_dd').innerText = m.max_drawdown.toFixed(2) + '%';
                document.getElementById('mkt_vol').innerText = m.volatility.toFixed(2) + '%';
                document.getElementById('mkt_ret').innerText = m.total_return.toFixed(2) + '%';

                document.getElementById('mkt_ret').style.color = m.total_return >= 0 ? '#ccc' : '#cc0000';
            }

            const ctx = document.getElementById('crisisChart').getContext('2d');

            if (crisisChartInstance) {
                crisisChartInstance.destroy();
            }

            crisisChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: data.labels,
                    datasets: [
                        {
                            label: 'Your Portfolio (Simulated)',
                            data: data.portfolio,
                            borderColor: '#00f3ff',
                            backgroundColor: 'rgba(0, 243, 255, 0.1)',
                            borderWidth: 2,
                            tension: 0.4,
                            pointRadius: 0
                        },
                        {
                            label: 'Market Benchmark',
                            data: data.market,
                            borderColor: '#666',
                            borderDash: [5, 5],
                            borderWidth: 1,
                            pointRadius: 0,
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        mode: 'index',
                        intersect: false,
                    },
                    plugins: {
                        legend: { labels: { color: '#ccc', font: { family: 'JetBrains Mono' } } },
                        title: {
                            display: true,
                            text: 'STRESS TEST SCENARIO: ' + scenarioName.replace(/_/g, ' '),
                            color: '#cc0000',
                            font: { family: 'JetBrains Mono' }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0,0,0,0.8)',
                            titleColor: '#cc0000',
                            bodyColor: '#fff',
                            borderColor: '#333',
                            borderWidth: 1
                        }
                    },
                    scales: {
                        y: {
                            grid: { color: '#333' },
                            ticks: { color: '#888', callback: function(value) { return value + '%'; } }
                        },
                        x: {
                            grid: { color: '#333' },
                            ticks: { display: false }
                        }
                    }
                }
            });
        };

        // Auto-Run Default Crisis if Data Available
        if (crisisData && Object.keys(crisisData).length > 0) {
            document.getElementById('crisisSimContainer').style.display = 'block';

            // Parse URL parameters for ?sim=SCENARIO_NAME
            const urlParams = new URLSearchParams(window.location.search);
            const simParam = urlParams.get('sim');

            // slight delay to ensure Chart.js loaded
            setTimeout(() => {
                if (simParam && crisisData[simParam]) {
                    renderCrisis(simParam);
                    // Scroll to container
                    document.getElementById('crisisSimContainer').scrollIntoView({ behavior: 'smooth' });
                } else {
                    renderCrisis('2008_LEHMAN');
                }
            }, 100);
        }
    </script>
</body>
</html>