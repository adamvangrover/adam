<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADAM System | Research Lab</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
        :root {
            --bg-dark: #020408;
            --panel-glass: rgba(15, 23, 42, 0.6);
            --border-glass: rgba(51, 65, 85, 0.5);
        }

        body {
            background-color: var(--bg-dark);
            color: #cbd5e1; /* slate-300 */
            font-family: 'Inter', sans-serif;
        }

        /* Sci-Fi Grid Background */
        .grid-bg {
            background-image: 
                linear-gradient(rgba(30, 41, 59, 0.2) 1px, transparent 1px),
                linear-gradient(90deg, rgba(30, 41, 59, 0.2) 1px, transparent 1px);
            background-size: 30px 30px;
        }

        /* CRT Scanline Effect */
        .scan-line {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            background-size: 100% 2px, 3px 100%;
            pointer-events: none;
            z-index: 50;
            opacity: 0.6;
        }

        /* Glassmorphism Panel */
        .glass-panel {
            background: var(--panel-glass);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid var(--border-glass);
            border-radius: 0.75rem; /* rounded-xl */
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        /* Utility Fonts */
        .mono { font-family: 'Courier New', Courier, monospace; }

        /* Custom Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: #0f172a; }
        ::-webkit-scrollbar-thumb { background: #334155; border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: #475569; }
    </style>
</head>
<body class="h-screen flex flex-col grid-bg overflow-hidden text-sm">
    <div class="scan-line"></div>

    <header class="h-16 border-b border-slate-700/50 flex items-center justify-between px-6 bg-[#0f172a]/90 backdrop-blur z-40 shrink-0">
        <div class="flex items-center gap-4">
            <button class="text-slate-400 hover:text-white transition">
                <i class="fas fa-bars"></i>
            </button>
            <h1 class="text-xl font-bold tracking-tight mono">ADAM <span class="text-cyan-400">v23.5</span> <span class="text-slate-500 font-normal">| Research Lab</span></h1>
        </div>
        <div class="flex gap-6 mono text-xs text-slate-400">
             <div class="flex items-center gap-2">
                <div class="w-2 h-2 rounded-full bg-emerald-500 animate-pulse"></div>
                <span>GPU_CLUSTER: <span class="text-emerald-400 font-bold">ONLINE</span></span>
             </div>
             <div>JOBS: <span class="text-cyan-400 font-bold">2 ACTIVE</span></div>
             <div>COOKBOOK: <span class="text-purple-400 font-bold">SYNCED</span></div>
        </div>
    </header>

    <main class="flex-1 p-6 grid grid-cols-12 gap-6 overflow-y-auto">

        <div class="col-span-12 lg:col-span-8 glass-panel p-6 flex flex-col">
            <div class="flex justify-between items-center mb-4 border-b border-slate-700/50 pb-3">
                <div class="flex flex-col">
                    <h3 class="text-slate-100 text-sm font-bold tracking-wider flex items-center gap-2">
                        <i class="fas fa-brain text-cyan-400"></i> Adam-v24-Base
                    </h3>
                    <div class="text-xs text-slate-500 mono mt-1">
                        Epoch <span id="epoch-display" class="text-white">42</span>/100
                    </div>
                </div>
                <div class="flex gap-3">
                    <div class="flex flex-col items-end">
                        <span class="text-[10px] text-slate-500 uppercase">Current Loss</span>
                        <span id="loss-display" class="text-emerald-400 font-mono font-bold">0.241</span>
                    </div>
                    <div class="flex flex-col items-end">
                        <span class="text-[10px] text-slate-500 uppercase">Est. Time</span>
                        <span class="text-blue-400 font-mono font-bold">4h 12m</span>
                    </div>
                </div>
            </div>
            
            <div class="w-full bg-slate-800 h-1.5 rounded-full overflow-hidden mb-4">
                <div id="epoch-progress" class="bg-cyan-500 h-full w-[42%] transition-all duration-1000 ease-linear"></div>
            </div>

            <div class="flex-1 w-full min-h-[250px] relative">
                <canvas id="lossChart"></canvas>
            </div>
        </div>

        <div class="col-span-12 lg:col-span-4 glass-panel p-6 flex flex-col h-full">
            <h3 class="text-slate-400 text-xs uppercase font-bold tracking-wider mb-4 border-b border-slate-700/50 pb-2">
                <i class="fas fa-archive mr-2"></i> Model Registry
            </h3>
            
            <div class="space-y-3 flex-1 overflow-y-auto custom-scroll pr-2">
                <div class="p-3 bg-slate-800/40 rounded border border-slate-700 hover:border-cyan-500/50 hover:bg-slate-800/60 transition cursor-pointer group">
                    <div class="flex justify-between items-center mb-1">
                        <span class="font-bold text-sm text-white group-hover:text-cyan-400 transition-colors">Adam-v23.5-Instruct</span>
                        <span class="text-[10px] bg-cyan-500/10 border border-cyan-500/20 text-cyan-400 px-1.5 py-0.5 rounded">PROD</span>
                    </div>
                    <div class="text-xs text-slate-400 mb-2 truncate">Fine-tuned on artisanal_data_snc_v2.jsonl</div>
                    <div class="flex gap-3 text-[10px] mono text-slate-500">
                        <span><i class="fas fa-tag mr-1"></i>Llama-3-70B</span>
                        <span><i class="fas fa-database mr-1"></i>4.2GB</span>
                    </div>
                </div>

                <div class="p-3 bg-slate-800/40 rounded border border-slate-700 hover:border-purple-500/50 hover:bg-slate-800/60 transition cursor-pointer group relative overflow-hidden">
                    <div class="absolute top-0 right-0 w-1 h-full bg-purple-500/50"></div>
                    <div class="flex justify-between items-center mb-1">
                        <span class="font-bold text-sm text-white group-hover:text-purple-400 transition-colors">Adam-v24-Reasoning</span>
                        <span class="text-[10px] bg-purple-500/10 border border-purple-500/20 text-purple-400 px-1.5 py-0.5 rounded animate-pulse">TRAINING</span>
                    </div>
                    <div class="text-xs text-slate-400 mb-2">Reinforcement Learning from AI Feedback (RLAIF)</div>
                    <div class="flex gap-3 text-[10px] mono text-slate-500">
                        <span><i class="fas fa-tag mr-1"></i>Qwen-2.5</span>
                        <span><i class="fas fa-microchip mr-1"></i>H100 x8</span>
                    </div>
                </div>

                <div class="p-3 bg-slate-800/40 rounded border border-slate-700 hover:border-emerald-500/50 transition cursor-pointer group opacity-75 hover:opacity-100">
                    <div class="flex justify-between items-center mb-1">
                        <span class="font-bold text-sm text-white group-hover:text-emerald-400 transition-colors">Adam-Quant-LoRA-v1</span>
                        <span class="text-[10px] bg-slate-700 text-slate-400 px-1.5 py-0.5 rounded">ARCHIVED</span>
                    </div>
                    <div class="text-xs text-slate-400 mb-2">Specialized adapter for quantitative extraction.</div>
                </div>
            </div>

            <button class="mt-4 w-full py-2.5 bg-cyan-900/20 hover:bg-cyan-900/40 border border-cyan-800 text-cyan-400 hover:text-white text-xs font-bold rounded uppercase transition flex items-center justify-center gap-2 group">
                <i class="fas fa-rocket group-hover:-translate-y-0.5 transition-transform"></i> Deploy to Staging
            </button>
        </div>

        <div class="col-span-12 lg:col-span-6 glass-panel p-6">
             <h3 class="text-slate-400 text-xs uppercase font-bold tracking-wider mb-4 border-b border-slate-700/50 pb-2">
                <i class="fas fa-database mr-2"></i> Artisanal Datasets
             </h3>
             <div class="overflow-x-auto">
                 <table class="w-full text-left text-xs text-slate-400">
                     <thead>
                         <tr class="text-slate-500 border-b border-slate-700/50">
                             <th class="pb-2 font-mono font-normal">FILENAME</th>
                             <th class="pb-2 font-mono font-normal">TYPE</th>
                             <th class="pb-2 font-mono font-normal">SAMPLES</th>
                             <th class="pb-2 font-mono font-normal text-right">STATUS</th>
                         </tr>
                     </thead>
                     <tbody id="dataset-table-body" class="divide-y divide-slate-800/50">
                         <!-- Injected by JS -->
                         <tr class="hover:bg-slate-800/30 transition group">
                             <td colspan="4" class="py-4 text-center text-slate-600">Loading datasets...</td>
                         </tr>
                     </tbody>
                 </table>
             </div>
        </div>

        <div class="col-span-12 lg:col-span-6 glass-panel p-6">
             <h3 class="text-slate-400 text-xs uppercase font-bold tracking-wider mb-4 border-b border-slate-700/50 pb-2">
                <i class="fas fa-server mr-2"></i> Cluster Telemetry
             </h3>
             <div class="grid grid-cols-2 gap-4">
                 
                 <div class="bg-slate-800/40 p-3 rounded border border-slate-700/50">
                     <div class="text-slate-500 text-[10px] uppercase mb-1 flex justify-between">
                        <span>GPU Util (Avg)</span>
                        <i class="fas fa-microchip text-emerald-500"></i>
                     </div>
                     <div class="flex items-end gap-2">
                         <span id="gpu-util-val" class="text-2xl font-mono text-white font-bold">94%</span>
                         <span class="text-xs text-emerald-400 mb-1"><i class="fas fa-arrow-up"></i> High</span>
                     </div>
                     <div class="w-full bg-slate-700/50 h-1.5 mt-2 rounded-full overflow-hidden">
                         <div id="gpu-util-bar" class="bg-emerald-500 h-full w-[94%] transition-all duration-500"></div>
                     </div>
                 </div>

                 <div class="bg-slate-800/40 p-3 rounded border border-slate-700/50">
                     <div class="text-slate-500 text-[10px] uppercase mb-1 flex justify-between">
                        <span>VRAM Load</span>
                        <i class="fas fa-memory text-purple-500"></i>
                     </div>
                     <div class="flex items-end gap-2">
                         <span class="text-2xl font-mono text-white font-bold">68GB</span>
                         <span class="text-xs text-slate-400 mb-1">/ 80GB</span>
                     </div>
                     <div class="w-full bg-slate-700/50 h-1.5 mt-2 rounded-full overflow-hidden">
                         <div class="bg-purple-500 h-full w-[85%]"></div>
                     </div>
                 </div>

                 <div class="bg-slate-800/40 p-3 rounded border border-slate-700/50">
                     <div class="text-slate-500 text-[10px] uppercase mb-1 flex justify-between">
                        <span>Core Temp</span>
                        <i class="fas fa-thermometer-half text-blue-500"></i>
                     </div>
                     <div class="flex items-end gap-2">
                         <span class="text-2xl font-mono text-white font-bold">72Â°C</span>
                         <span class="text-xs text-emerald-400 mb-1">Optimal</span>
                     </div>
                 </div>

                 <div class="bg-slate-800/40 p-3 rounded border border-slate-700/50">
                     <div class="text-slate-500 text-[10px] uppercase mb-1 flex justify-between">
                        <span>Power Draw</span>
                        <i class="fas fa-bolt text-amber-500"></i>
                     </div>
                     <div class="flex items-end gap-2">
                         <span id="power-val" class="text-2xl font-mono text-white font-bold">2.4kW</span>
                         <span class="text-xs text-amber-400 mb-1">Peak</span>
                     </div>
                 </div>
            </div>
        </div>

    </main>

    <script src="js/mock_data.js"></script>
    <script src="js/nav.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            initChart();
            startTelemetrySimulation();
            loadDatasets();
        });

        function loadDatasets() {
            const tbody = document.getElementById('dataset-table-body');

            if (window.MOCK_DATA && window.MOCK_DATA.training_sets && window.MOCK_DATA.training_sets.length > 0) {
                tbody.innerHTML = '';

                // Sort by samples desc
                const sets = window.MOCK_DATA.training_sets.sort((a,b) => (b.samples || 0) - (a.samples || 0));

                sets.forEach(ds => {
                    const tr = document.createElement('tr');
                    tr.className = "hover:bg-slate-800/30 transition group";

                    let icon = "far fa-file-alt";
                    if(ds.filename.includes("snc")) icon = "far fa-file-code";
                    if(ds.filename.includes("csv")) icon = "fas fa-file-csv";

                    let statusHtml = `<span class="w-1.5 h-1.5 bg-emerald-500 rounded-full inline-block mr-1"></span>Ready`;
                    if(ds.filename.includes("synthetic")) statusHtml = `<span class="w-1.5 h-1.5 bg-amber-500 rounded-full inline-block mr-1 animate-pulse"></span>Processing`;

                    tr.innerHTML = `
                         <td class="py-2.5 text-white group-hover:text-cyan-400 transition-colors"><i class="${icon} mr-2 opacity-50"></i>${ds.filename}</td>
                         <td class="py-2.5">${ds.type || 'Unknown'}</td>
                         <td class="py-2.5 font-mono">${(ds.samples || 0).toLocaleString()}</td>
                         <td class="py-2.5 text-right text-emerald-400">${statusHtml}</td>
                    `;
                    tbody.appendChild(tr);
                });
            } else {
                 tbody.innerHTML = `
                     <tr class="hover:bg-slate-800/30 transition group">
                         <td colspan="4" class="py-4 text-center text-slate-600">No training sets found in repository.</td>
                     </tr>`;
            }
        }

        function initChart() {
            const ctx = document.getElementById('lossChart').getContext('2d');

            // Generate mock training curve
            const labels = Array.from({length: 42}, (_, i) => i + 1);
            const data = labels.map(i => 2.5 * Math.exp(-0.05 * i) + Math.random() * 0.1);

            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Training Loss',
                        data: data,
                        borderColor: '#06b6d4', // cyan-500
                        backgroundColor: 'rgba(6, 182, 212, 0.1)',
                        borderWidth: 2,
                        tension: 0.4,
                        fill: true,
                        pointRadius: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        x: { display: false },
                        y: {
                            display: true,
                            grid: { color: 'rgba(51, 65, 85, 0.3)' },
                            ticks: { color: '#64748b', font: { family: 'Courier New' } }
                        }
                    },
                    animation: {
                        x: { type: 'number', easing: 'linear', duration: delay, from: NaN, delay(ctx) {
                            if (ctx.type !== 'data' || ctx.xStarted) { return 0; }
                            ctx.xStarted = true;
                            return ctx.index * 20;
                        }}
                    }
                }
            });
        }

        function delay(ctx) {
            return ctx.index * 10;
        }

        function startTelemetrySimulation() {
            const gpuUtilEl = document.getElementById('gpu-util-val');
            const gpuBarEl = document.getElementById('gpu-util-bar');
            const powerEl = document.getElementById('power-val');

            setInterval(() => {
                const util = 85 + Math.floor(Math.random() * 15);
                gpuUtilEl.innerText = util + "%";
                gpuBarEl.style.width = util + "%";

                const power = (2.0 + Math.random() * 0.5).toFixed(1);
                powerEl.innerText = power + "kW";
            }, 2000);
        }
    </script>
<script src="js/command_palette.js"></script></body>
</html>
