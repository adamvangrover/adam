<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OMEGA Dream Cycle</title>
    <style>
        body {
            background-color: #050010;
            color: #d0b0ff;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-image: radial-gradient(circle at 50% 30%, #220044 0%, #050010 70%);
            min-height: 100vh;
        }
        h1 {
            text-align: center;
            font-weight: 300;
            letter-spacing: 8px;
            text-transform: uppercase;
            border-bottom: 1px solid #440088;
            padding-bottom: 20px;
            margin-bottom: 40px;
            text-shadow: 0 0 10px #8800ff;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
        }
        .dream-card {
            background: rgba(20, 0, 40, 0.6);
            border: 1px solid #440088;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .dream-card:hover {
            background: rgba(40, 0, 80, 0.8);
            border-color: #aa00ff;
            transform: scale(1.01);
            box-shadow: 0 0 20px rgba(170, 0, 255, 0.2);
        }
        .scenario {
            font-size: 1.1em;
            font-weight: bold;
            color: #fff;
        }
        .outcome {
            font-weight: bold;
            padding: 5px 10px;
            border-radius: 4px;
            text-transform: uppercase;
            font-size: 0.8em;
            width: 100px;
            text-align: center;
        }
        .survived {
            background: rgba(0, 255, 100, 0.2);
            color: #00ff66;
            border: 1px solid #00ff66;
        }
        .liquidated {
            background: rgba(255, 0, 50, 0.2);
            color: #ff3333;
            border: 1px solid #ff3333;
        }
        .details {
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid #440088;
            font-size: 0.9em;
            color: #ccc;
            display: none;
            width: 100%;
        }
        .details.visible {
            display: block;
        }
        .meta {
            font-size: 0.8em;
            color: #8866aa;
            margin-bottom: 5px;
        }
        .strategy {
            color: #aaddff;
        }
        .learning {
            color: #ffcc00;
            font-style: italic;
            margin-top: 5px;
        }
    </style>
</head>
<body>
    <h1>Nocturnal Adversarial Simulation</h1>

    <div class="container" id="dream-log">
        <div style="text-align:center; opacity:0.7;">Accessing Subconscious...</div>
    </div>

    <script>
        async function loadDreams() {
            try {
                const response = await fetch('data/dream_journal.json');
                const dreams = await response.json();
                renderDreams(dreams);
            } catch (e) {
                console.error(e);
                document.getElementById('dream-log').innerHTML = `<div style="text-align:center; color:red;">Connection to Subconscious Lost</div>`;
            }
        }

        function renderDreams(dreams) {
            const container = document.getElementById('dream-log');
            container.innerHTML = '';

            dreams.forEach(dream => {
                const card = document.createElement('div');
                card.className = 'dream-card';
                card.style.flexWrap = 'wrap';

                const outcomeClass = dream.outcome.toLowerCase() === 'survived' ? 'survived' : 'liquidated';

                const header = `
                    <div style="flex:1;">
                        <div class="meta">${new Date(dream.timestamp * 1000).toLocaleString()}</div>
                        <div class="scenario">${dream.scenario}</div>
                    </div>
                    <div class="outcome ${outcomeClass}">${dream.outcome}</div>
                `;

                const details = `
                    <div class="details">
                        <div><strong>Strategy:</strong> <span class="strategy">${dream.strategy}</span></div>
                        <div><strong>PnL Impact:</strong> ${dream.pnl}</div>
                        <div class="learning">" ${dream.learning_point} "</div>
                    </div>
                `;

                card.innerHTML = header + details;

                card.addEventListener('click', () => {
                    const detailEl = card.querySelector('.details');
                    detailEl.classList.toggle('visible');
                });

                container.appendChild(card);
            });
        }

        loadDreams();
    </script>
</body>
</html>
