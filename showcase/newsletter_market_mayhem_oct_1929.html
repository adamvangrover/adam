<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADAM v23.5 :: MARKET MAYHEM: BLACK TUESDAY</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/market_mayhem_tiers.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@300;400;600;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/nav.js" defer></script>
</head>
<body class="tier-high">

    <!-- System 2 Verification Overlay -->
    <div id="system2-overlay" class="system2-overlay">
        <div class="system2-terminal">
            <div id="sys2-content"></div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="cyber-toast-container"></div>

    <!-- Raw Source Modal -->
    <div id="raw-source-modal" class="raw-source-modal">
        <div class="raw-source-header">
            <span>SOURCE_DATA.JSON</span>
            <span style="cursor:pointer; color:#cc0000;" onclick="toggleSource()">[CLOSE]</span>
        </div>
        <div class="raw-source-content" id="raw-source-content"></div>
    </div>

    <!-- Virtual Toolbar for High Tier -->
    <div class="doc-toolbar" style="display: flex;">
        <div class="toolbar-item" onclick="window.location.href='market_mayhem_archive.html'"><strong>FILE</strong></div>
        <div class="toolbar-item" onclick="showToast('EDIT MODE: READ ONLY (ARCHIVED)')">EDIT</div>
        <div class="toolbar-item" onclick="toggleTheme()">VIEW</div>
        <div class="toolbar-item" onclick="showToast('INSERT: PERMISSION DENIED')">INSERT</div>
        <div class="toolbar-item" onclick="showToast('FORMAT: LOCKED')">FORMAT</div>
        <div class="toolbar-item" onclick="runVerification()" style="color: #0078d7;"><strong>VERIFY</strong></div>
        <div style="flex-grow:1;"></div>
        <div class="toolbar-item" style="color:#666;">ADAM_V26_EDITOR</div>
    </div>

    <div style="max-width: 1400px; margin: 0 auto; padding: 10px 20px; display:flex; justify-content:space-between; align-items:center; display: none;">
        <a href="market_mayhem_archive.html" class="cyber-btn">&larr; RETURN TO ARCHIVE</a>
        <div style="font-family:'JetBrains Mono'; font-size:0.7rem; color:#666;">SECURE CONNECTION ESTABLISHED</div>
    </div>

    <div class="newsletter-wrapper">
        <div class="paper-sheet" id="paper-sheet">

            <!-- High Tier Header UI -->
            <div class="doc-header-ui" style="display: flex;">
                <span id="verification-status">CONFIDENTIAL // SYSTEM 2 REVIEW</span>
                <span>570585a4</span>
            </div>

            <div style="display:flex; justify-content:space-between; font-family:'JetBrains Mono'; font-size:0.8rem; color:#666; margin-bottom:20px; margin-top: 20px;">
                <span>1929-10-29</span>
                <span>ID: 570585a4</span>
            </div>

            <h1 class="title">MARKET MAYHEM: BLACK TUESDAY</h1>

            <!-- Metadata Panel for High Tier (Embedded in Doc) -->
            <div class="doc-metadata-panel" style="display: grid;">
                <div class="doc-metadata-item"><strong>Classification</strong>UNCLASSIFIED</div>
                <div class="doc-metadata-item"><strong>Conviction</strong>50/100</div>
                <div class="doc-metadata-item"><strong>Sentiment</strong>70/100</div>
                <div class="doc-metadata-item"><strong>Reviewer</strong>Overseer</div>
            </div>

            <div class="doc-tags" style="display: grid; margin-bottom: 30px; font-family: 'Segoe UI', sans-serif; font-size: 0.8rem; color: #666;">
                <strong style="margin-right: 10px;">SUBJECTS:</strong>
            </div>

            <div id="financialChartContainer" style="display:none; margin-bottom: 30px;">
                <canvas id="financialChart"></canvas>
            </div>


















<p><strong>Wall Street Lays an Egg.</strong> Panic selling reached a crescendo today. Ticker tapes ran hours late. Rumors of suicides are rampant. The Dow Jones Industrial Average has lost 12% today alone, following yesterday's 13% drop.</p>
<p><strong>Margin Calls:</strong> The crash was fueled by leverage. Brokers are liquidating positions indiscriminately as investors fail to meet margin calls. The savings of a generation have evaporated.</p>
<p><strong>The Economy:</strong> While politicians promise that 'prosperity is just around the corner', the destruction of wealth is likely to lead to a severe contraction in consumer spending and investment. The shadow of Depression looms.</p>






            <!-- Provenance Log (All Tiers) -->
            <div class="provenance-log">
                <div class="log-entry">
                    <span>> HASH_CHECK</span>
                    <span style="color:var(--terminal-green);">570585a44491d7921aa6fd275a16fd3d4d1cd8bf043e72d1b824b7a638bdae92</span>
                </div>
                <div class="log-entry">
                    <span>> SENTIMENT_SCAN</span>
                    <span>70 (DENSITY: 30)</span>
                </div>
                <div class="log-entry">
                    <span>> CONVICTION_LOCK</span>
                    <span>50%</span>
                </div>
                <div class="log-entry">
                    <span>> CRITIQUE_LOG</span>
                    <span>"Agent Overseer reviewed this intelligence. Verdict: VALIDATED. Sentiment alignment: 70/100. Cross-reference with knowledge graph completed."</span>
                </div>
            </div>

            <a href="#" class="source-jump-btn" onclick="toggleSource(); return false;" title="View Source JSON">JUMP TO SOURCE</a>

            <div style="margin-top: 40px; border-top: 1px solid #ccc; padding-top: 20px; font-style: italic; color: #666;">
                End of Transmission.
            </div>
        </div>

        <aside class="cyber-sidebar">
            <div class="sidebar-widget">
                <div class="sidebar-title">Intelligence Metadata</div>
                <div class="stat-row"><span>DATE</span> <span class="stat-val">1929-10-29</span></div>
                <div class="stat-row"><span>TYPE</span> <span class="stat-val">ID: ebaa007d</span></div>
                <div class="stat-row"><span>CLASS</span> <span class="stat-val">UNCLASSIFIED</span></div>
                <div class="stat-row"><span>PROVENANCE</span> <span class="stat-val" title="570585a44491d7921aa6fd275a16fd3d4d1cd8bf043e72d1b824b7a638bdae92">570585a4</span></div>
            </div>

            <div class="sidebar-widget">
                <div class="sidebar-title">Sentiment Analysis</div>
                <div class="stat-row"><span>SCORE</span> <span class="stat-val">70/100</span></div>
                <div class="sentiment-bar">
                    <div class="sentiment-fill" style="width: 70%;"></div>
                </div>
            </div>

            <div class="sidebar-widget">
                <div class="sidebar-title">Detected Entities</div>
                <div class="tag-cloud">

                </div>
            </div>

             <div class="sidebar-widget">
                <div class="sidebar-title">Agent Conviction</div>
                 <div class="stat-row"><span>CONFIDENCE</span> <span class="stat-val">50/100</span></div>
                 <div class="sentiment-bar">
                    <div class="sentiment-fill" style="width: 50%; background: #ffff00;"></div>
                </div>
            </div>

            <div class="sidebar-widget">
                <div class="sidebar-title">Semantic Analysis</div>
                 <div class="stat-row"><span>DENSITY</span> <span class="stat-val">30/100</span></div>
                 <div class="stat-row"><span>PROBABILITY</span> <span class="stat-val">50/100</span></div>
            </div>

             <div class="sidebar-widget" style="border-color: #555;">
                <div class="sidebar-title">Reviewer Agent Log</div>
                 <div style="font-size: 0.75rem; color: #ccc; font-style: italic;">
                    "Agent Overseer reviewed this intelligence. Verdict: VALIDATED. Sentiment alignment: 70/100. Cross-reference with knowledge graph completed."
                </div>
                <div class="stat-row" style="margin-top:10px;"><span>QUALITY SCORE</span> <span class="stat-val">100/100</span></div>
            </div>

             <div class="sidebar-widget">
                <div class="sidebar-title">Contributing Agents</div>
                 <div style="display:flex; flex-direction:column; gap:5px;">
                    <div style="font-size:0.75rem; color:#666;">System Core</div>
                </div>
            </div>
        </aside>
    </div>

    <!-- Hidden Raw Data -->
    <textarea id="hidden-raw-data" style="display:none;">{
  "title": "MARKET MAYHEM: BLACK TUESDAY",
  "date": "1929-10-29",
  "summary": "Wall Street Lays an Egg.Panic selling reached a crescendo today. Ticker tapes ran hours late. Rumors of suicides are rampant. The Dow Jones Industrial Average has lost 12% today alone, following yeste...",
  "type": "ID: ebaa007d",
  "full_body": "\n  \n\n\n\n  \n\n\n\n\n\n\n\n\n\n\n\n<p><strong>Wall Street Lays an Egg.</strong> Panic selling reached a crescendo today. Ticker tapes ran hours late. Rumors of suicides are rampant. The Dow Jones Industrial Average has lost 12% today alone, following yesterday's 13% drop.</p>\n<p><strong>Margin Calls:</strong> The crash was fueled by leverage. Brokers are liquidating positions indiscriminately as investors fail to meet margin calls. The savings of a generation have evaporated.</p>\n<p><strong>The Economy:</strong> While politicians promise that 'prosperity is just around the corner', the destruction of wealth is likely to lead to a severe contraction in consumer spending and investment. The shadow of Depression looms.</p>\n  \n\n\n\n",
  "sentiment_score": 70,
  "entities": {
    "tickers": [],
    "agents": [],
    "sovereigns": []
  },
  "provenance_hash": "570585a44491d7921aa6fd275a16fd3d4d1cd8bf043e72d1b824b7a638bdae92",
  "filename": "newsletter_market_mayhem_oct_1929.html",
  "is_sourced": true,
  "metrics_json": "{}",
  "source_priority": 2,
  "conviction": 50,
  "semantic_score": 30,
  "probability": 50,
  "critique": "Agent Overseer reviewed this intelligence. Verdict: VALIDATED. Sentiment alignment: 70/100. Cross-reference with knowledge graph completed."
}</textarea>

    <script>
        // --- INTERACTION LOGIC ---

        function showToast(msg) {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            toast.className = 'cyber-toast';
            toast.innerText = '> ' + msg;
            container.appendChild(toast);
            setTimeout(() => {
                toast.style.opacity = '0';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            const isDark = document.body.classList.contains('dark-mode');
            showToast('THEME: ' + (isDark ? 'DARK_MODE' : 'LIGHT_MODE'));
        }

        function toggleSource() {
            const modal = document.getElementById('raw-source-modal');
            const content = document.getElementById('raw-source-content');
            const rawData = document.getElementById('hidden-raw-data').value;

            if (modal.style.display === 'flex') {
                modal.style.display = 'none';
            } else {
                content.innerText = rawData || "NO SOURCE DATA AVAILABLE.";
                modal.style.display = 'flex';
            }
        }

        function runVerification() {
            const overlay = document.getElementById('system2-overlay');
            const content = document.getElementById('sys2-content');
            const status = document.getElementById('verification-status');

            overlay.style.display = 'flex';
            content.innerHTML = '';

            const lines = [
                "INITIATING SYSTEM 2 PROTOCOL...",
                "VERIFYING CRYPTOGRAPHIC SIGNATURE...",
                "HASH: 570585a44491d7921aa6fd275a16fd3d4d1cd8bf043e72d1b824b7a638bdae92",
                "CHECKING CHAIN OF CUSTODY...",
                "ANALYZING SENTIMENT VECTORS...",
                "CROSS-REFERENCING KNOWLEDGE GRAPH...",
                "VERIFICATION COMPLETE."
            ];

            let i = 0;
            function addLine() {
                if (i < lines.length) {
                    const div = document.createElement('div');
                    div.className = 'system2-line';
                    div.innerText = '> ' + lines[i];
                    div.style.opacity = 1;
                    content.appendChild(div);
                    i++;
                    setTimeout(addLine, 400);
                } else {
                    setTimeout(() => {
                        overlay.style.display = 'none';
                        showToast('DOCUMENT VERIFIED');
                        if(status) status.innerText = "VERIFIED // AUTHENTICATED";
                        if(status) status.style.color = "#aaffaa";
                    }, 1000);
                }
            }
            addLine();
        }

        // Chart Injection Logic
        const metricsData = {};

        if (metricsData && Object.keys(metricsData).length > 0) {
            const ctx = document.getElementById('financialChart');
            const container = document.getElementById('financialChartContainer');

            // Basic parsing of metrics structure (assuming flat or Year->Val)
            let labels = [];
            let values = [];
            let labelName = "Metric";

            // Try to find a timeseries
            for (const [key, val] of Object.entries(metricsData)) {
                if (typeof val === 'object') {
                    // Likely year -> value
                    labels = Object.keys(val);
                    values = Object.values(val).map(v => parseFloat(v.replace(/[^0-9.-]/g, '')));
                    labelName = key;
                    break;
                }
            }

            if (labels.length > 0) {
                container.style.display = 'block';
                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: labelName,
                            data: values,
                            backgroundColor: 'rgba(204, 0, 0, 0.5)',
                            borderColor: '#cc0000',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: { legend: { display: true } }
                    }
                });
            }
        }
    </script>
</body>
</html>
