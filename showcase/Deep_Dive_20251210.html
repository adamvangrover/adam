<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADAM v23.5 :: ðŸ¤¿ Deep Dive Report: December 10, 2025</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/market_mayhem_tiers.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Inter:wght@300;400;600;700&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="js/nav.js" defer></script>
    <script src="js/market_mayhem_viewer.js" defer></script>
</head>
<body class="tier-high">

    <!-- System 2 Verification Overlay -->
    <div id="system2-overlay" class="system2-overlay">
        <div class="system2-terminal">
            <div id="sys2-content"></div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="cyber-toast-container"></div>

    <!-- Raw Source Modal -->
    <div id="raw-source-modal" class="raw-source-modal">
        <div class="raw-source-header">
            <span>SOURCE_DATA.JSON</span>
            <span style="cursor:pointer; color:#cc0000;" onclick="toggleSource()">[CLOSE]</span>
        </div>
        <div class="raw-source-content" id="raw-source-content"></div>
    </div>

    <!-- Virtual Toolbar for High Tier -->
    <div class="doc-toolbar" style="display: flex;">
        <div class="toolbar-item" onclick="window.location.href='market_mayhem_archive_v24.html'"><strong>FILE</strong></div>
        <div class="toolbar-item" onclick="toggleRedactionMode()">REDACT</div>
        <div class="toolbar-item" onclick="printReport()">PRINT</div>
        <div class="toolbar-item" onclick="shareReport()">SHARE</div>
        <div class="toolbar-item" onclick="downloadReport()">DOWNLOAD</div>
        <div class="toolbar-item" onclick="toggleTheme()">VIEW</div>
        <div class="toolbar-item" onclick="showToast('INSERT: PERMISSION DENIED')">INSERT</div>
        <div class="toolbar-item" onclick="showToast('FORMAT: LOCKED')">FORMAT</div>
        <div class="toolbar-item" onclick="runVerification()" style="color: #0078d7;"><strong>VERIFY</strong></div>
        <div style="flex-grow:1;"></div>
        <div class="toolbar-item" style="color:#666;">ADAM_V26_EDITOR</div>
    </div>

    <div style="max-width: 1400px; margin: 0 auto; padding: 10px 20px; display:flex; justify-content:space-between; align-items:center; display: none;">
        <a href="market_mayhem_archive_v24.html" class="cyber-btn">&larr; RETURN TO ARCHIVE</a>
        <div style="font-family:'JetBrains Mono'; font-size:0.7rem; color:#666;">SECURE CONNECTION ESTABLISHED</div>
    </div>

    <div class="newsletter-wrapper">
        <div class="paper-sheet" id="paper-sheet">

            <!-- Top Secret Stamp -->
            <div id="top-secret-stamp" class="top-secret-stamp">TOP SECRET</div>

            <!-- High Tier Header UI -->
            <div class="doc-header-ui" style="display: flex;">
                <span id="verification-status">CONFIDENTIAL // SYSTEM 2 REVIEW</span>
                <span>b3d600bf</span>
            </div>

            <div style="display:flex; justify-content:space-between; font-family:'JetBrains Mono'; font-size:0.8rem; color:#666; margin-bottom:20px; margin-top: 20px;">
                <span>2025-12-10</span>
                <span>ID: b3d600bf</span>
            </div>

            <h1 class="title">ðŸ¤¿ Deep Dive Report: December 10, 2025</h1>

            <!-- Metadata Panel for High Tier (Embedded in Doc) -->
            <div class="doc-metadata-panel" style="display: grid;">
                <div class="doc-metadata-item"><strong>Classification</strong>UNCLASSIFIED</div>
                <div class="doc-metadata-item"><strong>Conviction</strong>0/100</div>
                <div class="doc-metadata-item"><strong>Sentiment</strong>0/100</div>
                <div class="doc-metadata-item"><strong>Reviewer</strong>Overseer</div>
            </div>

            <div id="financialChartContainer" style="display:none; margin-bottom: 30px;">
                <canvas id="financialChart"></canvas>
            </div>

            <!-- Crisis Simulator (High Tier Only) -->
            <div id="crisisSimContainer" style="display:none; margin-bottom: 30px; border: 1px solid #cc0000; padding: 20px; background: rgba(50, 0, 0, 0.2);">
                <h3 style="color: #cc0000; margin-top: 0; font-family: 'JetBrains Mono'; border-bottom: 1px solid #cc0000; padding-bottom: 10px; margin-bottom: 20px;">CRISIS SIMULATOR // STRESS TEST</h3>

                <div style="display:grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-bottom: 20px;">
                    <div class="crisis-btn" onclick="renderCrisis('2008_LEHMAN')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2008 LEHMAN
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('1987_BLACK_MONDAY')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        1987 BLACK MON
                    </div>
                    <div class="crisis-btn" onclick="renderCrisis('2020_COVID')" style="cursor:pointer; text-align:center; padding: 10px; border: 1px solid #666; font-size: 0.8rem; color: #ccc;">
                        2020 PANDEMIC
                    </div>
                </div>

                <div style="height: 300px; position: relative;">
                    <canvas id="crisisChart"></canvas>
                </div>
                <div style="font-size: 0.7rem; color: #888; margin-top: 15px; font-style: italic;">
                    * Hypothetical performance based on portfolio beta and current risk profile. PAST PERFORMANCE IS NOT INDICATIVE OF FUTURE RESULTS.
                </div>
            </div>

            <div id="document-body">
                <strong>Target Analysis</strong>
<h2>1. Financial Overview</h2>
<p>(Data derived from HDKG Snapshots)</p>
<h3>AAPL</h3>
<ul>
<li>  <strong>Current Price:</strong> $277.18</li>
<li>  <strong>Valuation (P/E):</strong> 37.2x</li>
<li>  <strong>Market Cap:</strong> $4,113,459,052,544</li>
</ul>
<h3>AMZN</h3>
<ul>
<li>  <strong>Current Price:</strong> $227.92</li>
<li>  <strong>Valuation (P/E):</strong> 32.2x</li>
<li>  <strong>Market Cap:</strong> $2,436,513,923,072</li>
</ul>
<h3>GOOGL</h3>
<ul>
<li>  <strong>Current Price:</strong> $317.08</li>
<li>  <strong>Valuation (P/E):</strong> 31.3x</li>
<li>  <strong>Market Cap:</strong> $3,840,511,311,872</li>
</ul>
<h3>META</h3>
<ul>
<li>  <strong>Current Price:</strong> $656.96</li>
<li>  <strong>Valuation (P/E):</strong> 29.1x</li>
<li>  <strong>Market Cap:</strong> $1,655,885,922,304</li>
</ul>
<h3>MSFT</h3>
<ul>
<li>  <strong>Current Price:</strong> $492.02</li>
<li>  <strong>Valuation (P/E):</strong> 35.0x</li>
<li>  <strong>Market Cap:</strong> $3,657,266,364,416</li>
</ul>
<h3>NVDA</h3>
<ul>
<li>  <strong>Current Price:</strong> $184.97</li>
<li>  <strong>Valuation (P/E):</strong> 45.9x</li>
<li>  <strong>Market Cap:</strong> $4,503,464,574,976</li>
</ul>
<h3>TSLA</h3>
<ul>
<li>  <strong>Current Price:</strong> $445.17</li>
<li>  <strong>Valuation (P/E):</strong> 307.0x</li>
<li>  <strong>Market Cap:</strong> $1,480,554,971,136</li>
</ul>
<h2>2. Qualitative Factors (News)</h2>
<strong>AAPL Sentiment Drivers:</strong>
<ul>
<li>What Trump's Nvidia China sales approval means for the Mag 7 (Yahoo Finance Video)</li>
</ul>
<ul>
<li>Disney nominates former Apple COO to its board (Reuters)</li>
</ul>
<ul>
<li>Apple Stock Gets Three Price-Target Hikes. Here's Why. (Investor's Business Daily)</li>
</ul>
<br>
<strong>NVDA Sentiment Drivers:</strong>
<ul>
<li>OpenAI CEO joins Jimmy Fallon following Nvidia CEO's Joe Rogan chat (Yahoo Finance Video)</li>
</ul>
<ul>
<li>Trump tariffs live updates: Trump floats 'some' additional tariff carveouts; US unveils $12B farmer bailout (Yahoo Finance)</li>
</ul>
<ul>
<li>How Nvidia selling in China helps 'propel the market forward' (Yahoo Finance Video)</li>
</ul>
<br>
<strong>TSLA Sentiment Drivers:</strong>
<ul>
<li>Stock market today: Dow, S&P 500, Nasdaq futures waver with Fed rate decision on deck (Yahoo Finance)</li>
</ul>
<ul>
<li>How Mag 7's lead over other stocks could shrink in 2026 (Yahoo Finance Video)</li>
</ul>
<ul>
<li>Dow Jones Futures: GE Vernova Jumps Late; Fed Decision Looms (Investor's Business Daily)</li>
</ul>
<br>
<strong>MSFT Sentiment Drivers:</strong>
<ul>
<li>What Trump's Nvidia China sales approval means for the Mag 7 (Yahoo Finance Video)</li>
</ul>
<ul>
<li>Trump approves Nvidia H200 chips for sale to China (Yahoo Finance)</li>
</ul>
<ul>
<li>2 Things Every Iren Investor Needs to know (Motley Fool)</li>
</ul>
<br>
<strong>GOOGL Sentiment Drivers:</strong>
<ul>
<li>Stock market today: Dow, S&P 500, Nasdaq futures waver with Fed rate decision on deck (Yahoo Finance)</li>
</ul>
<ul>
<li>Tesla unsupervised FSD milestone 'very close,' Piper Sandler says (Yahoo Finance)</li>
</ul>
<ul>
<li>Trump approves Nvidia H200 chips for sale to China (Yahoo Finance)</li>
</ul>
<br>
<strong>AMZN Sentiment Drivers:</strong>
<ul>
<li>Oracle set to report earnings as Wall Street looks for cracks in the AI bubble (Yahoo Finance)</li>
</ul>
<ul>
<li>Trump approves Nvidia H200 chips for sale to China (Yahoo Finance)</li>
</ul>
<ul>
<li>Dave Ramsey Reacts To A Father Trying To Bribe His Son For Control Of A $300K Trust. 'What Planet Does He Live On?' (Benzinga)</li>
</ul>
<br>
<strong>META Sentiment Drivers:</strong>
<ul>
<li>Slack's CEO is joining OpenAI to find the money to pay for all those data centers (Engadget)</li>
</ul>
<ul>
<li>How Mag 7's lead over other stocks could shrink in 2026 (Yahoo Finance Video)</li>
</ul>
<ul>
<li>Trump approves Nvidia H200 chips for sale to China (Yahoo Finance)</li>
</ul>
<br>
<h2>3. Strategic Verdict</h2>
<ul>
<li>  <strong>Conviction:</strong> HOLD/ACCUMULATE (Automated Assessment)</li>
<li>  <strong>Risk Factors:</strong> High valuation multiples, Regulatory scrutiny.</li>
</ul>
<p>---
<em>Generated by Adam v23.5</em></p>

            </div>

            <!-- Provenance Log (All Tiers) -->
            <div class="provenance-log">
                <div class="log-entry">
                    <span>> HASH_CHECK</span>
                    <span style="color:var(--terminal-green);">b3d600bf06c87a70ba6473c3f2e8193bef2aaea595706080d34c64fa2a3a3c3a</span>
                </div>
                <div class="log-entry">
                    <span>> SENTIMENT_SCAN</span>
                    <span>0 (DENSITY: 51)</span>
                </div>
                <div class="log-entry">
                    <span>> CONVICTION_LOCK</span>
                    <span>0%</span>
                </div>
                <div class="log-entry">
                    <span>> CRITIQUE_LOG</span>
                    <span>"Agent Overseer reviewed this intelligence. Verdict: VALIDATED. Sentiment alignment: 0/100. Cross-reference with knowledge graph completed."</span>
                </div>
            </div>

            <a href="#" class="source-jump-btn" onclick="toggleSource(); return false;" title="View Source JSON">JUMP TO SOURCE</a>

            <div style="margin-top: 40px; border-top: 1px solid #ccc; padding-top: 20px; font-style: italic; color: #666;">
                End of Transmission.
            </div>
        </div>

        <aside class="cyber-sidebar">
            <div class="sidebar-widget">
                <div class="sidebar-title">Intelligence Metadata</div>
                <div class="stat-row"><span>DATE</span> <span class="stat-val">2025-12-10</span></div>
                <div class="stat-row"><span>TYPE</span> <span class="stat-val">DEEP_DIVE</span></div>
                <div class="stat-row"><span>CLASS</span> <span class="stat-val">UNCLASSIFIED</span></div>
                <div class="stat-row"><span>PROVENANCE</span> <span class="stat-val" title="b3d600bf06c87a70ba6473c3f2e8193bef2aaea595706080d34c64fa2a3a3c3a">b3d600bf</span></div>
            </div>

            <div class="sidebar-widget">
                <div class="sidebar-title">Sentiment Analysis</div>
                <div class="stat-row"><span>SCORE</span> <span class="stat-val">0/100</span></div>
                <div class="sentiment-bar">
                    <div class="sentiment-fill" style="width: 0%;"></div>
                </div>
            </div>

            <div class="sidebar-widget">
                <div class="sidebar-title">Detected Entities</div>
                <div class="tag-cloud">
                    <a href="market_mayhem_archive_v24.html?search=CN_PBOC" class="tag" style="text-decoration:none;">CN_PBOC</a><a href="market_mayhem_archive_v24.html?search=US_FED" class="tag" style="text-decoration:none;">US_FED</a><a href="market_mayhem_archive_v24.html?search=AI" class="tag" style="text-decoration:none; border-color:#666;">AI</a><a href="market_mayhem_archive_v24.html?search=EV" class="tag" style="text-decoration:none; border-color:#666;">EV</a>
                </div>
            </div>

             <div class="sidebar-widget">
                <div class="sidebar-title">Agent Conviction</div>
                 <div class="stat-row"><span>CONFIDENCE</span> <span class="stat-val">0/100</span></div>
                 <div class="sentiment-bar">
                    <div class="sentiment-fill" style="width: 0%; background: #ff0000;"></div>
                </div>
            </div>

            <div class="sidebar-widget">
                <div class="sidebar-title">Semantic Analysis</div>
                 <div class="stat-row"><span>DENSITY</span> <span class="stat-val">51/100</span></div>
                 <div class="stat-row"><span>PROBABILITY</span> <span class="stat-val">0/100</span></div>
            </div>

             <div class="sidebar-widget" style="border-color: #555;">
                <div class="sidebar-title">Reviewer Agent Log</div>
                 <div style="font-size: 0.75rem; color: #ccc; font-style: italic;">
                    "Agent Overseer reviewed this intelligence. Verdict: VALIDATED. Sentiment alignment: 0/100. Cross-reference with knowledge graph completed."
                </div>
                <div class="stat-row" style="margin-top:10px;"><span>QUALITY SCORE</span> <span class="stat-val">100/100</span></div>
            </div>

             <div class="sidebar-widget">
                <div class="sidebar-title">Contributing Agents</div>
                 <div style="display:flex; flex-direction:column; gap:5px;">
                    <div style="font-size:0.75rem; color:#666;">System Core</div>
                </div>
            </div>
        </aside>
    </div>

    <!-- Hidden Raw Data -->
    <textarea id="hidden-raw-data" style="display:none;">{
  "title": "\ud83e\udd3f Deep Dive Report: December 10, 2025",
  "date": "2025-12-10",
  "summary": "Market analysis and strategic insights.",
  "type": "DEEP_DIVE",
  "full_body": "<strong>Target Analysis</strong>\n<h2>1. Financial Overview</h2>\n<p>(Data derived from HDKG Snapshots)</p>\n<h3>AAPL</h3>\n<ul>\n<li>  <strong>Current Price:</strong> $277.18</li>\n<li>  <strong>Valuation (P/E):</strong> 37.2x</li>\n<li>  <strong>Market Cap:</strong> $4,113,459,052,544</li>\n</ul>\n<h3>AMZN</h3>\n<ul>\n<li>  <strong>Current Price:</strong> $227.92</li>\n<li>  <strong>Valuation (P/E):</strong> 32.2x</li>\n<li>  <strong>Market Cap:</strong> $2,436,513,923,072</li>\n</ul>\n<h3>GOOGL</h3>\n<ul>\n<li>  <strong>Current Price:</strong> $317.08</li>\n<li>  <strong>Valuation (P/E):</strong> 31.3x</li>\n<li>  <strong>Market Cap:</strong> $3,840,511,311,872</li>\n</ul>\n<h3>META</h3>\n<ul>\n<li>  <strong>Current Price:</strong> $656.96</li>\n<li>  <strong>Valuation (P/E):</strong> 29.1x</li>\n<li>  <strong>Market Cap:</strong> $1,655,885,922,304</li>\n</ul>\n<h3>MSFT</h3>\n<ul>\n<li>  <strong>Current Price:</strong> $492.02</li>\n<li>  <strong>Valuation (P/E):</strong> 35.0x</li>\n<li>  <strong>Market Cap:</strong> $3,657,266,364,416</li>\n</ul>\n<h3>NVDA</h3>\n<ul>\n<li>  <strong>Current Price:</strong> $184.97</li>\n<li>  <strong>Valuation (P/E):</strong> 45.9x</li>\n<li>  <strong>Market Cap:</strong> $4,503,464,574,976</li>\n</ul>\n<h3>TSLA</h3>\n<ul>\n<li>  <strong>Current Price:</strong> $445.17</li>\n<li>  <strong>Valuation (P/E):</strong> 307.0x</li>\n<li>  <strong>Market Cap:</strong> $1,480,554,971,136</li>\n</ul>\n<h2>2. Qualitative Factors (News)</h2>\n<strong>AAPL Sentiment Drivers:</strong>\n<ul>\n<li>What Trump's Nvidia China sales approval means for the Mag 7 (Yahoo Finance Video)</li>\n</ul>\n<ul>\n<li>Disney nominates former Apple COO to its board (Reuters)</li>\n</ul>\n<ul>\n<li>Apple Stock Gets Three Price-Target Hikes. Here's Why. (Investor's Business Daily)</li>\n</ul>\n<br>\n<strong>NVDA Sentiment Drivers:</strong>\n<ul>\n<li>OpenAI CEO joins Jimmy Fallon following Nvidia CEO's Joe Rogan chat (Yahoo Finance Video)</li>\n</ul>\n<ul>\n<li>Trump tariffs live updates: Trump floats 'some' additional tariff carveouts; US unveils $12B farmer bailout (Yahoo Finance)</li>\n</ul>\n<ul>\n<li>How Nvidia selling in China helps 'propel the market forward' (Yahoo Finance Video)</li>\n</ul>\n<br>\n<strong>TSLA Sentiment Drivers:</strong>\n<ul>\n<li>Stock market today: Dow, S&P 500, Nasdaq futures waver with Fed rate decision on deck (Yahoo Finance)</li>\n</ul>\n<ul>\n<li>How Mag 7's lead over other stocks could shrink in 2026 (Yahoo Finance Video)</li>\n</ul>\n<ul>\n<li>Dow Jones Futures: GE Vernova Jumps Late; Fed Decision Looms (Investor's Business Daily)</li>\n</ul>\n<br>\n<strong>MSFT Sentiment Drivers:</strong>\n<ul>\n<li>What Trump's Nvidia China sales approval means for the Mag 7 (Yahoo Finance Video)</li>\n</ul>\n<ul>\n<li>Trump approves Nvidia H200 chips for sale to China (Yahoo Finance)</li>\n</ul>\n<ul>\n<li>2 Things Every Iren Investor Needs to know (Motley Fool)</li>\n</ul>\n<br>\n<strong>GOOGL Sentiment Drivers:</strong>\n<ul>\n<li>Stock market today: Dow, S&P 500, Nasdaq futures waver with Fed rate decision on deck (Yahoo Finance)</li>\n</ul>\n<ul>\n<li>Tesla unsupervised FSD milestone 'very close,' Piper Sandler says (Yahoo Finance)</li>\n</ul>\n<ul>\n<li>Trump approves Nvidia H200 chips for sale to China (Yahoo Finance)</li>\n</ul>\n<br>\n<strong>AMZN Sentiment Drivers:</strong>\n<ul>\n<li>Oracle set to report earnings as Wall Street looks for cracks in the AI bubble (Yahoo Finance)</li>\n</ul>\n<ul>\n<li>Trump approves Nvidia H200 chips for sale to China (Yahoo Finance)</li>\n</ul>\n<ul>\n<li>Dave Ramsey Reacts To A Father Trying To Bribe His Son For Control Of A $300K Trust. 'What Planet Does He Live On?' (Benzinga)</li>\n</ul>\n<br>\n<strong>META Sentiment Drivers:</strong>\n<ul>\n<li>Slack's CEO is joining OpenAI to find the money to pay for all those data centers (Engadget)</li>\n</ul>\n<ul>\n<li>How Mag 7's lead over other stocks could shrink in 2026 (Yahoo Finance Video)</li>\n</ul>\n<ul>\n<li>Trump approves Nvidia H200 chips for sale to China (Yahoo Finance)</li>\n</ul>\n<br>\n<h2>3. Strategic Verdict</h2>\n<ul>\n<li>  <strong>Conviction:</strong> HOLD/ACCUMULATE (Automated Assessment)</li>\n<li>  <strong>Risk Factors:</strong> High valuation multiples, Regulatory scrutiny.</li>\n</ul>\n<p>---\n<em>Generated by Adam v23.5</em></p>\n",
  "sentiment_score": 0,
  "entities": {
    "tickers": [],
    "agents": [],
    "sovereigns": [
      "CN_PBOC",
      "US_FED"
    ],
    "keywords": [
      "AI",
      "EV"
    ]
  },
  "provenance_hash": "b3d600bf06c87a70ba6473c3f2e8193bef2aaea595706080d34c64fa2a3a3c3a",
  "filename": "Deep_Dive_20251210.html",
  "is_sourced": true,
  "metrics_json": "{}",
  "source_priority": 2,
  "conviction": 0,
  "critique": "Agent Overseer reviewed this intelligence. Verdict: VALIDATED. Sentiment alignment: 0/100. Cross-reference with knowledge graph completed.",
  "quality": 100,
  "semantic_score": 51,
  "probability": 0
}</textarea>

    <script>
        // Chart Injection Logic
        const metricsData = {};
        const crisisData = {"2008_LEHMAN": {"scenario": "2008_LEHMAN", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30], "market": [100.0, 104.2, 100.65, 101.08, 93.92, 91.77, 87.07, 81.0, 79.31, 78.45, 77.26, 81.32, 84.05, 91.37, 82.45, 81.79, 80.78, 79.28, 77.27, 76.39, 75.89, 70.23, 65.21, 58.12, 51.52, 49.58, 52.3, 50.0, 48.16, 45.73], "portfolio": [100.0, 102.92, 101.62, 98.49, 95.06, 92.91, 88.46, 85.96, 88.01, 86.86, 88.58, 88.63, 91.24, 97.87, 91.56, 90.99, 87.66, 84.24, 84.03, 85.36, 84.2, 78.88, 76.65, 70.69, 65.53, 63.48, 64.65, 63.22, 62.44, 59.27]}, "1987_BLACK_MONDAY": {"scenario": "1987_BLACK_MONDAY", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20], "market": [100.0, 108.93, 105.38, 108.42, 98.51, 97.07, 91.25, 83.09, 82.14, 64.45, 64.31, 71.12, 76.51, 88.86, 98.26, 99.65, 100.38, 100.11, 98.75, 99.62], "portfolio": [100.0, 105.76, 104.51, 102.83, 97.99, 96.26, 91.15, 87.49, 90.07, 77.84, 79.98, 82.6, 87.12, 97.33, 102.94, 103.66, 101.09, 98.11, 98.56, 101.31]}, "2020_COVID": {"scenario": "2020_COVID", "labels": [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40], "market": [100.0, 105.94, 102.57, 104.01, 96.1, 94.33, 89.38, 82.71, 81.38, 81.06, 80.32, 86.09, 90.34, 100.6, 107.83, 107.76, 107.14, 105.71, 103.45, 90.55, 90.1, 82.31, 75.5, 65.87, 57.09, 54.97, 59.03, 56.4, 54.36, 51.5, 56.95, 56.86, 58.06, 57.08, 54.41, 54.9, 53.96, 55.15, 53.77, 50.08], "portfolio": [100.0, 103.97, 102.79, 100.23, 96.43, 94.5, 89.91, 87.1, 89.43, 88.62, 90.7, 91.81, 95.38, 103.82, 107.69, 107.49, 103.98, 100.26, 100.24, 95.01, 93.82, 87.22, 84.16, 76.67, 70.16, 67.99, 70.02, 68.44, 67.62, 64.1, 69.78, 68.14, 70.5, 69.92, 69.22, 68.13, 66.79, 66.46, 65.02, 61.43]}};

        // --- Metrics Chart ---
        if (metricsData && Object.keys(metricsData).length > 0) {
            const ctx = document.getElementById('financialChart');
            const container = document.getElementById('financialChartContainer');

            // Basic parsing of metrics structure (assuming flat or Year->Val)
            let labels = [];
            let values = [];
            let labelName = "Metric";

            // Try to find a timeseries
            for (const [key, val] of Object.entries(metricsData)) {
                if (typeof val === 'object') {
                    // Likely year -> value
                    labels = Object.keys(val);
                    values = Object.values(val).map(v => parseFloat(v.replace(/[^0-9.-]/g, '')));
                    labelName = key;
                    break;
                }
            }

            if (labels.length > 0) {
                container.style.display = 'block';
                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: labelName,
                            data: values,
                            backgroundColor: 'rgba(204, 0, 0, 0.5)',
                            borderColor: '#cc0000',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { labels: { color: '#ccc' } }
                        },
                        scales: {
                            y: { grid: { color: '#333' }, ticks: { color: '#888' } },
                            x: { grid: { color: '#333' }, ticks: { color: '#888' } }
                        }
                    }
                });
            }
        }

        // --- Crisis Simulation Logic ---
        let crisisChartInstance = null;

        window.renderCrisis = function(scenarioName) {
            if (!crisisData || !crisisData[scenarioName]) return;

            // UI Feedback for Buttons
            document.querySelectorAll('.crisis-btn').forEach(btn => {
                btn.style.borderColor = btn.innerText.includes(scenarioName.split('_')[1]) ? '#cc0000' : '#666';
                btn.style.color = btn.innerText.includes(scenarioName.split('_')[1]) ? '#cc0000' : '#ccc';
            });

            const data = crisisData[scenarioName];
            const ctx = document.getElementById('crisisChart').getContext('2d');

            if (crisisChartInstance) {
                crisisChartInstance.destroy();
            }

            crisisChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: data.labels,
                    datasets: [
                        {
                            label: 'Your Portfolio (Simulated)',
                            data: data.portfolio,
                            borderColor: '#00f3ff',
                            backgroundColor: 'rgba(0, 243, 255, 0.1)',
                            borderWidth: 2,
                            tension: 0.4,
                            pointRadius: 0
                        },
                        {
                            label: 'Market Benchmark',
                            data: data.market,
                            borderColor: '#666',
                            borderDash: [5, 5],
                            borderWidth: 1,
                            pointRadius: 0,
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: {
                        mode: 'index',
                        intersect: false,
                    },
                    plugins: {
                        legend: { labels: { color: '#ccc', font: { family: 'JetBrains Mono' } } },
                        title: {
                            display: true,
                            text: 'STRESS TEST SCENARIO: ' + scenarioName.replace(/_/g, ' '),
                            color: '#cc0000',
                            font: { family: 'JetBrains Mono' }
                        },
                        tooltip: {
                            backgroundColor: 'rgba(0,0,0,0.8)',
                            titleColor: '#cc0000',
                            bodyColor: '#fff',
                            borderColor: '#333',
                            borderWidth: 1
                        }
                    },
                    scales: {
                        y: {
                            grid: { color: '#333' },
                            ticks: { color: '#888', callback: function(value) { return value + '%'; } }
                        },
                        x: {
                            grid: { color: '#333' },
                            ticks: { display: false }
                        }
                    }
                }
            });
        };

        // Auto-Run Default Crisis if Data Available
        if (crisisData && Object.keys(crisisData).length > 0) {
            document.getElementById('crisisSimContainer').style.display = 'block';
            // slight delay to ensure Chart.js loaded
            setTimeout(() => renderCrisis('2008_LEHMAN'), 100);
        }
    </script>
</body>
</html>
