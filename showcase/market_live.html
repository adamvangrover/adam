<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADAM :: MARKET LIVE</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        body {
            overflow: hidden; /* Prevent scrolling for dashboard feel */
            display: flex;
            flex-direction: column;
            height: 100vh;
        }

        .top-bar {
            height: 60px;
            background: rgba(5, 11, 20, 0.95);
            border-bottom: 1px solid var(--primary-color);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
            z-index: 100;
        }

        .main-container {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        .sidebar {
            width: 300px;
            background: rgba(5, 11, 20, 0.8);
            border-right: 1px solid var(--panel-border);
            display: flex;
            flex-direction: column;
            overflow-y: auto;
        }

        .ticker-item {
            padding: 15px;
            border-bottom: 1px solid var(--panel-border);
            cursor: pointer;
            transition: background 0.2s;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .ticker-item:hover, .ticker-item.active {
            background: rgba(6, 182, 212, 0.1);
            border-left: 3px solid var(--primary-color);
        }

        .chart-area {
            flex: 1;
            position: relative;
            background: rgba(0,0,0,0.2);
            display: flex;
            flex-direction: column;
        }

        .details-panel {
            width: 350px;
            background: rgba(5, 11, 20, 0.8);
            border-left: 1px solid var(--panel-border);
            padding: 20px;
            overflow-y: auto;
        }

        canvas {
            width: 100%;
            height: 100%;
        }

        .stat-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }

        .stat-box {
            background: rgba(255, 255, 255, 0.05);
            padding: 10px;
            border-radius: 4px;
            border: 1px solid var(--panel-border);
        }

        .stat-label {
            font-size: 0.7rem;
            color: var(--text-muted);
            text-transform: uppercase;
        }
        .stat-value {
            font-size: 1.1rem;
            color: var(--text-primary);
            font-family: var(--font-mono);
        }

        .live-badge {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
            padding: 2px 6px;
            border-radius: 2px;
            font-size: 0.7rem;
            border: 1px solid #ef4444;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="scan-line"></div>

    <header class="top-bar">
        <div style="display: flex; align-items: center; gap: 15px;">
            <h1 class="mono text-cyan-glow" style="margin: 0; font-size: 1.2rem;">MARKET LIVE <span class="live-badge">REC</span></h1>
            <div class="mono" style="font-size: 0.8rem; color: var(--text-muted);">NEURAL EXCHANGE FEED // v26.0</div>
        </div>
        <div style="display: flex; gap: 10px;">
            <a href="index.html" class="cyber-btn">EXIT TO HUB</a>
        </div>
    </header>

    <div class="main-container">
        <aside class="sidebar" id="tickerList">
            <!-- Tickers will be injected here -->
            <div style="padding:20px; text-align:center; color: var(--text-muted);">Loading Stream...</div>
        </aside>

        <main class="chart-area" id="chartContainer">
            <div style="position: absolute; top: 20px; left: 20px; z-index: 10;">
                <h2 id="chartTitle" class="mono" style="margin: 0; font-size: 2rem; color: var(--text-primary);">---</h2>
                <div id="chartPrice" class="mono" style="font-size: 1.5rem; color: var(--primary-color);">0.00</div>
            </div>
            <canvas id="marketCanvas"></canvas>
        </main>

        <aside class="details-panel" id="detailsPanel">
            <h3 class="mono text-cyan-glow" style="margin-top:0; border-bottom: 1px solid var(--primary-color); padding-bottom: 10px;">FUNDAMENTALS</h3>

            <div id="fundamentalStats" class="stat-grid">
                <!-- Stats injected here -->
            </div>

            <h3 class="mono" style="margin-top: 30px; color: var(--accent-color); border-bottom: 1px solid var(--accent-color); padding-bottom: 10px;">AI OUTLOOK</h3>
            <div id="aiOutlook" style="margin-top: 15px; font-size: 0.9rem; line-height: 1.5; color: var(--text-secondary);">
                <!-- Outlook text -->
            </div>

            <h3 class="mono" style="margin-top: 30px; color: var(--success-color); border-bottom: 1px solid var(--success-color); padding-bottom: 10px;">CREDIT RATING</h3>
            <div class="stat-box" style="margin-top: 15px; border-color: var(--success-color);">
                <div class="stat-label">Rating</div>
                <div class="stat-value" id="creditRating" style="color: var(--success-color);">---</div>
            </div>
        </aside>
    </div>

    <script>
        // --- Configuration ---
        const ANIMATION_SPEED = 50; // ms per frame

        // --- Data Embedded to avoid CORS/Fetch issues in standalone mode ---
        const MARKET_DATA = [
  {
    "ticker": "AAPL",
    "name": "Apple Inc.",
    "sector": "Technology",
    "current_price": 185.0,
    "change_pct": -0.65,
    "market_cap": "1.4T",
    "pe_ratio": 9.1,
    "dividend_yield": 1.54,
    "price_history": [
      186.05,
      186.71,
      186.1,
      189.07,
      192.5,
      189.25,
      190.05,
      187.04,
      188.35,
      189.79,
      190.53,
      192.92,
      196.2,
      198.49,
      195.26,
      196.13,
      195.22,
      195.15,
      196.73,
      194.86,
      198.73,
      202.4,
      200.21,
      199.15,
      200.16,
      197.72,
      196.0,
      193.93,
      194.02,
      191.52,
      190.34,
      192.65,
      196.21,
      198.05,
      195.98,
      192.75,
      193.75,
      194.18,
      193.01,
      191.33,
      195.06,
      197.7,
      200.98,
      204.57,
      205.5,
      203.6,
      206.15,
      208.88,
      204.78,
      202.36,
      199.29,
      196.11,
      196.8,
      193.9,
      193.37,
      192.7,
      192.56,
      193.93,
      193.38,
      194.11,
      191.42,
      193.84,
      195.43,
      196.7,
      193.33,
      189.95,
      192.37,
      193.51,
      190.57,
      191.64,
      194.54,
      191.73,
      191.94,
      191.23,
      189.33,
      186.0,
      189.14,
      188.46,
      186.03,
      187.97,
      186.64,
      188.13,
      186.82,
      183.1,
      181.24,
      178.21,
      180.78,
      179.85,
      182.72,
      184.0,
      184.53,
      186.56,
      189.64,
      188.17,
      191.24,
      193.52,
      190.5,
      188.53,
      190.81,
      192.91,
      190.27,
      187.4,
      189.84,
      188.09,
      191.04,
      190.54,
      194.1,
      191.12,
      191.44,
      188.08,
      190.29,
      188.78,
      187.61,
      187.17,
      183.92,
      180.45,
      179.69,
      183.03,
      182.96,
      181.33,
      178.58,
      177.83,
      175.74,
      176.39,
      176.36,
      175.26,
      171.78,
      168.63,
      168.38,
      169.53,
      171.51,
      172.67,
      171.31,
      172.39,
      170.36,
      173.21,
      173.04,
      173.36,
      175.96,
      178.33,
      177.21,
      177.2,
      175.56,
      174.15,
      173.15,
      169.89,
      169.47,
      172.29,
      170.86,
      171.67,
      169.3,
      167.58,
      170.03,
      172.69,
      172.29,
      173.61,
      170.78,
      172.06,
      174.77,
      173.13,
      175.28,
      174.2,
      172.2,
      175.56,
      174.27,
      176.0,
      174.92,
      171.68,
      170.29,
      172.09,
      170.38,
      168.22,
      170.66,
      170.47,
      171.71,
      170.19,
      173.09,
      175.39,
      173.82,
      171.42,
      172.37,
      169.36,
      170.28,
      172.0,
      170.36,
      169.06,
      170.31,
      169.01,
      166.44,
      169.38,
      172.69,
      169.32,
      172.37,
      171.38,
      173.85,
      170.65,
      172.11,
      173.59,
      176.0,
      178.31,
      178.19,
      180.49,
      177.76,
      180.85,
      177.94,
      178.69,
      181.01,
      179.1,
      180.6,
      177.53,
      179.64,
      181.44,
      184.32,
      182.31,
      184.42,
      182.09,
      180.11,
      182.56,
      182.23,
      185.32,
      188.38,
      189.14,
      185.93,
      187.44,
      190.12,
      190.83,
      192.86,
      190.66,
      191.01,
      194.82,
      193.34,
      194.59,
      196.2,
      193.51,
      191.6,
      189.7,
      187.25,
      190.68,
      189.21,
      191.43,
      192.54,
      194.93,
      197.08,
      197.05,
      193.48,
      189.91,
      191.4,
      188.45,
      188.1,
      184.89,
      182.66,
      185.0
    ],
    "risk_score": 92,
    "financials": {
      "years": [
        2022,
        2023,
        2024,
        2025,
        2026,
        2027
      ],
      "revenue": [
        270.0,
        295.0,
        321.4,
        350.0,
        386.7,
        422.9
      ],
      "eps": [
        8.53,
        13.86,
        20.23,
        10.81,
        17.85,
        27.79
      ],
      "ebitda": [
        54.8,
        89.0,
        130.0,
        69.5,
        114.6,
        178.5
      ],
      "consensus_revenue": [
        null,
        null,
        null,
        351.1,
        397.3,
        436.5
      ],
      "system_revenue": [
        null,
        null,
        null,
        356.5,
        409.9,
        431.5
      ]
    },
    "credit": {
      "leverage": 0.9,
      "interest_coverage": 16.4,
      "liquidity_score": 93.2,
      "rating": "AA",
      "pd_rating": "0.01% - Minimal",
      "regulatory_rating": "Pass"
    },
    "outlook": {
      "consensus": "Buy",
      "price_target": 233.3,
      "analysts": {
        "buy": 26,
        "hold": 5,
        "sell": 3
      },
      "conviction": "High",
      "rationale": "Strong fundamentals and market leadership."
    }
  },
  {
    "ticker": "MSFT",
    "name": "Microsoft Corp.",
    "sector": "Technology",
    "current_price": 405.0,
    "change_pct": 0.2,
    "market_cap": "1.1T",
    "pe_ratio": 32.0,
    "dividend_yield": 2.11,
    "price_history": [
      505.47,
      512.11,
      503.87,
      502.91,
      509.01,
      502.89,
      496.44,
      486.77,
      485.77,
      489.96,
      498.25,
      494.75,
      489.6,
      490.63,
      486.27,
      487.77,
      485.19,
      479.75,
      478.17,
      486.62,
      478.18,
      483.72,
      477.41,
      485.97,
      486.11,
      482.22,
      473.46,
      469.97,
      461.14,
      456.68,
      451.9,
      448.95,
      443.16,
      446.58,
      439.52,
      437.29,
      443.76,
      443.91,
      443.32,
      436.5,
      443.82,
      450.21,
      452.01,
      444.81,
      450.05,
      458.97,
      455.38,
      458.24,
      450.75,
      449.65,
      457.09,
      459.44,
      455.05,
      457.52,
      462.68,
      467.47,
      465.65,
      457.73,
      457.57,
      463.15,
      463.97,
      469.13,
      471.79,
      473.88,
      473.68,
      469.03,
      475.08,
      466.66,
      474.82,
      478.93,
      485.73,
      481.43,
      474.38,
      473.12,
      477.52,
      473.49,
      472.35,
      477.8,
      484.25,
      483.82,
      475.7,
      476.0,
      479.88,
      478.61,
      474.79,
      474.65,
      471.23,
      479.07,
      478.81,
      482.32,
      487.92,
      482.95,
      478.36,
      473.08,
      468.67,
      469.88,
      466.29,
      468.03,
      471.34,
      476.21,
      481.28,
      482.45,
      481.18,
      480.71,
      477.44,
      483.37,
      489.56,
      495.76,
      497.0,
      487.38,
      484.09,
      485.76,
      485.53,
      492.8,
      495.89,
      504.23,
      511.39,
      516.56,
      517.85,
      527.54,
      518.27,
      513.52,
      507.23,
      498.5,
      491.71,
      492.82,
      489.45,
      484.08,
      491.64,
      492.61,
      493.01,
      501.62,
      496.13,
      494.06,
      493.18,
      485.28,
      481.94,
      488.11,
      479.14,
      487.36,
      491.51,
      497.11,
      500.61,
      492.12,
      495.1,
      492.29,
      483.13,
      477.72,
      476.02,
      471.87,
      480.72,
      486.53,
      477.12,
      475.59,
      477.07,
      470.42,
      477.56,
      475.14,
      478.92,
      484.91,
      478.34,
      486.65,
      478.17,
      469.04,
      468.21,
      474.02,
      482.15,
      473.58,
      481.77,
      487.96,
      481.67,
      476.67,
      467.59,
      460.57,
      466.34,
      461.76,
      460.1,
      451.56,
      458.67,
      460.39,
      462.85,
      466.35,
      469.48,
      472.31,
      471.67,
      475.31,
      472.98,
      474.37,
      479.1,
      473.01,
      480.61,
      473.62,
      466.15,
      464.08,
      464.59,
      467.12,
      466.63,
      465.55,
      462.8,
      455.18,
      447.71,
      444.29,
      447.89,
      441.31,
      438.44,
      435.04,
      439.26,
      437.04,
      440.26,
      433.35,
      438.38,
      445.38,
      443.66,
      446.44,
      437.64,
      438.35,
      431.89,
      436.47,
      438.03,
      435.71,
      428.16,
      435.73,
      439.6,
      432.73,
      426.6,
      426.13,
      424.68,
      430.28,
      435.7,
      433.29,
      426.59,
      418.87,
      413.07,
      412.01,
      416.29,
      424.11,
      424.41,
      427.2,
      431.05,
      429.87,
      429.25,
      426.64,
      418.93,
      420.24,
      419.47,
      414.91,
      417.01,
      410.63,
      405.05,
      403.44,
      402.65,
      405.0
    ],
    "risk_score": 95,
    "financials": {
      "years": [
        2022,
        2023,
        2024,
        2025,
        2026,
        2027
      ],
      "revenue": [
        402.5,
        432.3,
        468.4,
        499.3,
        537.1,
        583.3
      ],
      "eps": [
        17.79,
        17.72,
        12.64,
        11.06,
        23.78,
        11.82
      ],
      "ebitda": [
        176.3,
        175.6,
        125.3,
        109.6,
        235.6,
        117.2
      ],
      "consensus_revenue": [
        null,
        null,
        null,
        503.2,
        536.7,
        562.7
      ],
      "system_revenue": [
        null,
        null,
        null,
        491.5,
        559.8,
        621.4
      ]
    },
    "credit": {
      "leverage": 0.6,
      "interest_coverage": 27.4,
      "liquidity_score": 95.8,
      "rating": "AA",
      "pd_rating": "0.01% - Minimal",
      "regulatory_rating": "Pass"
    },
    "outlook": {
      "consensus": "Buy",
      "price_target": 495.7,
      "analysts": {
        "buy": 15,
        "hold": 5,
        "sell": 5
      },
      "conviction": "Medium",
      "rationale": "Valuation concerns balance growth prospects."
    }
  },
  {
    "ticker": "NVDA",
    "name": "NVIDIA Corp.",
    "sector": "Technology",
    "current_price": 950.0,
    "change_pct": -1.24,
    "market_cap": "0.7T",
    "pe_ratio": 42.9,
    "dividend_yield": 1.98,
    "price_history": [
      836.47,
      842.78,
      845.25,
      852.17,
      841.9,
      843.17,
      830.26,
      842.2,
      840.58,
      855.67,
      850.73,
      865.52,
      860.58,
      863.59,
      878.45,
      863.55,
      851.54,
      837.52,
      853.07,
      839.85,
      827.8,
      841.96,
      832.23,
      832.83,
      818.93,
      819.45,
      831.9,
      836.79,
      847.1,
      861.35,
      852.32,
      839.92,
      849.28,
      849.17,
      853.55,
      848.59,
      846.57,
      855.29,
      858.44,
      845.96,
      835.59,
      845.14,
      839.75,
      842.28,
      842.96,
      835.37,
      827.87,
      811.81,
      817.57,
      810.81,
      808.31,
      805.03,
      807.85,
      805.09,
      818.07,
      833.15,
      830.89,
      821.81,
      820.77,
      829.65,
      829.27,
      831.61,
      826.1,
      838.1,
      829.28,
      825.19,
      811.67,
      815.22,
      822.38,
      816.97,
      801.77,
      803.22,
      803.85,
      801.3,
      791.7,
      777.66,
      774.76,
      789.82,
      795.97,
      794.29,
      791.87,
      776.64,
      762.98,
      775.76,
      761.91,
      769.05,
      766.73,
      761.69,
      772.45,
      773.78,
      774.72,
      778.25,
      773.37,
      759.37,
      747.68,
      751.11,
      740.18,
      752.87,
      750.12,
      754.4,
      746.7,
      758.02,
      752.23,
      765.11,
      777.43,
      788.83,
      786.05,
      799.07,
      811.43,
      799.79,
      806.51,
      805.29,
      811.12,
      810.4,
      816.98,
      830.91,
      843.38,
      843.59,
      847.28,
      860.16,
      851.75,
      863.89,
      859.59,
      853.35,
      840.84,
      856.59,
      872.46,
      859.52,
      855.23,
      843.72,
      836.24,
      827.19,
      813.06,
      804.99,
      804.2,
      791.22,
      801.64,
      796.86,
      789.91,
      794.77,
      788.6,
      789.45,
      801.67,
      786.73,
      793.99,
      806.12,
      821.18,
      805.07,
      805.27,
      794.77,
      784.58,
      772.37,
      772.21,
      782.88,
      788.01,
      795.68,
      804.77,
      812.25,
      805.32,
      816.78,
      803.7,
      810.92,
      809.89,
      823.7,
      833.98,
      822.25,
      825.89,
      841.71,
      830.17,
      836.96,
      852.01,
      835.6,
      847.67,
      855.28,
      859.6,
      857.8,
      865.96,
      878.49,
      871.89,
      870.36,
      858.29,
      854.52,
      851.91,
      852.0,
      857.88,
      856.31,
      859.43,
      845.25,
      838.25,
      830.62,
      828.66,
      829.7,
      818.6,
      819.84,
      835.54,
      836.38,
      850.03,
      864.4,
      850.26,
      861.79,
      853.02,
      869.76,
      875.42,
      864.57,
      857.72,
      852.25,
      839.08,
      848.87,
      864.44,
      871.99,
      870.13,
      878.51,
      879.82,
      887.75,
      874.36,
      889.21,
      890.12,
      907.82,
      906.95,
      895.03,
      907.34,
      898.01,
      896.75,
      887.17,
      887.55,
      898.15,
      914.01,
      931.75,
      934.45,
      925.84,
      933.8,
      925.5,
      936.86,
      918.83,
      910.21,
      913.85,
      930.17,
      939.81,
      953.02,
      935.76,
      929.1,
      928.17,
      919.18,
      904.37,
      904.25,
      921.84,
      934.66,
      944.78,
      949.06,
      952.46,
      946.22,
      950.0
    ],
    "risk_score": 75,
    "financials": {
      "years": [
        2022,
        2023,
        2024,
        2025,
        2026,
        2027
      ],
      "revenue": [
        2011.8,
        2300.1,
        2594.5,
        2989.5,
        3473.2,
        3993.4
      ],
      "eps": [
        15.87,
        12.1,
        22.17,
        21.52,
        27.12,
        29.29
      ],
      "ebitda": [
        717.2,
        546.7,
        1001.9,
        972.4,
        1225.5,
        1323.5
      ],
      "consensus_revenue": [
        null,
        null,
        null,
        3059.3,
        3321.1,
        4010.8
      ],
      "system_revenue": [
        null,
        null,
        null,
        3124.1,
        3717.5,
        4220.7
      ]
    },
    "credit": {
      "leverage": 4.4,
      "interest_coverage": 3.8,
      "liquidity_score": 70.2,
      "rating": "BBB",
      "pd_rating": "0.15% - Low",
      "regulatory_rating": "Special Mention"
    },
    "outlook": {
      "consensus": "Hold",
      "price_target": 956.95,
      "analysts": {
        "buy": 19,
        "hold": 21,
        "sell": 8
      },
      "conviction": "Low",
      "rationale": "Valuation concerns balance growth prospects."
    }
  },
  {
    "ticker": "GOOGL",
    "name": "Alphabet Inc.",
    "sector": "Technology",
    "current_price": 175.0,
    "change_pct": 0.04,
    "market_cap": "2.8T",
    "pe_ratio": 8.9,
    "dividend_yield": 0.71,
    "price_history": [
      172.86,
      173.75,
      172.9,
      170.25,
      171.18,
      167.81,
      164.86,
      162.57,
      159.68,
      160.72,
      159.41,
      158.25,
      161.08,
      160.32,
      157.44,
      157.04,
      154.65,
      155.99,
      158.08,
      159.92,
      158.33,
      159.68,
      158.57,
      156.14,
      157.63,
      154.78,
      154.57,
      153.05,
      151.6,
      149.54,
      152.2,
      153.88,
      152.36,
      153.19,
      153.21,
      153.31,
      150.76,
      152.7,
      151.3,
      150.28,
      151.67,
      149.88,
      152.43,
      152.66,
      151.91,
      150.69,
      148.74,
      148.86,
      151.56,
      153.27,
      150.8,
      148.7,
      151.47,
      154.3,
      156.9,
      154.35,
      152.95,
      150.46,
      152.98,
      150.74,
      149.86,
      151.9,
      150.03,
      149.04,
      148.12,
      150.29,
      152.31,
      153.91,
      156.76,
      153.94,
      156.57,
      157.47,
      160.04,
      157.2,
      156.76,
      158.16,
      161.0,
      159.47,
      158.09,
      155.75,
      158.34,
      159.59,
      162.15,
      162.98,
      162.0,
      160.28,
      158.54,
      158.19,
      160.66,
      159.59,
      161.17,
      160.86,
      160.14,
      157.01,
      155.54,
      157.11,
      158.49,
      159.7,
      160.03,
      159.54,
      161.89,
      162.61,
      160.37,
      162.77,
      164.5,
      166.59,
      163.39,
      164.49,
      164.86,
      163.87,
      165.07,
      167.32,
      165.15,
      163.03,
      160.83,
      163.05,
      163.77,
      163.62,
      163.06,
      160.35,
      162.03,
      160.21,
      157.4,
      158.69,
      159.52,
      157.5,
      159.88,
      160.29,
      162.3,
      159.97,
      162.51,
      161.05,
      158.49,
      161.56,
      159.88,
      160.77,
      163.12,
      162.83,
      165.66,
      167.13,
      170.02,
      169.3,
      169.51,
      166.34,
      163.65,
      164.62,
      161.72,
      163.04,
      164.41,
      161.47,
      160.48,
      162.51,
      161.6,
      164.35,
      164.29,
      166.21,
      168.06,
      167.35,
      164.15,
      164.39,
      166.45,
      167.6,
      166.06,
      164.18,
      166.73,
      165.27,
      168.51,
      168.33,
      167.75,
      169.16,
      171.47,
      174.05,
      172.77,
      175.87,
      177.84,
      175.87,
      179.11,
      179.35,
      176.01,
      174.42,
      176.23,
      173.81,
      172.55,
      169.73,
      171.6,
      173.17,
      173.5,
      176.34,
      176.6,
      179.08,
      180.39,
      178.65,
      177.66,
      177.99,
      180.48,
      179.64,
      176.36,
      179.06,
      180.54,
      178.22,
      180.84,
      181.64,
      182.94,
      184.8,
      187.44,
      189.39,
      186.92,
      183.73,
      185.97,
      189.14,
      190.34,
      187.4,
      188.53,
      188.99,
      188.35,
      190.97,
      194.3,
      192.16,
      191.94,
      193.39,
      193.73,
      191.49,
      193.36,
      196.78,
      199.11,
      197.23,
      197.62,
      193.96,
      193.03,
      189.76,
      192.35,
      189.65,
      186.97,
      184.17,
      184.37,
      187.62,
      184.36,
      184.23,
      185.36,
      183.98,
      184.24,
      180.78,
      182.72,
      184.91,
      183.65,
      183.42,
      180.37,
      177.01,
      176.16,
      178.17,
      177.53,
      175.0
    ],
    "risk_score": 88,
    "financials": {
      "years": [
        2022,
        2023,
        2024,
        2025,
        2026,
        2027
      ],
      "revenue": [
        222.3,
        250.6,
        281.1,
        322.3,
        362.5,
        410.3
      ],
      "eps": [
        9.5,
        15.75,
        19.77,
        24.41,
        24.93,
        23.43
      ],
      "ebitda": [
        48.9,
        81.1,
        101.8,
        125.7,
        128.3,
        120.6
      ],
      "consensus_revenue": [
        null,
        null,
        null,
        337.2,
        357.7,
        427.5
      ],
      "system_revenue": [
        null,
        null,
        null,
        329.2,
        360.4,
        412.3
      ]
    },
    "credit": {
      "leverage": 2.5,
      "interest_coverage": 9.0,
      "liquidity_score": 88.0,
      "rating": "A",
      "pd_rating": "0.05% - Very Low",
      "regulatory_rating": "Pass"
    },
    "outlook": {
      "consensus": "Buy",
      "price_target": 216.72,
      "analysts": {
        "buy": 20,
        "hold": 4,
        "sell": 3
      },
      "conviction": "High",
      "rationale": "Strong fundamentals and market leadership."
    }
  },
  {
    "ticker": "META",
    "name": "Meta Platforms Inc.",
    "sector": "Technology",
    "current_price": 500.0,
    "change_pct": -1.05,
    "market_cap": "3.0T",
    "pe_ratio": 37.7,
    "dividend_yield": 1.76,
    "price_history": [
      438.8,
      438.63,
      445.67,
      442.2,
      443.43,
      434.64,
      440.31,
      444.63,
      445.36,
      443.78,
      440.55,
      446.24,
      441.0,
      448.55,
      439.93,
      443.0,
      446.49,
      452.13,
      444.98,
      436.79,
      433.15,
      425.01,
      429.55,
      434.16,
      431.29,
      423.8,
      431.1,
      429.65,
      438.11,
      429.35,
      425.09,
      424.51,
      430.13,
      430.48,
      435.85,
      431.51,
      423.21,
      431.35,
      425.59,
      432.74,
      437.07,
      436.36,
      431.19,
      429.33,
      435.17,
      432.4,
      432.6,
      431.5,
      427.31,
      433.98,
      432.58,
      435.67,
      436.14,
      438.36,
      440.7,
      442.03,
      448.26,
      442.42,
      436.76,
      445.3,
      442.47,
      436.1,
      435.72,
      434.48,
      430.86,
      438.79,
      440.37,
      435.24,
      431.79,
      434.16,
      428.87,
      430.37,
      432.85,
      429.57,
      429.54,
      424.34,
      426.32,
      426.29,
      431.68,
      429.22,
      431.03,
      424.03,
      427.8,
      431.44,
      423.7,
      422.7,
      430.87,
      437.72,
      437.76,
      430.04,
      423.62,
      423.47,
      418.16,
      413.48,
      420.35,
      412.49,
      419.91,
      413.39,
      405.16,
      405.72,
      406.68,
      413.31,
      415.78,
      422.9,
      418.86,
      411.81,
      407.48,
      414.47,
      410.38,
      410.27,
      407.42,
      399.44,
      391.58,
      395.18,
      396.2,
      389.88,
      393.73,
      393.95,
      395.17,
      390.03,
      394.94,
      395.75,
      395.29,
      392.74,
      389.22,
      390.92,
      390.79,
      394.78,
      401.99,
      397.56,
      398.93,
      397.27,
      397.59,
      397.22,
      393.27,
      395.08,
      398.67,
      401.84,
      398.78,
      406.47,
      408.68,
      413.57,
      415.66,
      416.83,
      424.02,
      428.18,
      435.24,
      437.92,
      436.88,
      439.13,
      430.96,
      434.91,
      442.64,
      444.78,
      439.87,
      437.86,
      439.37,
      430.75,
      429.66,
      436.27,
      437.15,
      434.06,
      430.97,
      428.71,
      436.49,
      438.03,
      446.71,
      454.28,
      447.11,
      444.89,
      445.31,
      453.8,
      449.1,
      455.57,
      449.27,
      456.34,
      447.5,
      452.87,
      451.16,
      458.7,
      463.82,
      472.71,
      469.9,
      475.2,
      472.99,
      466.96,
      472.09,
      470.77,
      476.03,
      477.5,
      476.16,
      474.57,
      469.96,
      471.94,
      467.3,
      467.95,
      462.25,
      468.04,
      471.05,
      468.74,
      459.39,
      461.06,
      465.98,
      469.32,
      474.27,
      476.84,
      482.74,
      475.53,
      481.7,
      487.95,
      487.71,
      485.51,
      486.35,
      477.31,
      467.97,
      468.14,
      459.99,
      454.37,
      453.5,
      444.85,
      447.77,
      453.18,
      450.35,
      459.29,
      452.71,
      452.59,
      455.63,
      462.44,
      461.06,
      469.25,
      474.95,
      479.72,
      486.83,
      491.6,
      498.68,
      496.26,
      491.47,
      487.55,
      486.03,
      487.43,
      484.04,
      492.86,
      494.13,
      499.86,
      498.38,
      504.47,
      505.49,
      514.95,
      508.81,
      501.9,
      492.57,
      500.0
    ],
    "risk_score": 80,
    "financials": {
      "years": [
        2022,
        2023,
        2024,
        2025,
        2026,
        2027
      ],
      "revenue": [
        480.2,
        528.2,
        590.0,
        662.7,
        753.6,
        853.5
      ],
      "eps": [
        17.21,
        14.43,
        13.26,
        18.06,
        22.71,
        27.11
      ],
      "ebitda": [
        192.9,
        161.7,
        148.6,
        202.4,
        254.5,
        303.9
      ],
      "consensus_revenue": [
        null,
        null,
        null,
        650.6,
        744.9,
        830.6
      ],
      "system_revenue": [
        null,
        null,
        null,
        665.5,
        767.4,
        836.6
      ]
    },
    "credit": {
      "leverage": 4.1,
      "interest_coverage": 4.1,
      "liquidity_score": 82.8,
      "rating": "BBB",
      "pd_rating": "0.15% - Low",
      "regulatory_rating": "Pass"
    },
    "outlook": {
      "consensus": "Sell",
      "price_target": 453.95,
      "analysts": {
        "buy": 10,
        "hold": 6,
        "sell": 6
      },
      "conviction": "Medium",
      "rationale": "Valuation concerns balance growth prospects."
    }
  },
  {
    "ticker": "AVGO",
    "name": "Broadcom Inc.",
    "sector": "Technology",
    "current_price": 1300.0,
    "change_pct": 0.81,
    "market_cap": "1.2T",
    "pe_ratio": 97.5,
    "dividend_yield": 0.72,
    "price_history": [
      2141.8,
      2158.34,
      2176.87,
      2143.22,
      2129.61,
      2112.23,
      2074.8,
      2071.99,
      2064.36,
      2079.96,
      2073.98,
      2042.12,
      2053.25,
      2039.74,
      2006.53,
      2031.09,
      2051.78,
      2074.12,
      2067.13,
      2092.39,
      2054.55,
      2051.93,
      2084.66,
      2077.29,
      2042.56,
      2042.85,
      2015.77,
      1988.98,
      1976.62,
      1961.19,
      1937.25,
      1951.58,
      1965.82,
      1973.92,
      1994.35,
      2008.17,
      2023.01,
      2044.27,
      2058.98,
      2021.76,
      2000.62,
      2017.34,
      1977.92,
      1977.18,
      1987.7,
      1970.6,
      1943.01,
      1942.13,
      1944.16,
      1949.31,
      1927.2,
      1908.44,
      1890.48,
      1883.42,
      1852.94,
      1841.78,
      1835.31,
      1821.0,
      1838.49,
      1873.59,
      1884.75,
      1856.51,
      1883.02,
      1859.26,
      1879.12,
      1877.79,
      1890.9,
      1875.62,
      1907.44,
      1934.92,
      1911.03,
      1889.27,
      1854.01,
      1821.72,
      1838.89,
      1850.44,
      1884.0,
      1848.12,
      1858.64,
      1860.3,
      1883.63,
      1854.65,
      1876.74,
      1909.99,
      1874.37,
      1908.1,
      1885.32,
      1853.05,
      1849.96,
      1852.32,
      1829.06,
      1819.21,
      1816.48,
      1781.7,
      1809.7,
      1787.05,
      1753.51,
      1742.92,
      1762.51,
      1749.89,
      1758.25,
      1783.7,
      1772.08,
      1743.61,
      1741.76,
      1760.16,
      1744.33,
      1758.79,
      1785.94,
      1780.03,
      1765.28,
      1765.46,
      1732.63,
      1715.46,
      1711.02,
      1711.77,
      1737.25,
      1763.98,
      1764.37,
      1774.22,
      1766.4,
      1747.11,
      1761.24,
      1769.61,
      1750.0,
      1723.82,
      1714.44,
      1711.6,
      1690.73,
      1667.93,
      1673.84,
      1664.7,
      1682.07,
      1676.04,
      1699.4,
      1684.66,
      1674.22,
      1654.12,
      1634.91,
      1612.35,
      1593.87,
      1577.1,
      1580.24,
      1567.51,
      1591.82,
      1560.39,
      1545.88,
      1553.17,
      1551.65,
      1563.03,
      1553.33,
      1573.62,
      1589.25,
      1584.56,
      1594.59,
      1567.44,
      1596.53,
      1566.36,
      1596.55,
      1573.19,
      1568.0,
      1558.37,
      1581.73,
      1556.65,
      1555.61,
      1532.27,
      1557.13,
      1548.12,
      1522.46,
      1531.65,
      1536.91,
      1513.66,
      1511.78,
      1491.96,
      1463.26,
      1449.46,
      1468.65,
      1479.18,
      1504.62,
      1475.18,
      1451.98,
      1427.9,
      1400.25,
      1419.09,
      1426.39,
      1428.66,
      1446.28,
      1422.59,
      1450.78,
      1455.29,
      1480.61,
      1495.54,
      1470.57,
      1498.77,
      1470.45,
      1441.66,
      1437.49,
      1448.1,
      1425.11,
      1415.13,
      1407.09,
      1388.26,
      1381.53,
      1356.22,
      1339.78,
      1346.02,
      1356.15,
      1342.66,
      1357.86,
      1377.33,
      1374.24,
      1355.78,
      1335.53,
      1309.56,
      1330.58,
      1323.39,
      1325.51,
      1341.44,
      1322.15,
      1318.5,
      1325.36,
      1307.3,
      1332.67,
      1311.21,
      1293.59,
      1278.98,
      1268.01,
      1264.31,
      1241.79,
      1242.94,
      1237.35,
      1258.55,
      1236.03,
      1236.88,
      1225.66,
      1220.96,
      1237.5,
      1213.99,
      1218.42,
      1215.83,
      1225.13,
      1244.07,
      1267.57,
      1250.44,
      1248.71,
      1273.59,
      1255.37,
      1269.25,
      1288.19,
      1290.16,
      1300.0
    ],
    "risk_score": 82,
    "financials": {
      "years": [
        2022,
        2023,
        2024,
        2025,
        2026,
        2027
      ],
      "revenue": [
        1678.5,
        1822.7,
        1974.3,
        2118.8,
        2294.9,
        2429.2
      ],
      "eps": [
        9.57,
        15.24,
        13.33,
        23.51,
        21.46,
        12.45
      ],
      "ebitda": [
        383.7,
        611.1,
        534.6,
        942.5,
        860.6,
        499.3
      ],
      "consensus_revenue": [
        null,
        null,
        null,
        2074.9,
        2252.6,
        2528.0
      ],
      "system_revenue": [
        null,
        null,
        null,
        2116.6,
        2306.8,
        2395.6
      ]
    },
    "credit": {
      "leverage": 2.8,
      "interest_coverage": 13.1,
      "liquidity_score": 79.9,
      "rating": "A",
      "pd_rating": "0.05% - Very Low",
      "regulatory_rating": "Pass"
    },
    "outlook": {
      "consensus": "Buy",
      "price_target": 1565.01,
      "analysts": {
        "buy": 22,
        "hold": 7,
        "sell": 5
      },
      "conviction": "Medium",
      "rationale": "Strong fundamentals and market leadership."
    }
  },
  {
    "ticker": "ORCL",
    "name": "Oracle Corp.",
    "sector": "Technology",
    "current_price": 125.0,
    "change_pct": 0.0,
    "market_cap": "2.6T",
    "pe_ratio": 7.6,
    "dividend_yield": 2.06,
    "price_history": [
      98.82,
      99.28,
      98.29,
      97.78,
      97.96,
      99.11,
      99.33,
      97.76,
      95.87,
      96.57,
      97.19,
      98.17,
      97.71,
      96.43,
      94.84,
      96.73,
      98.26,
      97.71,
      99.19,
      99.02,
      100.94,
      101.72,
      100.95,
      102.87,
      101.58,
      101.57,
      103.6,
      104.69,
      106.41,
      105.82,
      107.39,
      106.04,
      106.95,
      106.85,
      106.69,
      106.24,
      106.47,
      107.41,
      109.18,
      110.54,
      111.28,
      112.27,
      113.31,
      111.83,
      110.41,
      108.62,
      106.99,
      107.13,
      109.06,
      108.75,
      107.35,
      107.84,
      106.69,
      106.41,
      106.55,
      106.52,
      107.1,
      106.62,
      106.39,
      105.88,
      106.02,
      107.75,
      108.91,
      110.08,
      108.66,
      110.81,
      110.07,
      111.97,
      113.8,
      113.95,
      114.67,
      112.61,
      114.2,
      114.38,
      113.88,
      115.9,
      116.62,
      117.56,
      115.63,
      116.56,
      117.21,
      115.68,
      113.56,
      114.13,
      115.24,
      114.33,
      115.74,
      116.3,
      115.29,
      113.42,
      113.79,
      113.05,
      113.08,
      113.74,
      113.7,
      112.13,
      112.39,
      112.72,
      113.52,
      111.3,
      112.22,
      110.8,
      112.08,
      111.15,
      111.58,
      112.17,
      112.83,
      115.07,
      114.34,
      112.35,
      113.51,
      114.95,
      116.65,
      116.8,
      118.09,
      118.41,
      119.76,
      119.6,
      121.35,
      123.71,
      121.61,
      120.28,
      121.88,
      122.58,
      123.49,
      122.77,
      124.47,
      122.4,
      121.87,
      124.29,
      123.05,
      124.19,
      122.58,
      124.78,
      126.44,
      127.5,
      128.58,
      127.06,
      124.77,
      127.05,
      126.16,
      125.73,
      124.95,
      124.08,
      125.75,
      126.31,
      127.49,
      126.64,
      126.54,
      128.95,
      130.52,
      129.32,
      128.34,
      127.2,
      126.58,
      126.05,
      124.33,
      122.21,
      124.31,
      125.59,
      125.24,
      125.85,
      127.53,
      129.43,
      128.73,
      126.31,
      125.22,
      124.05,
      124.03,
      124.94,
      127.35,
      128.33,
      129.81,
      128.7,
      128.03,
      127.61,
      127.19,
      127.84,
      126.09,
      123.61,
      121.39,
      119.4,
      119.16,
      118.65,
      116.92,
      117.21,
      119.49,
      118.51,
      116.77,
      117.83,
      118.91,
      116.93,
      116.14,
      118.14,
      119.9,
      120.86,
      120.07,
      119.69,
      121.88,
      123.2,
      121.14,
      121.27,
      121.93,
      124.31,
      126.37,
      128.79,
      126.79,
      127.26,
      124.8,
      125.56,
      127.11,
      125.73,
      127.72,
      129.49,
      130.81,
      129.38,
      129.91,
      129.4,
      128.31,
      128.2,
      129.97,
      131.03,
      133.48,
      133.77,
      136.04,
      134.7,
      134.86,
      132.23,
      132.81,
      135.34,
      136.92,
      136.03,
      137.19,
      134.91,
      134.93,
      135.02,
      134.14,
      134.68,
      132.33,
      134.74,
      134.72,
      133.63,
      131.81,
      132.19,
      131.29,
      129.13,
      129.09,
      126.79,
      125.0
    ],
    "risk_score": 85,
    "financials": {
      "years": [
        2022,
        2023,
        2024,
        2025,
        2026,
        2027
      ],
      "revenue": [
        77.8,
        87.4,
        97.6,
        109.1,
        124.1,
        138.8
      ],
      "eps": [
        10.14,
        20.85,
        16.39,
        25.28,
        16.58,
        19.67
      ],
      "ebitda": [
        17.9,
        36.8,
        28.9,
        44.6,
        29.2,
        34.7
      ],
      "consensus_revenue": [
        null,
        null,
        null,
        105.0,
        129.7,
        140.8
      ],
      "system_revenue": [
        null,
        null,
        null,
        115.7,
        124.6,
        148.8
      ]
    },
    "credit": {
      "leverage": 3.4,
      "interest_coverage": 9.3,
      "liquidity_score": 89.5,
      "rating": "A",
      "pd_rating": "0.05% - Very Low",
      "regulatory_rating": "Pass"
    },
    "outlook": {
      "consensus": "Buy",
      "price_target": 141.22,
      "analysts": {
        "buy": 13,
        "hold": 4,
        "sell": 3
      },
      "conviction": "Medium",
      "rationale": "Strong fundamentals and market leadership."
    }
  }
];

        // --- State ---
        let currentTickerIndex = 0;
        let animationFrameId;
        let historyIndex = 0;
        let ctx;
        let canvas;

        // --- Initialization ---
        document.addEventListener('DOMContentLoaded', async () => {
            canvas = document.getElementById('marketCanvas');
            ctx = canvas.getContext('2d');

            // Resize canvas
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);

            // Initialize immediately
            renderSidebar();
            selectTicker(0);
        });

        function resizeCanvas() {
            canvas.width = document.getElementById('chartContainer').clientWidth;
            canvas.height = document.getElementById('chartContainer').clientHeight;
            if(MARKET_DATA.length > 0) renderChartFrame(); // Redraw if resized
        }

        function renderSidebar() {
            const list = document.getElementById('tickerList');
            list.innerHTML = '';

            MARKET_DATA.forEach((stock, index) => {
                const item = document.createElement('div');
                item.className = `ticker-item ${index === 0 ? 'active' : ''}`;
                item.onclick = () => selectTicker(index);

                const changeColor = stock.change_pct >= 0 ? 'var(--success-color)' : 'var(--danger-color)';
                const changeSign = stock.change_pct >= 0 ? '+' : '';

                item.innerHTML = `
                    <div>
                        <div class="mono" style="font-weight:bold; font-size: 1.1rem;">${stock.ticker}</div>
                        <div style="font-size: 0.8rem; color: var(--text-muted);">${stock.name}</div>
                    </div>
                    <div style="text-align:right;">
                        <div class="mono">${stock.current_price.toFixed(2)}</div>
                        <div class="mono" style="color: ${changeColor}; font-size: 0.8rem;">${changeSign}${stock.change_pct}%</div>
                    </div>
                `;
                list.appendChild(item);
            });
        }

        function selectTicker(index) {
            // Update sidebar active state
            const items = document.querySelectorAll('.ticker-item');
            items.forEach(i => i.classList.remove('active'));
            if(items[index]) items[index].classList.add('active');

            currentTickerIndex = index;
            const stock = MARKET_DATA[index];

            // Update Header
            document.getElementById('chartTitle').innerText = stock.ticker;

            // Update Details
            updateDetails(stock);

            // Reset Animation
            historyIndex = 0;
            if(animationFrameId) cancelAnimationFrame(animationFrameId);
            animateChart();
        }

        function updateDetails(stock) {
            // Fundamentals
            const stats = document.getElementById('fundamentalStats');
            stats.innerHTML = `
                <div class="stat-box">
                    <div class="stat-label">Market Cap</div>
                    <div class="stat-value">${stock.market_cap}</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">P/E Ratio</div>
                    <div class="stat-value">${stock.pe_ratio}</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">Div Yield</div>
                    <div class="stat-value">${stock.dividend_yield}%</div>
                </div>
                <div class="stat-box">
                    <div class="stat-label">Risk Score</div>
                    <div class="stat-value" style="color: ${stock.risk_score > 80 ? '#ef4444' : '#10b981'}">${stock.risk_score}/100</div>
                </div>
            `;

            // Outlook
            const outlook = document.getElementById('aiOutlook');
            outlook.innerHTML = `
                <div style="margin-bottom: 10px;"><strong style="color: var(--text-primary);">Consensus:</strong> ${stock.outlook.consensus}</div>
                <div style="margin-bottom: 10px;"><strong style="color: var(--text-primary);">Conviction:</strong> ${stock.outlook.conviction}</div>
                <div>"${stock.outlook.rationale}"</div>
            `;

            // Credit
            document.getElementById('creditRating').innerText = stock.credit.rating;
        }

        // --- Charting Logic ---
        function animateChart() {
            const stock = MARKET_DATA[currentTickerIndex];

            // Increment frame
            historyIndex++;
            if (historyIndex > stock.price_history.length) {
                // Loop or hold? Let's hold at the end for a bit then loop
                if(historyIndex > stock.price_history.length + 50) {
                    historyIndex = 0;
                }
            }

            renderChartFrame();

            // Use setTimeout to control speed, then requestAnimationFrame
            setTimeout(() => {
                animationFrameId = requestAnimationFrame(animateChart);
            }, ANIMATION_SPEED);
        }

        function renderChartFrame() {
            const stock = MARKET_DATA[currentTickerIndex];
            const data = stock.price_history;
            const pointsToShow = Math.min(historyIndex, data.length);

            if (pointsToShow === 0) return;

            const w = canvas.width;
            const h = canvas.height;
            const padding = 50;

            // Update current price display
            const currentPrice = data[Math.min(pointsToShow, data.length) - 1];
            if(currentPrice) {
                document.getElementById('chartPrice').innerText = currentPrice.toFixed(2);
            }

            // Clear
            ctx.clearRect(0, 0, w, h);

            // Calculate Scale
            // We scale based on the *entire* history so the chart doesn't jump wildly
            const minPrice = Math.min(...data) * 0.95;
            const maxPrice = Math.max(...data) * 1.05;
            const priceRange = maxPrice - minPrice;

            // Helper to map price to Y
            const getY = (price) => h - padding - ((price - minPrice) / priceRange) * (h - 2 * padding);
            // Helper to map index to X
            const getX = (i) => padding + (i / (data.length - 1)) * (w - 2 * padding);

            // Draw Grid
            ctx.strokeStyle = 'rgba(255, 255, 255, 0.05)';
            ctx.lineWidth = 1;
            ctx.beginPath();
            for(let i=0; i<=5; i++) {
                // Horizontal lines
                const y = padding + (i/5) * (h - 2*padding);
                ctx.moveTo(padding, y);
                ctx.lineTo(w - padding, y);
            }
            ctx.stroke();

            // Draw Line
            ctx.beginPath();
            ctx.strokeStyle = 'var(--primary-color)';
            if (window.getComputedStyle) {
                ctx.strokeStyle = getComputedStyle(document.body).getPropertyValue('--primary-color');
            } else {
                ctx.strokeStyle = '#00f3ff';
            }

            ctx.lineWidth = 2;
            ctx.lineJoin = 'round';

            for (let i = 0; i < pointsToShow; i++) {
                const x = getX(i);
                const y = getY(data[i]);
                if (i === 0) ctx.moveTo(x, y);
                else ctx.lineTo(x, y);
            }
            ctx.stroke();

            // Draw Area under line
            ctx.lineTo(getX(pointsToShow - 1), h - padding);
            ctx.lineTo(getX(0), h - padding);
            ctx.closePath();
            const gradient = ctx.createLinearGradient(0, 0, 0, h);
            gradient.addColorStop(0, 'rgba(6, 182, 212, 0.2)');
            gradient.addColorStop(1, 'rgba(6, 182, 212, 0)');
            ctx.fillStyle = gradient;
            ctx.fill();

            // Draw Glow point at tip
            if (pointsToShow > 0) {
                const lastX = getX(pointsToShow - 1);
                const lastY = getY(data[pointsToShow - 1]);

                ctx.beginPath();
                ctx.fillStyle = '#fff';
                ctx.arc(lastX, lastY, 3, 0, Math.PI * 2);
                ctx.fill();

                ctx.beginPath();
                ctx.fillStyle = 'rgba(6, 182, 212, 0.5)';
                ctx.arc(lastX, lastY, 10, 0, Math.PI * 2);
                ctx.fill();
            }
        }
    </script>
</body>
</html>
