{
  "phase": "Phase 2: Surgical Intervention",
  "priority_order": [
    "Security",
    "Types",
    "Lint",
    "Tests"
  ],
  "tasks": [
    {
      "category": "Security",
      "severity": "High",
      "description": "Fix weak hashing (MD5) in core/data_processing/universal_ingestor_v2.py and utils.py",
      "action": "Replace hashlib.md5 with hashlib.sha256 or use usedforsecurity=False"
    },
    {
      "category": "Security",
      "severity": "High",
      "description": "Fix Jinja2 autoescape disabled in core/newsletter_layout/generator.py",
      "action": "Enable autoescape=True in Environment constructor"
    },
    {
      "category": "Security",
      "severity": "High",
      "description": "Disable Flask debug mode in services/ui_backend.py",
      "action": "Set debug=False or use environment variable"
    },
    {
      "category": "Security",
      "severity": "Medium",
      "description": "Add timeouts to requests calls",
      "action": "Add timeout=30 to all requests.get/post calls identified by Bandit"
    },
    {
      "category": "Types",
      "severity": "Medium",
      "description": "Fix TypedDict missing keys in core/engine/states.py",
      "action": "Add missing keys or use total=False"
    },
    {
      "category": "Types",
      "severity": "Medium",
      "description": "Fix return type mismatch in core/agents/rag_agent.py",
      "action": "Ensure all paths return valid HNASPState or dict"
    },
    {
      "category": "Lint",
      "severity": "Low",
      "description": "Fix PEP8 violations",
      "action": "Run ruff check --fix ."
    },
    {
      "category": "Tests",
      "severity": "Medium",
      "description": "Fix failing tests due to imports",
      "action": "Verify tests pass after dependency installation and code fixes"
    }
  ]
}
