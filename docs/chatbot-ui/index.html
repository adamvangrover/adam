<!DOCTYPE html>
<html>
<head>
  <title>Adam v19.1 Chatbot</title>
  <link rel="stylesheet" href="style.css">
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
  <script src="https://cdn.jsdelivr.net/npm/intro.js@4.3.0/minified/intro.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/intro.js@4.3.0/minified/introjs.min.css">
  <style>
    #landing-page-chatbot {
      display: block; /* Show the landing page chatbot initially */
    }

    #functional-chatbot {
      display: none; /* Hide the functional chatbot initially */
    }

    .tutorial-highlight {
      color: #007bff; /* Blue color for highlights */
      font-weight: bold;
    }

    .chatbot-links {
      margin-top: 10px;
    }
    .chatbot-links a {
      display: block;
      margin-bottom: 5px;
    }
  </style>
</head>
<body>
  <div id="landing-page-chatbot">
    <div class="chatbot-container">
      <div class="chatbot-header">
        <h2>Welcome to Adam v19.1!</h2>
      </div>
      <div class="chatbot-body">
        <div class="chatbot-message">
          Hello! I'm Adam v19.1, your AI-powered financial analyst. I can help you unlock market insights, analyze investment opportunities, and manage risks effectively.
        </div>
        <div class="chatbot-message">
          Here are some quick links to get you started:
        </div>
        <div class="chatbot-links">
          <a href="https://github.com/adamvangrover/adam" target="_blank">Adam v19.1 GitHub Repository</a>
          <a href="https://github.com/adamvangrover/adam/blob/main/README.md" target="_blank">README</a>
          <a href="https://github.com/adamvangrover/adam/blob/main/docs/user_guide.md" target="_blank">User Guide</a>
        </div>
        <div class="chatbot-message">
          You can also ask me some basic questions about Adam v19.1 or the financial markets. For example:
        </div>
        <div class="chatbot-message">
          * What is Adam v19.1?
          * How does Adam v19.1 work?
          * What are the benefits of using Adam v19.1?
          * What are some common financial terms?
        </div>
        <div class="chatbot-message">
          Or, if you're just here for some fun, try asking me a joke or a riddle!
        </div>
        <div class="chatbot-message">
          Select a report to view:
        </div>
        <select id="report-selection">
        </select>
        <button onclick="displaySelectedReport()">View Report</button>
        <div id="report-content"></div>

        <div class="chatbot-options">
          <button onclick="showVideoOverview()">Watch Video Overview</button>
          <button onclick="startInteractiveTutorial()">Start Interactive Tutorial</button>
          <button onclick="startGuidedTour()">Take Guided Tour</button>
          <button onclick="showAdvancedMode()">Proceed to Advanced Analysis</button>
          <button onclick="showLearningModule()">Learn Financial Concepts</button>

        </div>
        <div id="landing-page-input-area">
          <input type="text" id="landing-page-input" placeholder="Type your message...">
          <button id="landing-page-send-button">Send</button>
        </div>
        <div id="landing-page-chat-window">
          </div>
      </div>
    </div>
  </div>

  <div id="functional-chatbot">
    <div id="chat-window">
      <div class="chat-message bot">
        Hello! I'm Adam v19.1, your AI companion for navigating the financial markets. How can I assist you today?
      </div>
    </div>

    <div id="input-area">
      <input type="text" id="user-input" placeholder="Type your message...">
      <button id="send-button">Send</button>
    </div>

    <div id="menu">
      <button onclick="showMarketSentiment()">Market Sentiment</button>
      <button onclick="showMacroeconomicAnalysis()">Macroeconomic Analysis</button>
      <button onclick="showGeopoliticalRisks()">Geopolitical Risks</button>
      <button onclick="showIndustryAnalysis()">Industry Analysis</button>
      <button onclick="showFundamentalAnalysis()">Fundamental Analysis</button>
      <button onclick="showTechnicalAnalysis()">Technical Analysis</button>
      <button onclick="showPortfolioOptimization()">Portfolio Optimization</button>

      <button onclick="showKnowledgeGraph()">Knowledge Graph</button>
      <button onclick="showREADME()">README</button>
      <button onclick="showUserGuide()">User Guide</button>
      <button onclick="showAPIDocs()">API Documentation</button>

      <button onclick="toggleAdvancedMode()" id="advanced-mode-button">Advanced Mode</button>
    </div>

    <div id="content-area">
      <div id="markdown-viewer"></div>
      <div id="knowledge-graph-visualization"></div>

      <div id="react-root"></div>
    </div>

    <div id="readme-links">
      <a href="https://github.com/adamvangrover/adam/blob/main/README.md" target="_blank">Root README</a> |
      <a href="https://github.com/adamvangrover/adam/blob/main/core/agents/AGENTS.md" target="_blank">AGENTS README</a> |
      <a href="https://github.com/adamvangrover/adam/blob/main/docs/adam_v15.4_guide.md" target="_blank">v15 GUIDE</a> |
      <a href="https://github.com/adamvangrover/adam/blob/main/docs/getting_started.md" target="_blank">GETTING STARTED</a> |
      <a href="https://github.com/adamvangrover/adam/blob/main/docs/user_guide.md" target="_blank">USER GUIDE</a> 
    </div>
  </div>

<div id="learning-module-popup" style="display: none;">
  <h2>Learn Financial Concepts</h2>
  <div id="learning-module-content">
    <h3>Discounted Cash Flow (DCF)</h3>
    <p>${knowledgeGraph.Valuation.DCF.human_readable.definition}</p>
    <p>${knowledgeGraph.Valuation.DCF.human_readable.explanation}</p>
    <div id="dcf-quiz" style="display: none;">
      <p>A company is projected to generate $1 million in free cash flow next year, growing at 5% per year for the next 5 years. After that, the growth rate is expected to stabilize at 2%. If the discount rate is 10%, what is the intrinsic value of the company?</p>
      <input type="number" id="dcf-answer" placeholder="Enter your answer">
      <button onclick="checkDCFAnswer()">Check Answer</button>
      <p id="dcf-feedback"></p>
    </div>
    <button onclick="showQuiz('dcf')">Take a Quiz</button>

    <h3>Comparable Company Analysis (CCA)</h3>
    <p>${knowledgeGraph.Valuation.Comparables.human_readable.definition}</p>
    <p>${knowledgeGraph.Valuation.Comparables.human_readable.explanation}</p>
    <button onclick="showInteractiveExample('comparables')">See an Example</button>

    </div>
  <button onclick="closeLearningModule()">Close</button>
</div>
  
  <script src="tutorial.js"></script>
  <script src="message_handler.js"></script>
  <script src="api_communicator.js"></script>
  <script src="ui_updater.js"></script>
  <script src="analysis_modules.js"></script>
  <script src="ui_components.js"></script>
  <script src="menu_functions.js"></script>
  <script src="event_handlers.js"></script>
  <script src="utils.js"></script>
  <script src="script.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

  <script type="text/babel">
    // ... (React component definitions)
  </script>

<script>
  const knowledgeGraph = {
    "Valuation": {
      "DCF": {
        "human_readable": {
          "definition": "Discounted Cash Flow (DCF) analysis is a valuation method that estimates the intrinsic value of an investment based on its expected future cash flows. It's like looking into a crystal ball to see how much money an investment will generate over its lifetime.",
          "explanation": "The DCF model calculates the present value of all expected future cash flows, discounted back to today's value using a discount rate that reflects the riskiness of the investment. The sum of these present values represents the intrinsic value of the investment."
        }
      },
      "Comparables": {
        "human_readable": {
          "definition": "Comparable company analysis (CCA) is a valuation method that compares a company to its peers based on relative valuation metrics. It's like comparing apples to apples - you look for companies with similar characteristics to get an idea of what a company is worth.",
          "explanation": "CCA involves identifying comparable companies (comps) in the same industry or sector, analyzing their valuation multiples (e.g., P/E, EV/EBITDA, P/B), and applying these multiples to the target company to estimate its value."
        }
      },
      // ... Add other relevant concepts from the knowledge graph
    }
  };
</script>
  
  <script>
    function showVideoOverview() {
      // Placeholder for video overview
      alert("Video overview is not available in this demo. Please refer to the documentation for a detailed walkthrough of Adam's capabilities.");
    }

    function startInteractiveTutorial() {
      introJs().setOptions({
        steps: [
          {
            intro: "Welcome to the Adam v19.1 interactive tutorial! Let's explore its key features and functionalities."
          },
          {
            element: '#landing-page-chatbot',
            intro: "This is the landing page chatbot, your guide to Adam v19.1. It provides an overview of the system, setup instructions, user guide, and more."
          },
          {
            element: '.chatbot-options button:first-child',
            intro: "Click this button to watch a video overview of Adam v19.1's capabilities (not available in this demo)."
          },
          {
            element: '.chatbot-options button:nth-child(2)',
            intro: "This button starts the interactive tutorial, guiding you through the system's features step-by-step."
          },
          {
            element: '.chatbot-options button:nth-child(3)',
            intro: "Click this button to take a guided tour of the chatbot UI (not available in this demo)."
          },
          {
            element: '.chatbot-options button:last-child',
            intro: "This button takes you to the advanced analysis mode, where you can interact with the full Adam v19.1 system."
          },
          {
            element: '#functional-chatbot',
            intro: "This is the functional chatbot, where you can interact with the AI engine, access the knowledge graph, run analysis modules, and generate reports."
          },
          {
            element: '#chat-window',
            intro: "This is the chat window where you can interact with Adam and receive responses."
          },
          {
            element: '#input-area',
            intro: "Type your messages and questions here, then click 'Send' to communicate with Adam."
          },
          {
            element: '#user-input',
            intro: "This is the input field where you type your messages."
          },
          {
            element: '#send-button',
            intro: "Click this button to send your message to Adam."
          },
          {
            element: '#menu',
            intro: "These menu options provide access to various analysis modules, knowledge graph exploration, and system documentation."
          },
          {
            element: '#menu button:first-child',
            intro: "Click this button to analyze market sentiment."
          },
          {
            element: '#menu button:nth-child(2)',
            intro: "This button initiates macroeconomic analysis."
          },
          // ... (Add more steps for other menu options)
          {
            element: '#content-area',
            intro: "This area displays the results of your analysis, visualizations, reports, and other information retrieved from Adam."
          },
          {
            element: '#markdown-viewer',
            intro: "This section displays the output in a readable format."
          },
          {
            element: '#knowledge-graph-visualization',
            intro: "This section will visualize the knowledge graph (not available in this demo)."
          },
          {
            element: '#react-root',
            intro: "This section can house interactive React components for data visualization and analysis (not available in this demo)."
          },
          {
            element: '#readme-links',
            intro: "These links provide access to the README files, user guide, and API documentation."
          },
          {
            intro: "This concludes the interactive tutorial. Feel free to explore the system and its functionalities further! <br><br> <span id='quiz'></span>"
          }
        ]
      }).start().oncomplete(() => {
        // Add a quiz after the tutorial
        const quizContainer = document.getElementById('quiz');
        quizContainer.innerHTML = `
          <p>Quick Quiz:</p>
          <p>Which of these is NOT a core component of the Adam v19.1 system?</p>
          <button onclick="checkAnswer('agent_orchestrator')">Agent Orchestrator</button>
          <button onclick="checkAnswer('knowledge_graph')">Knowledge Graph</button>
          <button onclick="checkAnswer('landing_page_chatbot')">Landing Page Chatbot</button>
          <button onclick="checkAnswer('data_manager')">Data Manager</button>
        `;
      });
    }

    function checkAnswer(answer) {
      const incorrectAnswer = 'landing_page_chatbot'; 
      if (answer === incorrectAnswer) {
        alert("Correct! The Landing Page Chatbot is part of the UI demo, not the core Adam v19.1 system.");
      } else {
        alert("Not quite. Try reviewing the tutorial and the README again.");
      }
    }

    function startGuidedTour() {
      // Placeholder for guided tour
      alert("Guided tour is not available in this demo. However, you can explore the User Guide and API Documentation for detailed information on how to use Adam v18.0.");
    }

    function showAdvancedMode() {
      // Hide the landing page chatbot and show the functional chatbot
      document.getElementById('landing-page-chatbot').style.display = 'none';
      document.getElementById('functional-chatbot').style.display = 'block';
    }

    function handleLandingPageInput(userInput) {
      const message = userInput.toLowerCase();
      let response = "";
      if (message.includes("what is adam v19.1")) {
        response = "Adam v19.1 is a highly sophisticated AI-powered financial analytics system designed to provide comprehensive insights and strategic guidance for investors, incorporating new agents, simulations, and enhanced capabilities.";
      } else if (message.includes("how does adam v19.1 work")) {
        response = "Adam v19.1 uses a network of specialized agents, a knowledge graph, and real-time data to analyze market trends, assess risks, and provide investment recommendations. It also includes new simulation workflows and XAI capabilities.";
      } else if (message.includes("benefits of using adam v19.1")) {
        response = "Adam v19.1 can help you make informed investment decisions, save time and effort, and potentially improve your returns. It also provides transparent explanations and facilitates deeper understanding of the financial markets.";
      } else if (message.includes("financial terms")) {
        response = "Some common financial terms include: ROI (Return on Investment), P/E ratio (Price-to-Earnings ratio), and diversification. Do you have a specific term you'd like to know more about?";
      } else if (message.includes("joke")) {
        response = "Why don't scientists trust atoms? Because they make up everything!";
      } else if (message.includes("riddle")) {
        response = "I have cities, but no houses; forests, but no trees; and water, but no fish. What am I?";
      } else {
        response = "I'm still learning about the financial markets and how to answer your questions. Please try asking me something else.";
      }
      // Display the message in the landing page chat window
      displayMessage(response, 'bot', 'landing-page-chat-window'); 
    }

    // Function to display messages (updated to accept a target chat window)
    function displayMessage(message, sender, targetChatWindowId = 'chat-window') {
      const chatMessage = document.createElement('div');
      chatMessage.classList.add('chat-message', sender);
      chatMessage.textContent = message;
      const chatWindow = document.getElementById(targetChatWindowId);
      chatWindow.appendChild(chatMessage);
      chatWindow.scrollTop = chatWindow.scrollHeight; // Scroll to the bottom
    }

    // Fetch the list of reports from the repository
    fetch('https://api.github.com/repos/adamvangrover/adam/contents/core/libraries_and_archives/reports')
      .then(response => response.json())
      .then(data => {
        const reportSelection = document.getElementById('report-selection');
        data.forEach(item => {
          if (item.type === 'file') {
            const option = document.createElement('option');
            option.value = item.path;
            option.text = item.name;
            reportSelection.add(option);
          }
        });
      });

    function displaySelectedReport() {
      const reportPath = document.getElementById('report-selection').value;
      // Fetch and display the selected report content
      fetch(`https://raw.githubusercontent.com/adamvangrover/adam/main/${reportPath}`)
        .then(response => response.text())
        .then(data => {
          const reportContent = document.getElementById('report-content');
          // Render the report content appropriately (e.g., using Marked for Markdown, or custom rendering for JSON)
          reportContent.innerHTML = marked.parse(data); // Example using Marked for Markdown
        });
    }

    // ... (Existing functions)

function showLearningModule() {
  const learningModulePopup = document.getElementById('learning-module-popup');
  learningModulePopup.style.display = 'block';
}

function closeLearningModule() {
  const learningModulePopup = document.getElementById('learning-module-popup');
  learningModulePopup.style.display = 'none';
}

function showQuiz(concept) {
  if (concept === 'dcf') {
    document.getElementById('dcf-quiz').style.display = 'block';
  }
  // Add more quiz logic for other concepts as needed
}

function showInteractiveExample(concept) {
  // Implement interactive example logic for the given concept
  alert(`Interactive example for ${concept} is not yet implemented.`);
}

function checkDCFAnswer() {
  const userAnswer = parseFloat(document.getElementById('dcf-answer').value);
  const correctAnswer = 13.46; // Replace with the actual calculation based on the quiz scenario
  const feedback = document.getElementById('dcf-feedback');

  if (Math.abs(userAnswer - correctAnswer) < 0.01) {
    feedback.textContent = "Correct! You have a good understanding of DCF analysis.";
  } else {
    feedback.textContent = `Incorrect. The correct answer is ${correctAnswer}. Please review the DCF explanation and try again.`;
  }
}

    // ... (Other functions)
    
    // Add an event listener to the send button for the landing page chatbot
    const landingPageInput = document.getElementById('landing-page-input');
    const landingPageSendButton = document.getElementById('landing-page-send-button');
    landingPageSendButton.addEventListener('click', function(event) {
        handleLandingPageInput(landingPageInput.value);
        landingPageInput.value = '';
    });
  </script>
</body>
</html>
